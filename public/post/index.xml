<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts | Jixing Liu</title>
    <link>/post/</link>
      <atom:link href="/post/index.xml" rel="self" type="application/rss+xml" />
    <description>Posts</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><lastBuildDate>Mon, 01 Jun 2020 00:00:00 +0000</lastBuildDate>
    <image>
      <url>img/map[gravatar:%!s(bool=false) shape:circle]</url>
      <title>Posts</title>
      <link>/post/</link>
    </image>
    
    <item>
      <title>taste ggtext</title>
      <link>/post/taste-ggtext/</link>
      <pubDate>Mon, 01 Jun 2020 00:00:00 +0000</pubDate>
      <guid>/post/taste-ggtext/</guid>
      <description>


&lt;div id=&#34;load-pkgs&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;load pkgs&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(ggplot2)
library(dplyr)
#install.packages(&amp;quot;ggcharts&amp;quot;)
data(biomedicalrevenue, package = &amp;quot;ggcharts&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;example&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;example&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot &amp;lt;- biomedicalrevenue %&amp;gt;%
  filter(company %in% c(&amp;quot;Roche&amp;quot;, &amp;quot;Novartis&amp;quot;)) %&amp;gt;%
  ggplot(aes(year, revenue, color = company)) +
  geom_line(size = 1.2) +
  ggtitle(
    paste0(
      &amp;quot;&amp;lt;span style = &amp;#39;color:darkred&amp;#39;&amp;gt;__Roche__&amp;lt;/span&amp;gt;&amp;quot;,
      &amp;quot; *overtook* &amp;lt;span style = &amp;#39;color:darkorange&amp;#39;&amp;gt;**Novartis**&amp;lt;/span&amp;gt;&amp;quot;,
      &amp;quot; in 2016&amp;quot;
    )
  ) +
  scale_color_manual(
    values = c(&amp;quot;Roche&amp;quot; = &amp;quot;#93C1DE&amp;quot;, &amp;quot;Novartis&amp;quot; = &amp;quot;darkorange&amp;quot;),
    guide = &amp;quot;none&amp;quot;
  ) +
  ggcharts::theme_hermit(ticks = &amp;quot;x&amp;quot;, grid = &amp;quot;X&amp;quot;)  +
  theme(plot.title = ggtext::element_markdown())
plot&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-06-01-taste-ggtext.en_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;70%&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ËØ≠Ê≥ï&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;ËØ≠Ê≥ï&lt;/h2&gt;
&lt;p&gt;ÁõÆÂâç ggtext ÊîØÊåÅÁöÑ markdwon ËØ≠Ê≥ïÊúâÈôê&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;mdthemes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;üì¶ {mdthemes}&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#remotes::install_github(&amp;quot;thomas-neitmann/mdthemes&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Âçï‰∏™‰∏ªÈ¢òÂÖÉÁ¥†ËÆæÁΩÆ Markdown ËØ≠Ê≥ïÂ§™Ë¥π‰∫ã, ‰ΩøÁî® mdthemes üì¶, ‰∏ÄÊ¨°ÊÄßËÆæÁΩÆ.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Setting individual theme elements to¬†&lt;code&gt;ggtext::element_markdown()&lt;/code&gt;¬†can add quite a bit of boilerplate code to your plot.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot + mdthemes::md_theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-06-01-taste-ggtext.en_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;70%&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;title-the-subtitle-axis-labels-and-captions-set-one-time&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;title, the subtitle, axis labels and captions set one-time&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Apart from the title, the subtitle, axis labels and captions are set to element_markdown() for all mdthemes.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot +
  labs(
    x = &amp;quot;**Year**&amp;quot;,
    y = &amp;quot;Revenue (*Billion* USD)&amp;quot;,
    caption = &amp;quot;Data Source: *en.wikipedia.org/wiki/List_of_largest_biomedical_companies_by_revenue*&amp;quot;
  ) +
  mdthemes::md_theme_minimal()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-06-01-taste-ggtext.en_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;70%&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;mdthemes-ÂåÖÂê´ÁöÑ‰∏ªÈ¢òÈùûÂ∏∏‰∏∞ÂØå-‰∏îÂèØËá™ÂÆö‰πâ‰∏ªÈ¢ò&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;mdthemes ÂåÖÂê´ÁöÑ‰∏ªÈ¢òÈùûÂ∏∏‰∏∞ÂØå, ‰∏îÂèØËá™ÂÆö‰πâ‰∏ªÈ¢ò&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;The {mdthemes} packages currently contains all themes from {ggplot2}, {ggthemes}, {hrbrthemes}, {tvthemes} and {cowplot} with support for rendering text as markdown.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;If you want to turn a theme that is not part of the {mdthemes} package into an md_theme you can use the as_md_theme() function.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot + mdthemes::as_md_theme(hrbrthemes::theme_ipsum()) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-06-01-taste-ggtext.en_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;70%&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;links&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;links&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;https://thomas-neitmann.github.io/ggcharts/articles/themes.html&#34;&gt;Themes ‚Ä¢ ggcharts&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>ggplot2 thematic</title>
      <link>/post/thematic/</link>
      <pubDate>Tue, 05 May 2020 00:00:00 +0000</pubDate>
      <guid>/post/thematic/</guid>
      <description>


&lt;div id=&#34;install-pkg&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;install pkg&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# remotes::install_github(&amp;quot;rstudio/thematic&amp;quot;)
library(thematic)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(thematic)
thematic_on(
  bg = &amp;quot;#222222&amp;quot;, fg = &amp;quot;white&amp;quot;, accent = &amp;quot;#0CE3AC&amp;quot;,
  font = &amp;quot;auto&amp;quot;
)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(ggplot2)
ggplot(mtcars, aes(wt, mpg)) +
  geom_point() +
  geom_smooth()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Error : RStudio not running&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-05-thematic_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;70%&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ggplot(mtcars, aes(wt, mpg)) +
  geom_point(aes(color = factor(cyl))) +
  geom_smooth(color = &amp;quot;white&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Error : RStudio not running&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-05-thematic_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;70%&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;links&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;links&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://rstudio.github.io/thematic/&#34;&gt;Unified and Automatic Theming of ggplot2, lattice, and base R Graphics ‚Ä¢ thematic&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Example Time To Event (Survival) Analysis using visR</title>
      <link>/post/example-time-to-event-survival-analysis-using-visr/</link>
      <pubDate>Mon, 04 May 2020 00:00:00 +0000</pubDate>
      <guid>/post/example-time-to-event-survival-analysis-using-visr/</guid>
      <description>


&lt;div id=&#34;setup&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;setup&lt;/h2&gt;
&lt;/div&gt;
&lt;div id=&#34;load-pkgs&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;load pkgs&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(visR)
library(survival)
library(gt)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;set-var&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;set var&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Constants
DATASET &amp;lt;- paste0(&amp;quot;NCCTG Lung Cancer Dataset (from survival package &amp;quot;, 
                  packageVersion(&amp;quot;survival&amp;quot;), &amp;quot;)&amp;quot;)

#attrition_chart_fn &amp;lt;- &amp;quot;data/attrition_diagram.svg&amp;quot;
# Globql formatting options
options(digits = 3)

# Global table settings 
options(DT.options = list(pageLength = 10, 
                          language = list(search = &amp;#39;Filter:&amp;#39;), 
                          scrollX = TRUE))&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;load-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;load data&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data(lung)

lung_cohort &amp;lt;- lung %&amp;gt;% 
  rename(ECOG = ph.ecog,
         Karnofsky = ph.karno,
         institution = inst
         ) %&amp;gt;% 
  mutate(patid = paste0(&amp;quot;Pat&amp;quot;, row_number()),
         institution = factor(institution),
         sex = factor(if_else(sex == 1, &amp;quot;male&amp;quot;, &amp;quot;female&amp;quot;)),
         ECOG = factor(case_when(ECOG == 0 ~ &amp;quot;0 asymptomatic&amp;quot;,
                          ECOG == 1 ~ &amp;quot;1 ambulatory&amp;quot;,
                          ECOG == 2 ~ &amp;quot;2 in bed less than 50% of day&amp;quot;,
                          ECOG == 3 ~ &amp;quot;3 in bed more than 50% of day&amp;quot;,
                          ECOG == 4 ~ &amp;quot;4 bedbound&amp;quot;,
                          ECOG == 5 ~ &amp;quot;5 dead&amp;quot;)),
         dx_age_group = factor(case_when(age &amp;lt; 30 ~ &amp;quot;&amp;lt; 30y&amp;quot;,
                                         age &amp;gt;= 30 &amp;amp; age &amp;lt;= 50 ~ &amp;quot;30-50y&amp;quot;,
                                         age &amp;gt; 50 &amp;amp; age &amp;lt;= 70 ~ &amp;quot;51-70y&amp;quot;,
                                         age &amp;gt; 70 ~ &amp;quot;&amp;gt; 70y&amp;quot;),
                               levels=c(&amp;quot;&amp;lt; 30y&amp;quot;, &amp;quot;30-50y&amp;quot;, &amp;quot;51-70y&amp;quot;, &amp;quot;&amp;gt; 70y&amp;quot;)),
    status = if_else(status == 1, 0, 1)) %&amp;gt;% 
    select(-meal.cal, -pat.karno)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;eda&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;EDA&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;skimr::skim(lung_cohort)&lt;/code&gt;&lt;/pre&gt;
&lt;table style=&#39;width: auto;&#39;
        class=&#39;table table-condensed&#39;&gt;
&lt;caption&gt;
&lt;span id=&#34;tab:unnamed-chunk-4&#34;&gt;Table 1: &lt;/span&gt;Data summary
&lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Name
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
lung_cohort
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Number of rows
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
228
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Number of columns
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
10
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
_______________________
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Column type frequency:
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
character
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
factor
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
4
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
numeric
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
5
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
________________________
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Group variables
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
None
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Variable type: character&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
skim_variable
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
n_missing
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
complete_rate
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
min
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
max
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
empty
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
n_unique
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
whitespace
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
patid
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
228
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Variable type: factor&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
skim_variable
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
n_missing
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
complete_rate
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
ordered
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
n_unique
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
top_counts
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
institution
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
FALSE
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
18
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1: 36, 12: 23, 13: 20, 3: 19
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
sex
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
FALSE
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
mal: 138, fem: 90
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ECOG
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
FALSE
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1 a: 113, 0 a: 63, 2 i: 50, 3 i: 1
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
dx_age_group
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
FALSE
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
51-: 156, &amp;gt; 7: 46, 30-: 26, &amp;lt; 3: 0
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Variable type: numeric&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
skim_variable
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
n_missing
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
complete_rate
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
mean
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
sd
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
p0
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
p25
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
p50
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
p75
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
p100
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
hist
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
time
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
305.23
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
210.65
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
5
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
167
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
256
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
396.5
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1022
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñá‚ñá‚ñÉ‚ñÇ‚ñÅ
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
status
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.72
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.45
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñÉ‚ñÅ‚ñÅ‚ñÅ‚ñá
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
age
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
62.45
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
9.07
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
39
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
56
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
63
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
69.0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
82
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñÇ‚ñÖ‚ñá‚ñá‚ñÉ
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Karnofsky
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
81.94
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
12.33
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
50
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
75
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
80
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
90.0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
100
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñÉ‚ñÉ‚ñá‚ñá‚ñÉ
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
wt.loss
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
14
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.94
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
9.83
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
13.14
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
-24
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
7
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
15.8
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
68
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñÅ‚ñá‚ñÉ‚ñÅ‚ñÅ
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div id=&#34;follow-chart-cohort-selection&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;follow chart Cohort Selection&lt;/h2&gt;
&lt;p&gt;For this exercise we will only include patients with (1) ECOG available (2) and non-missing weight-loss data in our analysis&lt;/p&gt;
&lt;div id=&#34;attrition-table&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Attrition Table&lt;/h3&gt;
&lt;p&gt;ËøáÊª§Ë°®&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cohort_attrition &amp;lt;- vr_attrition_table(
  data = lung_cohort,
  criteria_descriptions = c(&amp;quot;1. ECOG available&amp;quot;, 
                            &amp;quot;2. Weight loss data available&amp;quot;, 
                            &amp;quot;3. Non-missing vital status&amp;quot;,
                            &amp;quot;4. Positive follow up time&amp;quot;),
  criteria_conditions   = c(&amp;quot;!is.na(ECOG)&amp;quot;,
                            &amp;quot;!is.na(wt.loss)&amp;quot;,
                            &amp;quot;!is.na(status)&amp;quot;,
                            &amp;quot;time &amp;gt;= 0&amp;quot;),
  subject_column_name   = &amp;#39;patid&amp;#39;)

 
vr_render_table(data = cohort_attrition, 
                title = &amp;quot;Attrition Table&amp;quot;, 
                caption = &amp;quot;Summary of samples fulfilling inclusion/exclusion criteria&amp;quot;, 
                datasource = DATASET, 
                engine = &amp;quot;gt&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;style&gt;html {
  font-family: -apple-system, BlinkMacSystemFont, &#39;Segoe UI&#39;, Roboto, Oxygen, Ubuntu, Cantarell, &#39;Helvetica Neue&#39;, &#39;Fira Sans&#39;, &#39;Droid Sans&#39;, Arial, sans-serif;
}

#slpiojvkjb .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#slpiojvkjb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#slpiojvkjb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#slpiojvkjb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#slpiojvkjb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#slpiojvkjb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#slpiojvkjb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#slpiojvkjb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#slpiojvkjb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#slpiojvkjb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#slpiojvkjb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#slpiojvkjb .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#slpiojvkjb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#slpiojvkjb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#slpiojvkjb .gt_from_md &gt; :first-child {
  margin-top: 0;
}

#slpiojvkjb .gt_from_md &gt; :last-child {
  margin-bottom: 0;
}

#slpiojvkjb .gt_row {
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#slpiojvkjb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#slpiojvkjb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#slpiojvkjb .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#slpiojvkjb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#slpiojvkjb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#slpiojvkjb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#slpiojvkjb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#slpiojvkjb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#slpiojvkjb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#slpiojvkjb .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#slpiojvkjb .gt_left {
  text-align: left;
}

#slpiojvkjb .gt_center {
  text-align: center;
}

#slpiojvkjb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#slpiojvkjb .gt_font_normal {
  font-weight: normal;
}

#slpiojvkjb .gt_font_bold {
  font-weight: bold;
}

#slpiojvkjb .gt_font_italic {
  font-style: italic;
}

#slpiojvkjb .gt_super {
  font-size: 65%;
}

#slpiojvkjb .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
&lt;/style&gt;
&lt;div id=&#34;slpiojvkjb&#34; style=&#34;overflow-x:auto;overflow-y:auto;width:auto;height:auto;&#34;&gt;&lt;table class=&#34;gt_table&#34;&gt;
  &lt;thead class=&#34;gt_header&#34;&gt;
    &lt;tr&gt;
      &lt;th colspan=&#34;6&#34; class=&#34;gt_heading gt_title gt_font_normal&#34; style&gt;Attrition Table&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th colspan=&#34;6&#34; class=&#34;gt_heading gt_subtitle gt_font_normal gt_bottom_border&#34; style&gt;Summary of samples fulfilling inclusion/exclusion criteria&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;thead class=&#34;gt_col_headings&#34;&gt;
    &lt;tr&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_left&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;Criteria&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_left&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;Condition&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_center&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;Remaining N&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_right&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;Remaining %&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_center&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;Excluded N&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_right&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;Excluded %&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody class=&#34;gt_table_body&#34;&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;Total cohort size&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;none&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;228.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;100.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;0.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;0.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;1. ECOG available&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;!is.na(ECOG)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;227.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;99.56&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;1.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;0.44&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;2. Weight loss data available&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;!is.na(wt.loss)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;213.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;93.42&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;14.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;6.14&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;3. Non-missing vital status&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;!is.na(status)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;213.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;93.42&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;0.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;0.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;4. Positive follow up time&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;time &amp;gt;= 0&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;213.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;93.42&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_center&#34;&gt;0.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;0.00&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot class=&#34;gt_sourcenotes&#34;&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_sourcenote&#34; colspan=&#34;6&#34;&gt;Data Source: NCCTG Lung Cancer Dataset (from survival package 3.1.11)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
  
&lt;/table&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;flow-chart-diagram&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;flow-chart diagram&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;complement_descriptions &amp;lt;- c(                                                   
    &amp;quot;Having exclusion criterion: non ECOG&amp;quot;,                                            
    &amp;quot;Having exclusion criterion: missing weight loss &amp;quot;,
    &amp;quot;Having exclusion criterion: missing vital status&amp;quot;,
    &amp;quot;Having exclusion criterion: negative follow up time&amp;quot;
)

# Create attrition flowchart
#attrition_chart_fn &amp;lt;- &amp;quot;attrition_diagram.svg&amp;quot;
# attrition_flow &amp;lt;- vr_attrition(
#   N_array = cohort_attrition$`Remaining N`,
#   descriptions = cohort_attrition$Criteria,
#   complement_descriptions = complement_descriptions,
#   output_path = attrition_chart_fn)

# knitr::include_graphics(attrition_chart_fn)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;analysis-data&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;analysis data&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;lung_cohort &amp;lt;- lung_cohort %&amp;gt;% 
  filter(!is.na(ECOG),
         !is.na(wt.loss),
         !is.na(status),
         time &amp;gt;= 0)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;table-1&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Table 1&lt;/h2&gt;
&lt;p&gt;Cohort Overview&lt;/p&gt;
&lt;p&gt;if the there are systematic differences between the chemotherapy and hormone therapy arms.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# some modifications to the table for nice printing of categories
lung_cohort_tab1 &amp;lt;- lung_cohort %&amp;gt;% 
  mutate(status = factor(case_when(status == 0 ~ &amp;quot;Alive/Censored&amp;quot;,
                                   status == 1 ~ &amp;quot;Dead&amp;quot;,
                                   is.na(status) ~ &amp;quot;Missing&amp;quot;))) %&amp;gt;% 
  filter(!is.na(time) &amp;amp; !is.na(age) &amp;amp; !is.na(Karnofsky)) %&amp;gt;% 
  select(-institution)

# visR table1 convenience function
vr_table_one(
  data = lung_cohort_tab1,
  title = &amp;quot;Overview over Lung Cancer patients&amp;quot;,
  caption = &amp;quot;Baseline characteristics of study cohort stratified by treatment type&amp;quot;,
  datasource = DATASET,
  groupCols = c(&amp;quot;sex&amp;quot;)
)&lt;/code&gt;&lt;/pre&gt;
&lt;style&gt;html {
  font-family: -apple-system, BlinkMacSystemFont, &#39;Segoe UI&#39;, Roboto, Oxygen, Ubuntu, Cantarell, &#39;Helvetica Neue&#39;, &#39;Fira Sans&#39;, &#39;Droid Sans&#39;, Arial, sans-serif;
}

#ohoaeodhnp .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ohoaeodhnp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ohoaeodhnp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ohoaeodhnp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ohoaeodhnp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ohoaeodhnp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ohoaeodhnp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ohoaeodhnp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ohoaeodhnp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ohoaeodhnp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ohoaeodhnp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ohoaeodhnp .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ohoaeodhnp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ohoaeodhnp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ohoaeodhnp .gt_from_md &gt; :first-child {
  margin-top: 0;
}

#ohoaeodhnp .gt_from_md &gt; :last-child {
  margin-bottom: 0;
}

#ohoaeodhnp .gt_row {
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ohoaeodhnp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#ohoaeodhnp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ohoaeodhnp .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#ohoaeodhnp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ohoaeodhnp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ohoaeodhnp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ohoaeodhnp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ohoaeodhnp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#ohoaeodhnp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ohoaeodhnp .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#ohoaeodhnp .gt_left {
  text-align: left;
}

#ohoaeodhnp .gt_center {
  text-align: center;
}

#ohoaeodhnp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ohoaeodhnp .gt_font_normal {
  font-weight: normal;
}

#ohoaeodhnp .gt_font_bold {
  font-weight: bold;
}

#ohoaeodhnp .gt_font_italic {
  font-style: italic;
}

#ohoaeodhnp .gt_super {
  font-size: 65%;
}

#ohoaeodhnp .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
&lt;/style&gt;
&lt;div id=&#34;ohoaeodhnp&#34; style=&#34;overflow-x:auto;overflow-y:auto;width:auto;height:auto;&#34;&gt;&lt;table class=&#34;gt_table&#34;&gt;
  &lt;thead class=&#34;gt_header&#34;&gt;
    &lt;tr&gt;
      &lt;th colspan=&#34;4&#34; class=&#34;gt_heading gt_title gt_font_normal&#34; style&gt;Overview over Lung Cancer patients&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th colspan=&#34;4&#34; class=&#34;gt_heading gt_subtitle gt_font_normal gt_bottom_border&#34; style&gt;Baseline characteristics of study cohort stratified by treatment type&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;thead class=&#34;gt_col_headings&#34;&gt;
    &lt;tr&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_left&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_left&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;female&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_left&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;male&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_left&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;Overall&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody class=&#34;gt_table_body&#34;&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;4&#34; class=&#34;gt_group_heading&#34;&gt;Sample&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;N&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;86&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;127&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;213&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;4&#34; class=&#34;gt_group_heading&#34;&gt;time&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Mean (SD)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;345 (205)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;295 (216)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;315 (213)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Median (IQR)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;294 (201-467)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;229 (163-392)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;269 (176-428)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Min-max&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;5-965&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;11-1022&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;5-1022&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Missing&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;0 (0%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;0 (0%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;0 (0%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;4&#34; class=&#34;gt_group_heading&#34;&gt;status&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Alive/Censored&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;37 (43%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;25 (19.7%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;62 (29.1%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Dead&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;49 (57%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;102 (80.3%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;151 (70.9%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;4&#34; class=&#34;gt_group_heading&#34;&gt;age&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Mean (SD)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;61.1 (9.01)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;63.5 (9.25)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;62.5 (9.21)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Median (IQR)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;61 (55-68.8)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;64 (57-70)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;63 (56-70)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Min-max&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;41-77&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;39-82&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;39-82&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Missing&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;0 (0%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;0 (0%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;0 (0%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;4&#34; class=&#34;gt_group_heading&#34;&gt;ECOG&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;0 asymptomatic&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;26 (30.2%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;35 (27.559%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;61 (28.638%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;1 ambulatory&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;41 (47.7%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;65 (51.181%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;106 (49.765%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;2 in bed less than 50% of day&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;19 (22.1%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;26 (20.472%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;45 (21.127%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;3 in bed more than 50% of day&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;NA&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;1 (0.787%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;1 (0.469%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;4&#34; class=&#34;gt_group_heading&#34;&gt;Karnofsky&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Mean (SD)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;82.6 (12)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;81.9 (12.5)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;82.2 (12.2)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Median (IQR)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;80 (80-90)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;80 (70-90)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;80 (80-90)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Min-max&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;50-100&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;50-100&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;50-100&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Missing&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;0 (0%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;0 (0%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;0 (0%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;4&#34; class=&#34;gt_group_heading&#34;&gt;wt.loss&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Mean (SD)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;7.77 (13.2)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;11.1 (12.9)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;9.73 (13.1)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Median (IQR)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;4 (0-11)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;8 (0.5-18)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;7 (0-15)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Min-max&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;-24-52&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;-13-68&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;-24-68&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Missing&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;0 (0%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;0 (0%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;0 (0%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;4&#34; class=&#34;gt_group_heading&#34;&gt;patid&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Unique values&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;86&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;127&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;213&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;Missing (%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;0 (0%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;0 (0%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;0 (0%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr class=&#34;gt_group_heading_row&#34;&gt;
      &lt;td colspan=&#34;4&#34; class=&#34;gt_group_heading&#34;&gt;dx_age_group&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;30-50y&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;12 (14.0%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;13 (10.2%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;25 (11.7%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;51-70y&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;59 (68.6%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;85 (66.9%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;144 (67.6%)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left gt_stub&#34;&gt;&amp;gt; 70y&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;15 (17.4%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;29 (22.8%)&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;44 (20.7%)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot class=&#34;gt_sourcenotes&#34;&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_sourcenote&#34; colspan=&#34;4&#34;&gt;Data Source: NCCTG Lung Cancer Dataset (from survival package 3.1.11)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
  
&lt;/table&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;kaplan-meier-curve&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Kaplan-Meier Curve&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;surv_eq &amp;lt;- &amp;quot;survival::Surv(time, status) ~ sex&amp;quot;

vr_kaplan_meier(
    lung_cohort,
    equation = surv_eq,
    data_source = DATASET, 
    time_unit = &amp;quot;days&amp;quot;,
    title = &amp;quot;Comparison of survival in male and female lung cancer patients&amp;quot;
)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-05-04-example-time-to-event-survival-analysis-using-visr_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div id=&#34;summary-of-kaplan-meier-curve&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Summary of Kaplan Meier Curve&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;km_summary &amp;lt;- vr_kaplan_meier_summary(lung_cohort, equation = surv_eq)

km_summary[[1]] %&amp;gt;%
  vr_render_table(&amp;quot;Overall Survival&amp;quot;,
                  &amp;quot;Median survival times in days for each strata&amp;quot;,
                  DATASET)&lt;/code&gt;&lt;/pre&gt;
&lt;style&gt;html {
  font-family: -apple-system, BlinkMacSystemFont, &#39;Segoe UI&#39;, Roboto, Oxygen, Ubuntu, Cantarell, &#39;Helvetica Neue&#39;, &#39;Fira Sans&#39;, &#39;Droid Sans&#39;, Arial, sans-serif;
}

#sthatfbkcd .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#sthatfbkcd .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#sthatfbkcd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#sthatfbkcd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#sthatfbkcd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#sthatfbkcd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#sthatfbkcd .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#sthatfbkcd .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#sthatfbkcd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#sthatfbkcd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#sthatfbkcd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#sthatfbkcd .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#sthatfbkcd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#sthatfbkcd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#sthatfbkcd .gt_from_md &gt; :first-child {
  margin-top: 0;
}

#sthatfbkcd .gt_from_md &gt; :last-child {
  margin-bottom: 0;
}

#sthatfbkcd .gt_row {
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#sthatfbkcd .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#sthatfbkcd .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#sthatfbkcd .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#sthatfbkcd .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#sthatfbkcd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#sthatfbkcd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#sthatfbkcd .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#sthatfbkcd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#sthatfbkcd .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#sthatfbkcd .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#sthatfbkcd .gt_left {
  text-align: left;
}

#sthatfbkcd .gt_center {
  text-align: center;
}

#sthatfbkcd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#sthatfbkcd .gt_font_normal {
  font-weight: normal;
}

#sthatfbkcd .gt_font_bold {
  font-weight: bold;
}

#sthatfbkcd .gt_font_italic {
  font-style: italic;
}

#sthatfbkcd .gt_super {
  font-size: 65%;
}

#sthatfbkcd .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
&lt;/style&gt;
&lt;div id=&#34;sthatfbkcd&#34; style=&#34;overflow-x:auto;overflow-y:auto;width:auto;height:auto;&#34;&gt;&lt;table class=&#34;gt_table&#34;&gt;
  &lt;thead class=&#34;gt_header&#34;&gt;
    &lt;tr&gt;
      &lt;th colspan=&#34;6&#34; class=&#34;gt_heading gt_title gt_font_normal&#34; style&gt;Overall Survival&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th colspan=&#34;6&#34; class=&#34;gt_heading gt_subtitle gt_font_normal gt_bottom_border&#34; style&gt;Median survival times in days for each strata&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;thead class=&#34;gt_col_headings&#34;&gt;
    &lt;tr&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_left&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;strata&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_right&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;# persons&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_right&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;# events&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_right&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;median survival time&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_right&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;0.95LCL&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_right&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;0.95UCL&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody class=&#34;gt_table_body&#34;&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;female&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;86.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;49.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;433.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;351.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;641.00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;male&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;127.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;102.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;284.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;223.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;337.00&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot class=&#34;gt_sourcenotes&#34;&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_sourcenote&#34; colspan=&#34;6&#34;&gt;Data Source: NCCTG Lung Cancer Dataset (from survival package 3.1.11)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
  
&lt;/table&gt;&lt;/div&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;km_summary[[2]] %&amp;gt;%
  vr_render_table(&amp;quot;Equality between Strata&amp;quot;,
                  &amp;quot;Summary table with test of equality over strata&amp;quot;,
                  DATASET)&lt;/code&gt;&lt;/pre&gt;
&lt;style&gt;html {
  font-family: -apple-system, BlinkMacSystemFont, &#39;Segoe UI&#39;, Roboto, Oxygen, Ubuntu, Cantarell, &#39;Helvetica Neue&#39;, &#39;Fira Sans&#39;, &#39;Droid Sans&#39;, Arial, sans-serif;
}

#npvtebkqev .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#npvtebkqev .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#npvtebkqev .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#npvtebkqev .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#npvtebkqev .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#npvtebkqev .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#npvtebkqev .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#npvtebkqev .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#npvtebkqev .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#npvtebkqev .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#npvtebkqev .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#npvtebkqev .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#npvtebkqev .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#npvtebkqev .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#npvtebkqev .gt_from_md &gt; :first-child {
  margin-top: 0;
}

#npvtebkqev .gt_from_md &gt; :last-child {
  margin-bottom: 0;
}

#npvtebkqev .gt_row {
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#npvtebkqev .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#npvtebkqev .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#npvtebkqev .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#npvtebkqev .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#npvtebkqev .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#npvtebkqev .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#npvtebkqev .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#npvtebkqev .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#npvtebkqev .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#npvtebkqev .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#npvtebkqev .gt_left {
  text-align: left;
}

#npvtebkqev .gt_center {
  text-align: center;
}

#npvtebkqev .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#npvtebkqev .gt_font_normal {
  font-weight: normal;
}

#npvtebkqev .gt_font_bold {
  font-weight: bold;
}

#npvtebkqev .gt_font_italic {
  font-style: italic;
}

#npvtebkqev .gt_super {
  font-size: 65%;
}

#npvtebkqev .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
&lt;/style&gt;
&lt;div id=&#34;npvtebkqev&#34; style=&#34;overflow-x:auto;overflow-y:auto;width:auto;height:auto;&#34;&gt;&lt;table class=&#34;gt_table&#34;&gt;
  &lt;thead class=&#34;gt_header&#34;&gt;
    &lt;tr&gt;
      &lt;th colspan=&#34;5&#34; class=&#34;gt_heading gt_title gt_font_normal&#34; style&gt;Equality between Strata&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th colspan=&#34;5&#34; class=&#34;gt_heading gt_subtitle gt_font_normal gt_bottom_border&#34; style&gt;Summary table with test of equality over strata&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;thead class=&#34;gt_col_headings&#34;&gt;
    &lt;tr&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_left&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;Test&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_right&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;statistic&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_right&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;df&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_right&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;p.value&lt;/th&gt;
      &lt;th class=&#34;gt_col_heading gt_columns_bottom_border gt_left&#34; rowspan=&#34;1&#34; colspan=&#34;1&#34;&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody class=&#34;gt_table_body&#34;&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;Log-rank&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;9.60&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;1.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;0.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;Log-rank gives more weight on higher values of time&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;Wilcoxon&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;11.84&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;1.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;0.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;Wilcoxon gives more weight on lower values of time&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;Tarone-Ware&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;11.63&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;1.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_right&#34;&gt;0.00&lt;/td&gt;
      &lt;td class=&#34;gt_row gt_left&#34;&gt;Tarone-Ware is in between&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
  &lt;tfoot class=&#34;gt_sourcenotes&#34;&gt;
    &lt;tr&gt;
      &lt;td class=&#34;gt_sourcenote&#34; colspan=&#34;5&#34;&gt;Data Source: NCCTG Lung Cancer Dataset (from survival package 3.1.11)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tfoot&gt;
  
&lt;/table&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>a gentle introduction to tidymodels</title>
      <link>/post/a-gentle-introduction-to-tidymodels/</link>
      <pubDate>Sun, 26 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/a-gentle-introduction-to-tidymodels/</guid>
      <description>


&lt;div id=&#34;setup&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;SETUP&lt;/h2&gt;
&lt;/div&gt;
&lt;div id=&#34;load-library&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Load library&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidymodels)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;eda&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;EDA&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;iris %&amp;gt;%
    janitor::clean_names() %&amp;gt;%
    set_names(colnames(.) %&amp;gt;%
                  str_replace_all(., &amp;quot;_&amp;quot;, &amp;quot; &amp;quot;) %&amp;gt;%
                  str_to_title()) %&amp;gt;%
    select_if(is.numeric) %&amp;gt;%
    gather() %&amp;gt;%
    ggplot(aes(x = value)) +
    facet_wrap(~ key, scales = &amp;quot;free&amp;quot;, ncol = 4) +
    geom_histogram()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-04-26-a-gentle-introduction-to-tidymodels_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;70%&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;iris %&amp;gt;%
    janitor::clean_names() %&amp;gt;%
    set_names(colnames(.) %&amp;gt;%
                  str_replace_all(., &amp;quot;_&amp;quot;, &amp;quot; &amp;quot;) %&amp;gt;%
                  str_to_title()) %&amp;gt;%
    select_if(is.factor) %&amp;gt;%
    gather() %&amp;gt;%
    ggplot(aes(x = value)) +
    geom_bar()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-04-26-a-gentle-introduction-to-tidymodels_files/figure-html/unnamed-chunk-2-2.png&#34; width=&#34;70%&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;split&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;split&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df  &amp;lt;- iris
set.seed(seed = 1972) 

train_test_split &amp;lt;-
    rsample::initial_split(
        data = df,     
        prop = 0.6   
    ) 

train_test_split&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## &amp;lt;90/60/150&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;train_tbl &amp;lt;- train_test_split %&amp;gt;% training() 
test_tbl  &amp;lt;- train_test_split %&amp;gt;% testing() &lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;recipes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;recipes&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;recipe_simple &amp;lt;- function(dataset) {
  recipe(Species ~ ., data = dataset ) %&amp;gt;%
    step_corr(all_predictors()) %&amp;gt;%
    step_center(all_predictors(), -all_outcomes()) %&amp;gt;%
    step_scale(all_predictors(), -all_outcomes()) %&amp;gt;%
    prep(dataset)
}

recipe_prepped &amp;lt;- recipe_simple(dataset = train_tbl)

train_baked &amp;lt;- bake(recipe_prepped, new_data = train_tbl)
test_baked  &amp;lt;- bake(recipe_prepped, new_data = test_tbl)

recipe_prepped&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Data Recipe
## 
## Inputs:
## 
##       role #variables
##    outcome          1
##  predictor          4
## 
## Training data contained 90 data points and no missing data.
## 
## Operations:
## 
## Correlation filter removed Petal.Length [trained]
## Centering for Sepal.Length, Sepal.Width, Petal.Width [trained]
## Scaling for Sepal.Length, Sepal.Width, Petal.Width [trained]&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;model-training&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Model Training&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;iris_ranger &amp;lt;- 
  rand_forest(trees = 100, mode = &amp;quot;classification&amp;quot;) %&amp;gt;%
  set_engine(&amp;quot;ranger&amp;quot;) %&amp;gt;%
  fit(Species ~ ., data = train_baked)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;predictions&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Predictions&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;iris_ranger %&amp;gt;%
  predict(test_baked) %&amp;gt;%
  bind_cols(test_baked) %&amp;gt;%
  glimpse()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Rows: 60
## Columns: 5
## $ .pred_class  &amp;lt;fct&amp;gt; setosa, setosa, setosa, setosa, setosa, setosa, setosa, ‚Ä¶
## $ Sepal.Length &amp;lt;dbl&amp;gt; -0.8625644, -1.4471337, -0.9794783, -0.5118229, -0.97947‚Ä¶
## $ Sepal.Width  &amp;lt;dbl&amp;gt; 1.2051348, 0.2410270, 1.4461618, 2.1692426, 0.9641078, 0‚Ä¶
## $ Petal.Width  &amp;lt;dbl&amp;gt; -1.3494745, -1.3494745, -1.3494745, -1.0831309, -1.34947‚Ä¶
## $ Species      &amp;lt;fct&amp;gt; setosa, setosa, setosa, setosa, setosa, setosa, setosa, ‚Ä¶&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;model-validation&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Model Validation&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;iris_ranger %&amp;gt;%
  predict(test_baked) %&amp;gt;%
  bind_cols(test_baked) %&amp;gt;%
  metrics(truth = Species, estimate = .pred_class)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 2 x 3
##   .metric  .estimator .estimate
##   &amp;lt;chr&amp;gt;    &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt;
## 1 accuracy multiclass     0.967
## 2 kap      multiclass     0.950&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;per-classifier-metrics&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Per classifier metrics&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;iris_ranger %&amp;gt;%
  predict(test_baked, type = &amp;quot;prob&amp;quot;) %&amp;gt;%
  bind_cols(test_baked) %&amp;gt;%
  roc_curve(Species, .pred_setosa:.pred_virginica) %&amp;gt;%
  autoplot()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-04-26-a-gentle-introduction-to-tidymodels_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;70%&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;links&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;links&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://rviews.rstudio.com/2019/06/19/a-gentle-intro-to-tidymodels/&#34;&gt;A Gentle Introduction to tidymodels ¬∑ R Views&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>ML Workflow</title>
      <link>/post/ml-workflow/</link>
      <pubDate>Sun, 26 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/ml-workflow/</guid>
      <description>


&lt;div id=&#34;setup&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Setup&lt;/h2&gt;
&lt;/div&gt;
&lt;div id=&#34;load-pkg&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Load pkg&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidymodels)  # Loads parsnip, rsample, recipes, yardstick
library(skimr)       # Quickly get a sense of data
library(knitr) &lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;load-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Load Data&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;telco &amp;lt;- read_csv(&amp;quot;data/WA_Fn-UseC_-Telco-Customer-Churn.csv&amp;quot;)

telco %&amp;gt;% head() %&amp;gt;% kable()&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
customerID
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
gender
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
SeniorCitizen
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Partner
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Dependents
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
tenure
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
PhoneService
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
MultipleLines
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
InternetService
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
OnlineSecurity
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
OnlineBackup
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
DeviceProtection
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
TechSupport
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
StreamingTV
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
StreamingMovies
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Contract
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
PaperlessBilling
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
PaymentMethod
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
MonthlyCharges
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
TotalCharges
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Churn
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
7590-VHVEG
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Female
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No phone service
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
DSL
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Month-to-month
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Electronic check
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
29.85
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
29.85
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
5575-GNVDE
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Male
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
34
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
DSL
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
One year
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Mailed check
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
56.95
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1889.50
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
3668-QPYBK
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Male
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
DSL
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Month-to-month
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Mailed check
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
53.85
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
108.15
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
7795-CFOCW
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Male
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
45
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No phone service
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
DSL
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
One year
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Bank transfer (automatic)
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
42.30
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1840.75
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
9237-HQITU
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Female
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Fiber optic
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Month-to-month
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Electronic check
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
70.70
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
151.65
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
9305-CDSKC
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Female
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
8
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Fiber optic
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Month-to-month
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Electronic check
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
99.65
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
820.50
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div id=&#34;eda-skim-the-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;EDA: Skim the Data&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;telco %&amp;gt;% skim()&lt;/code&gt;&lt;/pre&gt;
&lt;table style=&#39;width: auto;&#39;
        class=&#39;table table-condensed&#39;&gt;
&lt;caption&gt;
&lt;span id=&#34;tab:unnamed-chunk-3&#34;&gt;Table 1: &lt;/span&gt;Data summary
&lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Name
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Piped data
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Number of rows
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
7043
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Number of columns
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
21
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
_______________________
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Column type frequency:
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
character
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
17
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
numeric
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
4
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
________________________
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Group variables
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
None
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Variable type: character&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
skim_variable
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
n_missing
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
complete_rate
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
min
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
max
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
empty
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
n_unique
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
whitespace
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
customerID
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
10
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
10
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
7043
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
gender
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Partner
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Dependents
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
PhoneService
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
MultipleLines
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
16
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
InternetService
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
11
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
OnlineSecurity
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
OnlineBackup
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
DeviceProtection
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
TechSupport
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
StreamingTV
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
StreamingMovies
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Contract
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
8
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
14
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
PaperlessBilling
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
PaymentMethod
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
12
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
25
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
4
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Churn
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Variable type: numeric&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
skim_variable
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
n_missing
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
complete_rate
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
mean
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
sd
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
p0
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
p25
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
p50
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
p75
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
p100
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
hist
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
SeniorCitizen
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.16
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.37
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.00
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñá‚ñÅ‚ñÅ‚ñÅ‚ñÇ
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
tenure
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
32.37
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
24.56
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
9.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
29.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
55.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
72.00
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñá‚ñÉ‚ñÉ‚ñÉ‚ñÜ
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
MonthlyCharges
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
64.76
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
30.09
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
18.25
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
35.50
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
70.35
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
89.85
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
118.75
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñá‚ñÖ‚ñÜ‚ñá‚ñÖ
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
TotalCharges
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
11
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2283.30
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2266.77
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
18.80
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
401.45
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1397.47
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3794.74
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
8684.80
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñá‚ñÇ‚ñÇ‚ñÇ‚ñÅ
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;div id=&#34;data-processing&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;data processing&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;telco &amp;lt;- telco %&amp;gt;%
    select(-customerID) %&amp;gt;%
    drop_na()&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df &amp;lt;- telco&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;tidymodels-workflow&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Tidymodels Workflow&lt;/h2&gt;
&lt;/div&gt;
&lt;div id=&#34;traintest-split&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Train/Test Split&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;set.seed(seed = 1972) 

train_test_split &amp;lt;-
    rsample::initial_split(
        data = df,     
        prop = 0.80   
    ) 

train_test_split&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## &amp;lt;5626/1406/7032&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;train_tbl &amp;lt;- train_test_split %&amp;gt;% training() 
test_tbl  &amp;lt;- train_test_split %&amp;gt;% testing() &lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;prepare&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Prepare&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;recipe_simple &amp;lt;- function(dataset) {
    recipe(Churn ~ ., data = dataset) %&amp;gt;%
        step_string2factor(all_nominal(), -all_outcomes()) %&amp;gt;%
        prep(data = dataset)
}

recipe_prepped &amp;lt;- recipe_simple(dataset = train_tbl)

train_baked &amp;lt;- bake(recipe_prepped, new_data = train_tbl)
test_baked  &amp;lt;- bake(recipe_prepped, new_data = test_tbl)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;generalized-linear-model-baseline&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Generalized Linear Model (Baseline)&lt;/h3&gt;
&lt;div id=&#34;fit-the-model&#34; class=&#34;section level5&#34;&gt;
&lt;h5&gt;Fit the Model&lt;/h5&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;logistic_glm &amp;lt;- logistic_reg(mode = &amp;quot;classification&amp;quot;) %&amp;gt;%
    set_engine(&amp;quot;glm&amp;quot;) %&amp;gt;%
    fit(Churn ~ ., data = train_baked)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;assess-performance&#34; class=&#34;section level5&#34;&gt;
&lt;h5&gt;Assess Performance&lt;/h5&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;predictions_glm &amp;lt;- logistic_glm %&amp;gt;%
    predict(new_data = test_baked) %&amp;gt;%
    bind_cols(test_baked %&amp;gt;% select(Churn))

predictions_glm %&amp;gt;% head() %&amp;gt;% kable()&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
.pred_class
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
Churn
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Yes
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
No
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div id=&#34;accuracy-precision-recall-and-f1-score&#34; class=&#34;section level5&#34;&gt;
&lt;h5&gt;Accuracy, Precision , Recall and F1 Score&lt;/h5&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;tibble(
  &amp;quot;accuracy&amp;quot; =
    accuracy(predictions_glm, Churn, .pred_class) %&amp;gt;%
    select(.estimate),
  &amp;quot;precision&amp;quot; =
    precision(predictions_glm, Churn, .pred_class) %&amp;gt;%
    select(.estimate),
  &amp;quot;recall&amp;quot; =
    recall(predictions_glm, Churn, .pred_class) %&amp;gt;%
    select(.estimate),
  &amp;quot;F1 score&amp;quot; =
    f_meas(predictions_glm, Churn, .pred_class) %&amp;gt;%
    select(.estimate),
) %&amp;gt;%
  unnest(cols = c(accuracy, precision, recall, `F1 score`)) %&amp;gt;%
  kable()&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
accuracy
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
precision
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
recall
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
F1 score
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.8058321
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.8376916
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.909002
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.8718911
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;random-forest&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Random Forest&lt;/h3&gt;
&lt;div id=&#34;cross-validation---10-fold&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Cross Validation - 10-Fold&lt;/h4&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cross_val_tbl &amp;lt;- vfold_cv(train_tbl, v = 10)
cross_val_tbl&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## #  10-fold cross-validation 
## # A tibble: 10 x 2
##    splits             id    
##    &amp;lt;named list&amp;gt;       &amp;lt;chr&amp;gt; 
##  1 &amp;lt;split [5.1K/563]&amp;gt; Fold01
##  2 &amp;lt;split [5.1K/563]&amp;gt; Fold02
##  3 &amp;lt;split [5.1K/563]&amp;gt; Fold03
##  4 &amp;lt;split [5.1K/563]&amp;gt; Fold04
##  5 &amp;lt;split [5.1K/563]&amp;gt; Fold05
##  6 &amp;lt;split [5.1K/563]&amp;gt; Fold06
##  7 &amp;lt;split [5.1K/562]&amp;gt; Fold07
##  8 &amp;lt;split [5.1K/562]&amp;gt; Fold08
##  9 &amp;lt;split [5.1K/562]&amp;gt; Fold09
## 10 &amp;lt;split [5.1K/562]&amp;gt; Fold10&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cross_val_tbl %&amp;gt;% pluck(&amp;quot;splits&amp;quot;, 1)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## &amp;lt;5063/563/5626&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;random-forest-1&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Random Forest&lt;/h4&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;rf_fun &amp;lt;- function(split, id, try, tree) {
    
    analysis_set &amp;lt;- split %&amp;gt;% analysis()
    analysis_prepped &amp;lt;- analysis_set %&amp;gt;% recipe_simple()
    analysis_baked &amp;lt;- analysis_prepped %&amp;gt;% bake(new_data = analysis_set)
    
    model_rf &amp;lt;-
        rand_forest(
            mode = &amp;quot;classification&amp;quot;,
            mtry = try,
            trees = tree
        ) %&amp;gt;%
        set_engine(&amp;quot;ranger&amp;quot;,
                   importance = &amp;quot;impurity&amp;quot;
        ) %&amp;gt;%
        fit(Churn ~ ., data = analysis_baked)
    
    assessment_set     &amp;lt;- split %&amp;gt;% assessment()
    assessment_prepped &amp;lt;- assessment_set %&amp;gt;% recipe_simple()
    assessment_baked   &amp;lt;- assessment_prepped %&amp;gt;% bake(new_data = assessment_set)
    
    tibble(
        &amp;quot;id&amp;quot; = id,
        &amp;quot;truth&amp;quot; = assessment_baked$Churn,
        &amp;quot;prediction&amp;quot; = model_rf %&amp;gt;%
            predict(new_data = assessment_baked) %&amp;gt;%
            unlist()
    )
    
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;modeling-with-purrr&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Modeling with purrr&lt;/h4&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pred_rf &amp;lt;- map2_df(
    .x = cross_val_tbl$splits,
    .y = cross_val_tbl$id,
    ~ rf_fun(split = .x, id = .y, try = 3, tree = 200)
)

head(pred_rf)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 6 x 3
##   id     truth prediction
##   &amp;lt;chr&amp;gt;  &amp;lt;fct&amp;gt; &amp;lt;fct&amp;gt;     
## 1 Fold01 No    No        
## 2 Fold01 No    No        
## 3 Fold01 Yes   No        
## 4 Fold01 No    No        
## 5 Fold01 No    No        
## 6 Fold01 No    No&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;assess-performance-1&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Assess Performance&lt;/h4&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pred_rf %&amp;gt;%
    conf_mat(truth, prediction) %&amp;gt;%
    summary() %&amp;gt;%
    select(-.estimator) %&amp;gt;%
    filter(.metric %in% c(&amp;quot;accuracy&amp;quot;, &amp;quot;precision&amp;quot;, &amp;quot;recall&amp;quot;, &amp;quot;f_meas&amp;quot;)) %&amp;gt;%
    kable()&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
.metric
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
.estimate
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
accuracy
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.7964806
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
precision
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.8320035
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
recall
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.9065443
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
f_meas
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.8676760
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Tidymodels: tidy machine learning in R</title>
      <link>/post/tidymodels-tidy-machine-learning-in-r/</link>
      <pubDate>Sun, 26 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/tidymodels-tidy-machine-learning-in-r/</guid>
      <description>


&lt;div id=&#34;setup&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Setup&lt;/h2&gt;
&lt;/div&gt;
&lt;div id=&#34;function&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;function&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;x_to_na &amp;lt;- function (s, x = 0)
{
    sapply(s, function(y)
        ifelse(y %in% x, NA, y))
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;what-is-tidymodels&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;What is tidymodels&lt;/h2&gt;
&lt;p&gt;Much like the tidyverse consists of many core packages, such as ggplot2 and dplyr, tidymodels also consists of several core packages, including&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;rsample&lt;/code&gt;: for sample splitting (e.g.¬†train/test or cross-validation)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;recipes&lt;/code&gt;: for pre-processing&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;parsnip&lt;/code&gt;: for specifying the model&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;yardstick&lt;/code&gt;: for evaluating the model&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We will also be using the &lt;code&gt;tune&lt;/code&gt; package (for parameter tuning procedure) and the &lt;code&gt;workflows&lt;/code&gt; package (for putting everything together) that I had thought were a part of CRAN‚Äôs tidymodels package bundle, but apparently they aren‚Äôt. These will need to be loaded separately for now.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;getting-set-up&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Getting set up&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# load the relevant tidymodels libraries
library(tidymodels)
library(tidyverse)
library(workflows)
library(tune)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;load-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Load Data&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# load the Pima Indians dataset from the mlbench dataset
library(mlbench)
data(PimaIndiansDiabetes)
# rename dataset to have shorter name because lazy
df &amp;lt;- PimaIndiansDiabetes
head(df)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##   pregnant glucose pressure triceps insulin mass pedigree age diabetes
## 1        6     148       72      35       0 33.6    0.627  50      pos
## 2        1      85       66      29       0 26.6    0.351  31      neg
## 3        8     183       64       0       0 23.3    0.672  32      pos
## 4        1      89       66      23      94 28.1    0.167  21      neg
## 5        0     137       40      35     168 43.1    2.288  33      pos
## 6        5     116       74       0       0 25.6    0.201  30      neg&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;eda&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;EDA&lt;/h2&gt;
&lt;div id=&#34;skim&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;skim&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;skimr::skim(df)&lt;/code&gt;&lt;/pre&gt;
&lt;table style=&#39;width: auto;&#39;
        class=&#39;table table-condensed&#39;&gt;
&lt;caption&gt;
&lt;span id=&#34;tab:unnamed-chunk-4&#34;&gt;Table 1: &lt;/span&gt;Data summary
&lt;/caption&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Name
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
df
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Number of rows
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
768
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Number of columns
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
9
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
_______________________
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Column type frequency:
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
factor
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
numeric
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
8
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
________________________
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
Group variables
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
None
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Variable type: factor&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
skim_variable
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
n_missing
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
complete_rate
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
ordered
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
n_unique
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
top_counts
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
diabetes
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
FALSE
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
neg: 500, pos: 268
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Variable type: numeric&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
skim_variable
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
n_missing
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
complete_rate
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
mean
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
sd
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
p0
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
p25
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
p50
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
p75
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
p100
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
hist
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
pregnant
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.85
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.37
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
6.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
17.00
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñá‚ñÉ‚ñÇ‚ñÅ‚ñÅ
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
glucose
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
120.89
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
31.97
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
99.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
117.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
140.25
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
199.00
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñÅ‚ñÅ‚ñá‚ñÜ‚ñÇ
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
pressure
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
69.11
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
19.36
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
62.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
72.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
80.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
122.00
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñÅ‚ñÅ‚ñá‚ñá‚ñÅ
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
triceps
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
20.54
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
15.95
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
23.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
32.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
99.00
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñá‚ñá‚ñÇ‚ñÅ‚ñÅ
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
insulin
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
79.80
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
115.24
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
30.50
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
127.25
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
846.00
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñá‚ñÅ‚ñÅ‚ñÅ‚ñÅ
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
mass
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
31.99
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
7.88
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
27.30
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
32.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
36.60
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
67.10
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñÅ‚ñÉ‚ñá‚ñÇ‚ñÅ
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
pedigree
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.47
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.33
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.08
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.24
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.37
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.63
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2.42
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñá‚ñÉ‚ñÅ‚ñÅ‚ñÅ
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
age
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
33.24
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
11.76
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
21.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
24.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
29.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
41.00
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
81.00
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
‚ñá‚ñÉ‚ñÅ‚ñÅ‚ñÅ
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div id=&#34;distribution&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;distribution&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df %&amp;gt;%
    janitor::clean_names() %&amp;gt;%
    set_names(colnames(.) %&amp;gt;%
                  str_replace_all(., &amp;quot;_&amp;quot;, &amp;quot; &amp;quot;) %&amp;gt;%
                  str_to_title()) %&amp;gt;%
    select_if(is.numeric) %&amp;gt;%
    gather() %&amp;gt;%
    ggplot(aes(x = value)) +
    facet_wrap(~ key, scales = &amp;quot;free&amp;quot;, ncol = 4) +
    geom_histogram()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-04-26-tidymodels-tidy-machine-learning-in-r_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;70%&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df %&amp;gt;%
    janitor::clean_names() %&amp;gt;%
    set_names(colnames(.) %&amp;gt;%
                  str_replace_all(., &amp;quot;_&amp;quot;, &amp;quot; &amp;quot;) %&amp;gt;%
                  str_to_title()) %&amp;gt;%
    select_if(is.factor) %&amp;gt;%
    gather() %&amp;gt;%
    ggplot(aes(x = value)) +
    geom_bar()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-04-26-tidymodels-tidy-machine-learning-in-r_files/figure-html/unnamed-chunk-5-2.png&#34; width=&#34;70%&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;replace-na&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;replace NA&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# df_clean &amp;lt;- df %&amp;gt;%
#   mutate_at(vars(triceps, glucose, pressure, insulin, mass),
#             function(.var) {
#               if_else(condition = (.var == 0), # if true (i.e. the entry is 0)
#                       true = as.numeric(NA),  # replace the value with NA
#                       false = .var # otherwise leave it as it is
#                       )
#             })

df_clean &amp;lt;- df %&amp;gt;%
  mutate_at(vars(triceps, glucose, pressure, insulin, mass), ~ x_to_na(.x))&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;split-into-traintest&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Split into train/test&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;set.seed(234589)
# split the data into trainng (75%) and testing (25%)
set.seed(seed = 1972) 

train_test_split &amp;lt;-
    rsample::initial_split(
        data = df_clean,     
        prop = 3/4 
    ) 

train_test_split&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## &amp;lt;576/192/768&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;train_tbl &amp;lt;- train_test_split %&amp;gt;% training() 
test_tbl  &amp;lt;- train_test_split %&amp;gt;% testing() &lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;cv-fold&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;cv-fold&lt;/h3&gt;
&lt;p&gt;At some point we‚Äôre going to want to do some parameter tuning, and to do that we‚Äôre going to want to use cross-validation. So we can create a cross-validated version of the training set in preparation for that moment using vfold_cv().&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# create CV object from training data
train_cv &amp;lt;- vfold_cv(train_tbl)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;define-a-recipe&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Define a recipe&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# define the recipe function
recipe_simple &amp;lt;- function(data) {
  # which consists of the formula (outcome ~ predictors)
  recipe(diabetes ~ pregnant + glucose + pressure + triceps +
           insulin + mass + pedigree + age,
         data = data) %&amp;gt;%
    # and some pre-processing steps
    step_normalize(all_numeric()) %&amp;gt;%
    step_knnimpute(all_predictors()) %&amp;gt;% 
    prep(data = data)
}

recipe_prepped &amp;lt;- recipe_simple(data = df_clean)

train_baked &amp;lt;- bake(recipe_prepped, new_data = train_tbl)
test_baked  &amp;lt;- bake(recipe_prepped, new_data = test_tbl)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;specify-the-model&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Specify the model&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Parsnip offers a unified interface for the massive variety of models that exist in R.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;The &lt;strong&gt;model type&lt;/strong&gt;: what kind of model you want to fit, set using a different function depending on the model, such as &lt;code&gt;rand_forest()&lt;/code&gt; for random forest, &lt;code&gt;logistic_reg()&lt;/code&gt; for logistic regression, &lt;code&gt;svm_poly()&lt;/code&gt; for a polynomial SVM model etc. The full list of models available via parsnip can be found &lt;a href=&#34;https://tidymodels.github.io/parsnip/articles/articles/Models.html&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The &lt;strong&gt;arguments&lt;/strong&gt;: the model parameter values (now consistently named across different models), set using &lt;code&gt;set_args()&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The &lt;strong&gt;engine&lt;/strong&gt;: the underlying package the model should come from (e.g.¬†‚Äúranger‚Äù for the ranger implementation of Random Forest), set using &lt;code&gt;set_engine()&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The &lt;strong&gt;mode&lt;/strong&gt;: the type of prediction - since several packages can do both classification (binary/categorical prediction) and regression (continuous prediction), set using &lt;code&gt;set_mode()&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div id=&#34;rf&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;RF&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;üìå this code doesn‚Äôt actually fit the model. Like the recipe, it just outlines a description of the model.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;setting a parameter to tune() means that it will be tuned later in the tune stage of the pipeline. You could also just specify a particular value of the parameter if you don‚Äôt want to tune it e.g.¬†using set_args(mtry = 4).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;rf_model &amp;lt;- 
  # specify that the model is a random forest
  rand_forest() %&amp;gt;%
  # specify that the `mtry` parameter needs to be tuned
  set_args(mtry = tune()) %&amp;gt;%
  # select the engine/package that underlies the model
  set_engine(&amp;quot;ranger&amp;quot;) %&amp;gt;%
  # choose either the continuous regression or binary classification mode
  set_mode(&amp;quot;classification&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;put-it-all-together-in-a-workflow&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Put it all together in a workflow&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# set the workflow
rf_workflow &amp;lt;- workflow() %&amp;gt;%
  # add the recipe
  add_recipe(recipe_prepped) %&amp;gt;%
  # add the model
  add_model(rf_model)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;tune-the-parameters&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Tune the parameters&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;üìå You can tune multiple parameters at once by providing multiple parameters to the expand.grid() function, e.g.¬†expand.grid(mtry = c(3, 4, 5), trees = c(100, 500)).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# specify which values eant to try
rf_grid &amp;lt;- expand.grid(mtry = c(3, 4, 5))
# extract results
rf_tune_results &amp;lt;- 
  rf_workflow %&amp;gt;%
  tune_grid(resamples = train_cv, #CV object
            grid = rf_grid, # grid of values to try
            metrics = metric_set(accuracy, roc_auc) # metrics we care about
            )

# print results
rf_tune_results %&amp;gt;%
  collect_metrics()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 6 x 6
##    mtry .metric  .estimator  mean     n std_err
##   &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;    &amp;lt;chr&amp;gt;      &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;   &amp;lt;dbl&amp;gt;
## 1     3 accuracy binary     0.759    10  0.0216
## 2     3 roc_auc  binary     0.843    10  0.0160
## 3     4 accuracy binary     0.759    10  0.0211
## 4     4 roc_auc  binary     0.841    10  0.0163
## 5     5 accuracy binary     0.764    10  0.0200
## 6     5 roc_auc  binary     0.841    10  0.0155&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;finalize-the-workflow&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Finalize the workflow&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;param_final &amp;lt;- 
  rf_tune_results %&amp;gt;%
  select_best(metric = &amp;quot;accuracy&amp;quot;, maximize = TRUE)
param_final&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1 x 1
##    mtry
##   &amp;lt;dbl&amp;gt;
## 1     5&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# add this parameter to the workflow using the finalize_workflow() function.
rf_workflow &amp;lt;- 
  rf_workflow %&amp;gt;%
  finalize_workflow(param_final)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;fit-the-final-model&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Fit the final model&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;rf_fit &amp;lt;- rf_workflow %&amp;gt;%
  # fit on entire training set and evaluate on test set
  last_fit(train_test_split)

rf_fit&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # # Monte Carlo cross-validation (0.75/0.25) with 1 resamples  
## # A tibble: 1 x 6
##   splits        id           .metrics      .notes      .predictions    .workflow
##   &amp;lt;list&amp;gt;        &amp;lt;chr&amp;gt;        &amp;lt;list&amp;gt;        &amp;lt;list&amp;gt;      &amp;lt;list&amp;gt;          &amp;lt;list&amp;gt;   
## 1 &amp;lt;split [576/‚Ä¶ train/test ‚Ä¶ &amp;lt;tibble [2 √ó‚Ä¶ &amp;lt;tibble [0‚Ä¶ &amp;lt;tibble [192 √ó‚Ä¶ &amp;lt;workflo‚Ä¶&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;evaluate-the-model-on-the-test-set&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Evaluate the model on the test set&lt;/h2&gt;
&lt;div id=&#34;performance&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;performance&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;test_performance &amp;lt;- rf_fit %&amp;gt;% collect_metrics()
test_performance&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 2 x 3
##   .metric  .estimator .estimate
##   &amp;lt;chr&amp;gt;    &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt;
## 1 accuracy binary         0.755
## 2 roc_auc  binary         0.829&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;predict&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;predict&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# generate predictions from the test set
test_predictions &amp;lt;- rf_fit %&amp;gt;% collect_predictions()
test_predictions&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 192 x 6
##    id               .pred_neg .pred_pos  .row .pred_class diabetes
##    &amp;lt;chr&amp;gt;                &amp;lt;dbl&amp;gt;     &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt; &amp;lt;fct&amp;gt;       &amp;lt;fct&amp;gt;   
##  1 train/test split     0.249    0.751      1 pos         pos     
##  2 train/test split     0.292    0.708      3 pos         pos     
##  3 train/test split     0.402    0.598      5 pos         pos     
##  4 train/test split     0.587    0.413     10 neg         pos     
##  5 train/test split     0.428    0.572     14 pos         pos     
##  6 train/test split     0.785    0.215     19 neg         neg     
##  7 train/test split     0.417    0.583     25 pos         pos     
##  8 train/test split     0.203    0.797     32 pos         pos     
##  9 train/test split     0.973    0.0272    34 neg         neg     
## 10 train/test split     0.277    0.723     37 pos         neg     
## # ‚Ä¶ with 182 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# test_predictions &amp;lt;- rf_fit %&amp;gt;% pull(.predictions)
# test_predictions&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;confusion-matrix&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;confusion matrix&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# generate a confusion matrix
test_predictions %&amp;gt;% 
  conf_mat(truth = diabetes, estimate = .pred_class)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##           Truth
## Prediction neg pos
##        neg 104  25
##        pos  22  41&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;test_predictions %&amp;gt;%
  ggplot() +
  geom_density(aes(x = .pred_pos, fill = diabetes), 
               alpha = 0.5)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-04-26-tidymodels-tidy-machine-learning-in-r_files/figure-html/unnamed-chunk-17-1.png&#34; width=&#34;70%&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Deep Learning With Keras in R</title>
      <link>/post/deep-learning-with-keras-in-r/</link>
      <pubDate>Sat, 18 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/deep-learning-with-keras-in-r/</guid>
      <description>


&lt;div id=&#34;load-libraries&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Load Libraries&lt;/h2&gt;
&lt;/div&gt;
&lt;div id=&#34;import-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Import Data&lt;/h2&gt;
&lt;p&gt;Download the&lt;a href=&#34;https://www.ibm.com/communities/analytics/watson-analytics-blog/predictive-insights-in-the-telco-customer-churn-data-set/&#34;&gt;IBM Watson Telco Data Set here&lt;/a&gt;. Next, use&lt;code&gt;read_csv()&lt;/code&gt;to import the data into a nice tidy data frame. We use the&lt;code&gt;glimpse()&lt;/code&gt;function to quickly inspect the data. We have the target ‚ÄúChurn‚Äù and all other variables are potential predictors. The raw data set needs to be cleaned and preprocessed for ML.&lt;/p&gt;
&lt;p&gt;Use sapply to check the number if missing values in each columns&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;preprocess-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;üìå Preprocess Data&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;We‚Äôll go through a few steps to preprocess the data for ML. First, we ‚Äúprune‚Äù the data, which is nothing more than removing unnecessary columns and rows. Then we split into training and testing sets. After that we explore the training set to uncover transformations that will be needed for deep learning. We save the best for last. We end by preprocessing the data with the new &lt;a href=&#34;https://topepo.github.io/recipes&#34;&gt;recipes&lt;/a&gt; package.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;prune: ÂéªÊéâ‰∏çË¶ÅÁöÑË°åÂíåÂàó&lt;/li&gt;
&lt;li&gt;split: ÂàáÂàÜÊï∞ÊçÆ&lt;/li&gt;
&lt;li&gt;EDA explore the data&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;prune-the-data&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Prune The Data&lt;/h3&gt;
&lt;p&gt;The data has a few columns and rows we‚Äôd like to remove:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The ‚ÄúcustomerID‚Äù column is a unique identifier for each observation that isn‚Äôt needed for modeling. We can de-select this column.&lt;/li&gt;
&lt;li&gt;The data has 11 &lt;code&gt;NA&lt;/code&gt; values all in the ‚ÄúTotalCharges‚Äù column. Because it‚Äôs such a small percentage of the total population (99.8% complete cases), we can drop these observations with the &lt;code&gt;drop_na()&lt;/code&gt; function from &lt;a href=&#34;http://tidyr.tidyverse.org/&#34;&gt;tidyr&lt;/a&gt;. Note that these may be customers that have not yet been charged, and therefore an alternative is to replace with zero or -99 to segregate this population from the rest.&lt;/li&gt;
&lt;li&gt;My preference is to have the target in the first column so we‚Äôll include a final select() ooperation to do so.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We‚Äôll perform the cleaning operation with one tidyverse pipe (%&amp;gt;%) chain.&lt;/p&gt;
&lt;p&gt;Bar plots of categorical variables&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;split-into-traintest-sets&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Split Into Train/Test Sets&lt;/h3&gt;
&lt;p&gt;We have a new package, &lt;a href=&#34;https://topepo.github.io/rsample/&#34;&gt;rsample&lt;/a&gt;, which is very useful for sampling methods. It has the &lt;code&gt;initial_split()&lt;/code&gt; function for splitting data sets into training and testing sets. The return is a special &lt;code&gt;rsplit&lt;/code&gt; object.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;exploration-what-transformation-steps-are-needed-for-ml&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Exploration: What Transformation Steps Are Needed For ML?&lt;/h3&gt;
&lt;p&gt;This phase of the analysis is often called exploratory analysis, but basically &lt;strong&gt;we are trying to answer the question, ‚ÄúWhat steps are needed to prepare for ML?‚Äù The key concept is knowing what transformations are needed to run the algorithm most effectively&lt;/strong&gt;. &lt;font color=&#34;darkred&#34;&gt; &lt;strong&gt;Artificial Neural Networks are best when the data is one-hot encoded, scaled and centered&lt;/strong&gt;&lt;/font&gt; . In addition, other transformations may be beneficial as well to make relationships easier for the algorithm to identify. A full exploratory analysis is not practical in this article. With that said we‚Äôll cover a few tips on transformations that can help as they relate to this dataset. In the next section, we will implement the preprocessing techniques.&lt;/p&gt;
&lt;p&gt;ÂõûÁ≠î‰∏Ä‰∏™ÈóÆÈ¢ò: ML ÈúÄË¶Å‰ªÄ‰πàÊ†∑ÁöÑÊï∞ÊçÆ? Êï∞ÊçÆÈúÄË¶ÅÂÅö‰ªÄ‰πàÊ†∑ÁöÑËΩ¨Êç¢.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;font color=&#34;darkred&#34;&gt;one-hot, scaled and centered&lt;/font&gt; ÊØîËæÉÈÄÇÂêàÁ•ûÁªèÁΩëÁªú&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div id=&#34;discretize-the-tenure-feature&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Discretize The ‚Äútenure‚Äù Feature&lt;/h4&gt;
&lt;p&gt;Numeric features like age, years worked, length of time in a position can generalize a group (or &lt;font color=&#34;darkred&#34;&gt; &lt;strong&gt;cohort&lt;/strong&gt;&lt;/font&gt; ). We see this in marketing a lot (think ‚Äúmillennials‚Äù, which identifies a group born in a certain timeframe). The ‚Äútenure‚Äù feature falls into this category of numeric features that can be discretized into groups.&lt;/p&gt;
&lt;p&gt;ËøûÁª≠ÂèòÈáèÁöÑÁ¶ªÊï£Âåñ&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;transform-the-totalcharges-feature&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Transform The ‚Äútotalcharges‚Äù Feature&lt;/h4&gt;
&lt;p&gt;log transform&lt;/p&gt;
&lt;p&gt;What we don‚Äôt like to see is when a lot of observations are bunched within a small part of the range.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blogs.rstudio.com/tensorflow/posts/2018-01-11-keras-customer-churn/images/figure-html/unnamed-chunk-11-1.png&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;We can use a log transformation to even out the data into more of a normal distribution.&lt;/strong&gt; It‚Äôs not perfect, but it‚Äôs quick and easy to get our data spread out a bit more.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blogs.rstudio.com/tensorflow/posts/2018-01-11-keras-customer-churn/images/figure-html/unnamed-chunk-12-1.png&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;Êï∞ÊçÆËΩ¨Êç¢ÊîπÂèòÊï∞ÊçÆ‰πãÈó¥ÁöÑÁõ∏ÂÖ≥ÊÄß&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Êï∞ÊçÆËΩ¨Êç¢ÊîπÂèòÊï∞ÊçÆ‰πãÈó¥ÁöÑÁõ∏ÂÖ≥ÊÄß&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Pro Tip: A quick test is to see if the log transformation increases the magnitude of the correlation&lt;/strong&gt; between ‚ÄúTotalCharges‚Äù and ‚ÄúChurn‚Äù. We‚Äôll use a few &lt;a href=&#34;http://dplyr.tidyverse.org/&#34;&gt;dplyr&lt;/a&gt; operations along with the &lt;a href=&#34;https://github.com/drsimonj/corrr&#34;&gt;corrr&lt;/a&gt; package to perform a quick correlation.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;correlate()&lt;/code&gt;: Performs tidy correlations on numeric data&lt;/li&gt;
&lt;li&gt;&lt;code&gt;focus()&lt;/code&gt;: Similar to &lt;code&gt;select()&lt;/code&gt;. Takes columns and focuses on only the rows/columns of importance.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fashion()&lt;/code&gt;: Makes the formatting aesthetically easier to read.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The correlation between ‚ÄúChurn‚Äù and ‚ÄúLogTotalCharges‚Äù is greatest in magnitude indicating the &lt;strong&gt;log transformation should improve the accuracy of the ANN model&lt;/strong&gt; we build. Therefore, we should perform the log transformation.&lt;/p&gt;
&lt;p&gt;x Âíå y ‰πãÈó¥ÁöÑÁõ∏ÂÖ≥ÊÄß, ÁªèËøáËΩ¨Êç¢ÂêéÂ¢ûÂº∫‰∫Ü, ËøôÊ†∑ÊúâÂà©‰∫éÊ®°ÂûãÁöÑËÆ≠ÁªÉ&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;one-hot-encoding&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;One-Hot Encoding&lt;/h4&gt;
&lt;p&gt;One-hot encoding is the process of &lt;strong&gt;converting categorical data to sparse data&lt;/strong&gt;, which has columns of only zeros and ones (this is also called creating ‚Äúdummy variables‚Äù or a ‚Äúdesign matrix‚Äù). &lt;strong&gt;All non-numeric data will need to be converted to dummy variables&lt;/strong&gt;. This is simple for binary Yes/No data because we can simply convert to 1‚Äôs and 0‚Äôs. It becomes slightly more complicated with multiple categories, which requires creating new columns of 1‚Äôs and 0`s for each category (actually one less). &lt;strong&gt;We have four features that are multi-category: Contract, Internet Service, Multiple Lines, and Payment Method.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blogs.rstudio.com/tensorflow/posts/2018-01-11-keras-customer-churn/images/figure-html/unnamed-chunk-14-1.png&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;feature-scaling&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Feature Scaling&lt;/h4&gt;
&lt;p&gt;ANN‚Äôs typically perform faster and often times with higher accuracy when the features are scaled and/or normalized (aka centered and scaled, also known as &lt;strong&gt;standardizing&lt;/strong&gt;). &lt;strong&gt;Because ANNs use gradient descent, weights tend to update faster&lt;/strong&gt;. According to &lt;a href=&#34;https://sebastianraschka.com/&#34;&gt;&lt;em&gt;Sebastian Raschka&lt;/em&gt;&lt;/a&gt;, an expert in the field of Deep Learning, several examples when feature scaling is important are:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;k-nearest neighbors with an Euclidean distance measure if want all features to contribute equally&lt;/li&gt;
&lt;li&gt;k-means (see k-nearest neighbors)&lt;/li&gt;
&lt;li&gt;logistic regression, SVMs, perceptrons, neural networks etc. if you are using gradient descent/ascent-based optimization, otherwise some weights will update much faster than others&lt;/li&gt;
&lt;li&gt;linear discriminant analysis, principal component analysis, kernel principal component analysis since you want to find directions of maximizing the variance (under the constraints that those directions/eigenvectors/principal components are orthogonal); &lt;strong&gt;you want to have features on the same scale since you‚Äôd emphasize variables on ‚Äúlarger measurement scales‚Äù more&lt;/strong&gt;. There are many more cases than I can possibly list here ‚Ä¶ I always recommend you to think about the algorithm and what it‚Äôs doing, and then it typically becomes obvious whether we want to scale your features or not.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;The interested reader can read &lt;a href=&#34;http://sebastianraschka.com/Articles/2014_about_feature_scaling.html&#34;&gt;Sebastian Raschka‚Äôs article&lt;/a&gt; for a full discussion on the scaling/normalization topic. &lt;font color=&#34;darkred&#34;&gt; &lt;strong&gt;Pro Tip: When in doubt, standardize the data&lt;/strong&gt;&lt;/font&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;preprocessing-with-recipes&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Preprocessing With Recipes&lt;/h3&gt;
&lt;p&gt;Let‚Äôs implement the preprocessing steps/transformations uncovered during our exploration. Max Kuhn (creator of &lt;a href=&#34;http://topepo.github.io/caret/index.html&#34;&gt;caret&lt;/a&gt;) has been putting some work into &lt;em&gt;Rlang ML tools&lt;/em&gt; lately, and the payoff is beginning to take shape. &lt;strong&gt;A new package, &lt;a href=&#34;https://topepo.github.io/recipes&#34;&gt;recipes&lt;/a&gt;, makes creating ML data preprocessing workflows a breeze&lt;/strong&gt;! It takes a little getting used to, but I‚Äôve found that it really helps manage the preprocessing steps. We‚Äôll go over the nitty gritty as it applies to this problem.&lt;/p&gt;
&lt;div id=&#34;step-1-create-a-recipe&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Step 1: Create A Recipe&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;A ‚Äúrecipe‚Äù is nothing more than a series of steps you would like to perform on the training, testing and/or validation sets&lt;/strong&gt;. Think of preprocessing data like baking a cake (I‚Äôm not a baker but stay with me). &lt;strong&gt;The recipe is our steps to make the cake&lt;/strong&gt;. It doesn‚Äôt do anything other than create the playbook for baking.&lt;/p&gt;
&lt;p&gt;We use the &lt;code&gt;recipe()&lt;/code&gt; function to implement our preprocessing steps. The function takes a familiar &lt;code&gt;object&lt;/code&gt; argument, which is a modeling function such as &lt;code&gt;object = Churn ~ .&lt;/code&gt; meaning ‚ÄúChurn‚Äù is the outcome (aka response, predictor, target) and all other features are predictors. The function also takes the &lt;code&gt;data&lt;/code&gt; argument, which gives the ‚Äúrecipe steps‚Äù perspective on how to apply during baking (next).&lt;/p&gt;
&lt;p&gt;A recipe is not very useful until we add ‚Äústeps‚Äù, which are used to transform the data during baking. The package contains a number of useful ‚Äústep functions‚Äù that can be applied. The entire list of &lt;a href=&#34;https://topepo.github.io/recipes/reference/index.html&#34;&gt;Step Functions&lt;/a&gt; can be viewed here. For our model, we use:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;code&gt;step_discretize()&lt;/code&gt; with the &lt;code&gt;option = list(cuts = 6)&lt;/code&gt; to cut the continuous variable for ‚Äútenure‚Äù (number of years as a customer) to group customers into cohorts. Êï∞ÊçÆÁ¶ªÊï£Âåñ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;step_log()&lt;/code&gt; to log transform ‚ÄúTotalCharges‚Äù.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;step_dummy()&lt;/code&gt; to one-hot encode the categorical data. Note that this adds columns of one/zero for categorical data with three or more categories.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;step_center()&lt;/code&gt; to mean-center the data. ÊâÄÊúâÊï∞ÊçÆÂáèÂéªÂπ≥ÂùáÂÄº&lt;/li&gt;
&lt;li&gt;&lt;code&gt;step_scale()&lt;/code&gt; to scale the data.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The last step is to prepare the recipe with the &lt;code&gt;prep()&lt;/code&gt; function. This step is used to ‚Äúestimate the required parameters from a training set that can later be applied to other data sets‚Äù. &lt;strong&gt;This is important for centering and scaling and other functions that use parameters defined from the training set&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;prep()&lt;/code&gt;, Ëøô‰∏ÄÊ≠•ÈùûÂ∏∏ÈáçË¶Å, ÂèØ‰ª•ËØÑ‰º∞ÈúÄË¶ÅÁöÑÂèÇÊï∞‰øùÂ≠ò‰∏ãÊù•Áî®‰∫é‰πãÂêéÁöÑ future raw data, ËøôÂØπ‰∫éÊï∞ÊçÆÊ†áÂáÜÂåñËøô‰∏ÄÊ≠•ÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑ.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Here‚Äôs how simple it is to implement the preprocessing steps that we went over!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;We can print the recipe object if we ever forget what steps were used to prepare the data. &lt;strong&gt;Pro Tip: We can save the recipe object as an RDS file using &lt;code&gt;saveRDS()&lt;/code&gt;, and then use it to &lt;code&gt;bake()&lt;/code&gt; (discussed next) future raw data into ML-ready data in production!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Êàë‰ª¨ÂèØ‰ª•‰øùÂ≠ò‰∏ãÊù•Ëøô‰∏™ recipes Áî®‰∫é‰πãÂêéÁöÑÊï∞ÊçÆÂáÜÂ§á, ËøôÂØπ‰∫é‰ΩøÁî®Ê®°ÂûãÈ¢ÑÊµãÊï∞ÊçÆÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑ.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;step-2-baking-with-your-recipe&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Step 2: Baking With Your Recipe&lt;/h4&gt;
&lt;p&gt;Now for the fun part! We can apply the ‚Äúrecipe‚Äù to any data set with the &lt;code&gt;bake()&lt;/code&gt; function, and it processes the data following our recipe steps. We‚Äôll apply to our training and testing data to convert from raw data to a machine learning dataset. Check our training set out with &lt;code&gt;glimpse()&lt;/code&gt;. &lt;strong&gt;Now that‚Äôs an ML-ready dataset prepared for ANN modeling!!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;font color=&#34;darkred&#34;&gt;raw dataset to machine learning dataset&lt;/font&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;step-3-dont-forget-the-target&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Step 3: Don‚Äôt Forget The Target&lt;/h4&gt;
&lt;p&gt;One last step, we need to store the actual values (truth) as &lt;code&gt;y_train_vec&lt;/code&gt; and &lt;code&gt;y_test_vec&lt;/code&gt;, which are needed for modeling our ANN. We convert to a series of numeric ones and zeros which can be accepted by the Keras ANN modeling functions. We add ‚Äúvec‚Äù to the name so we can easily remember the class of the object (it‚Äôs easy to get confused when working with tibbles, vectors, and matrix data types).&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;keras-model-customer-churn-with-keras-deep-learning&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;üìå Keras: Model Customer Churn With Keras (Deep Learning)&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;This is super exciting!! Finally, Deep Learning with Keras in R!&lt;/strong&gt; The team at RStudio has done fantastic work recently to create the &lt;a href=&#34;https://tensorflow.rstudio.com/keras/&#34;&gt;keras&lt;/a&gt; package, which implements &lt;a href=&#34;https://keras.io/&#34;&gt;Keras&lt;/a&gt; in R. Very cool!&lt;/p&gt;
&lt;div id=&#34;background-on-artifical-neural-networks&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Background On Artifical Neural Networks&lt;/h3&gt;
&lt;p&gt;For those unfamiliar with Neural Networks (and those that need a refresher), &lt;a href=&#34;https://www.xenonstack.com/blog/overview-of-artificial-neural-networks-and-its-applications&#34;&gt;read this article&lt;/a&gt;. It‚Äôs very comprehensive, and you‚Äôll leave with a general understanding of the types of deep learning and how they work.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blogs.rstudio.com/tensorflow/posts/2018-01-11-keras-customer-churn/images/Artificial-Neural-Network-Architecture.jpg&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Source: &lt;a href=&#34;https://www.xenonstack.com/blog/overview-of-artificial-neural-networks-and-its-applications&#34;&gt;Xenon Stack&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Deep Learning has been available in R for some time, but the primary packages used in the wild have not (this includes Keras, Tensor Flow, Theano, etc, which are all Python libraries). It‚Äôs worth mentioning that a number of other Deep Learning packages exist in R including &lt;code&gt;h2o&lt;/code&gt;, &lt;code&gt;mxnet&lt;/code&gt;, and others. The interested reader can check out &lt;a href=&#34;http://www.rblog.uni-freiburg.de/2017/02/07/deep-learning-in-r/&#34;&gt;this blog post for a comparison of deep learning packages in R&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;building-a-deep-learning-model&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Building A Deep Learning Model&lt;/h3&gt;
&lt;p&gt;We‚Äôre going to build a special class of ANN called a &lt;a href=&#34;https://en.wikipedia.org/wiki/Multilayer_perceptron&#34;&gt;Multi-Layer Perceptron (MLP)&lt;/a&gt;. MLPs are one of the simplest forms of deep learning, but they are both highly accurate and serve as a jumping-off point for more complex algorithms. MLPs are quite versatile as they can be used for regression, binary and multi classification (and are typically quite good at classification problems).&lt;/p&gt;
&lt;p&gt;We‚Äôll build a three layer MLP with Keras. Let‚Äôs walk-through the steps before we implement in R.&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;&lt;font color=&#34;darkred&#34;&gt;&lt;strong&gt;Initialize a sequential model&lt;/strong&gt;&lt;/font&gt; : The first step is to initialize a sequential model with &lt;code&gt;keras_model_sequential()&lt;/code&gt;, which is the beginning of our Keras model. The sequential model is composed of a linear stack of layers.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Apply layers to the sequential model&lt;/strong&gt;: Layers consist of the input layer, hidden layers and an output layer. The &lt;strong&gt;input layer is the data and provided it‚Äôs formatted correctly there‚Äôs nothing more to discuss&lt;/strong&gt;. The hidden layers and output layers are what controls the ANN inner workings.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Hidden Layers&lt;/strong&gt;: Hidden layers form the neural network nodes that enable non-linear activation using weights. The hidden layers are created using &lt;code&gt;layer_dense()&lt;/code&gt;. We‚Äôll add two hidden layers. We‚Äôll apply &lt;code&gt;units = 16&lt;/code&gt;, which is the &lt;strong&gt;number of nodes&lt;/strong&gt;. We‚Äôll select &lt;code&gt;kernel_initializer = &#34;uniform&#34;&lt;/code&gt; and &lt;code&gt;activation = &#34;relu&#34;&lt;/code&gt; for both layers. The first layer needs to have the &lt;code&gt;input_shape = 35&lt;/code&gt;, which is the number of columns in the training set (the number of feature) . &lt;strong&gt;Key Point: While we are arbitrarily selecting the number of hidden layers, units, kernel initializers and activation functions, these parameters can be optimized through a process called hyperparameter tuning that is discussed in &lt;a href=&#34;https://blogs.rstudio.com/tensorflow/posts/2018-01-11-keras-customer-churn/#next-steps&#34;&gt;Next Steps&lt;/a&gt;&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ÂÖ≥ÈîÆÁÇπÔºöÂ∞ΩÁÆ°Êàë‰ª¨ÂèØ‰ª•‰ªªÊÑèÈÄâÊã©ÈöêËóèÂ±ÇÔºåÂçïÂÖÉÔºåÂÜÖÊ†∏ÂàùÂßãÂåñÁ®ãÂ∫èÂíåÊøÄÊ¥ªÂáΩÊï∞ÁöÑÊï∞ÈáèÔºå‰ΩÜÊòØÂèØ‰ª•ÈÄöËøáÁß∞‰∏∫‚ÄúË∂ÖÂèÇÊï∞Ë∞ÉÊï¥‚ÄùÁöÑËøáÁ®ãÊù•‰ºòÂåñËøô‰∫õÂèÇÊï∞ÔºåËØ•ËøáÁ®ãÂ∞ÜÂú®[ÂêéÁª≠Ê≠•È™§]‰∏≠ËøõË°åËÆ®ËÆ∫„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Dropout Layers&lt;/strong&gt;: Dropout layers are used to &lt;strong&gt;control overfitting&lt;/strong&gt;. This eliminates weights below a cutoff threshold to prevent low weights from overfitting the layers. We use the &lt;code&gt;layer_dropout()&lt;/code&gt; function add two drop out layers with &lt;code&gt;rate = 0.10&lt;/code&gt; to remove weights below 10%.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Output Layer&lt;/strong&gt;: The output layer specifies the shape of the output and the method of assimilating the learned information. The output layer is applied using the &lt;code&gt;layer_dense()&lt;/code&gt;. For binary values, the shape should be &lt;code&gt;units = 1&lt;/code&gt;. For multi-classification, the &lt;code&gt;units&lt;/code&gt; should correspond to the number of classes. We set the &lt;code&gt;kernel_initializer = &#34;uniform&#34;&lt;/code&gt; and the &lt;code&gt;activation = &#34;sigmoid&#34;&lt;/code&gt; (common for binary classification).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol start=&#34;3&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;strong&gt;Compile the model&lt;/strong&gt;: The last step is to compile the model with &lt;code&gt;compile()&lt;/code&gt;. We‚Äôll use &lt;code&gt;optimizer = &#34;adam&#34;&lt;/code&gt;, which is one of the most popular optimization algorithms. We select &lt;code&gt;loss = &#34;binary_crossentropy&#34;&lt;/code&gt; since this is a binary classification problem. We‚Äôll select &lt;code&gt;metrics = c(&#34;accuracy&#34;)&lt;/code&gt; to be evaluated during training and testing. &lt;strong&gt;Key Point: The optimizer is often included in the tuning process&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;div id=&#34;build-model-object&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Build model object&lt;/h4&gt;
&lt;p&gt;Let‚Äôs codify the discussion above to build our Keras MLP-flavored ANN model.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;fit-model&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Fit Model&lt;/h4&gt;
&lt;p&gt;We use the fit() function to run the ANN on our training data. The object is our model, and x and y are our training data in matrix and numeric vector forms, respectively. The &lt;code&gt;batch_size = 50&lt;/code&gt; sets the number samples per gradient update within each epoch. We set &lt;code&gt;epochs = 35&lt;/code&gt; to control the number training cycles. Typically we want to keep the batch size high since this decreases the error within each training cycle (epoch). We also want epochs to be large, which is important in visualizing the training history (discussed below). We set &lt;code&gt;validation_split = 0.30&lt;/code&gt; to include 30% of the data for model validation, which prevents overfitting. The training process should complete in 15 seconds or so.&lt;/p&gt;
&lt;p&gt;Êàë‰ª¨Â∞Ü&#34; validation_split = 0.30&#34;ËÆæÁΩÆ‰∏∫ÂåÖÊã¨30ÔºÖÁöÑÊï∞ÊçÆÁî®‰∫éÊ®°ÂûãÈ™åËØÅÔºåËøôÂèØ‰ª•Èò≤Ê≠¢ËøáÊãüÂêà„ÄÇ
È™åËØÅÈõÜÂºÑÂ§ß‰∏ÄÁÇπÂèØ‰ª•Èò≤Ê≠¢Ê®°ÂûãËøáÊãüÂêà??&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;vis-history&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;vis history&lt;/h4&gt;
&lt;p&gt;We can inspect the training history. We want to make sure there is minimal difference between the validation accuracy and the training accuracy.&lt;/p&gt;
&lt;p&gt;We can visualize the Keras training history using the &lt;code&gt;plot()&lt;/code&gt; function. What we want to see is the validation accuracy and loss leveling off, which means the model has completed training. We see that there is some divergence between training loss/accuracy and validation loss/accuracy. This model indicates we can possibly stop training at an earlier epoch. &lt;font color=&#34;darkred&#34;&gt;&lt;strong&gt;Pro Tip: Only use enough epochs to get a high validation accuracy. Once validation accuracy curve begins to flatten or decrease, it‚Äôs time to stop training.&lt;/strong&gt;&lt;/font&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;‰∏ìÂÆ∂ÊèêÁ§∫ÔºöËØ∑‰ªÖ‰ΩøÁî®Ë∂≥Â§üÁöÑ epochs ‰ª•Ëé∑ÂæóËæÉÈ´òÁöÑÈ™åËØÅÂáÜÁ°ÆÊÄß„ÄÇÈ™åËØÅÂáÜÁ°ÆÊÄßÊõ≤Á∫øÂºÄÂßãÂèòÂπ≥ÊàñÂáèÂ∞èÂêéÔºåÂ∞±ËØ•ÂÅúÊ≠¢ËÆ≠ÁªÉ‰∫Ü„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;making-predictions&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Making Predictions&lt;/h3&gt;
&lt;p&gt;We‚Äôve got a good model based on the validation accuracy. Now let‚Äôs make some predictions from our &lt;a href=&#34;https://tensorflow.rstudio.com/keras/&#34;&gt;keras&lt;/a&gt; model on the test data set, which was unseen during modeling (we use this for the true performance assessment). We have two functions to generate predictions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;predict_classes()&lt;/code&gt;: Generates class values as a matrix of ones and zeros. Since we are dealing with binary classification, we‚Äôll convert the output to a vector.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;predict_proba()&lt;/code&gt;: Generates the class probabilities as a numeric matrix indicating &lt;strong&gt;the probability of being a class&lt;/strong&gt;. Again, we convert to a numeric vector because there is only one column output.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;inspect-performance-with-yardstick&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Inspect Performance With Yardstick&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;yardstick&lt;/code&gt; package has a collection of handy functions for measuring performance of machine learning models. We‚Äôll overview some metrics we can use to understand the performance of our model.&lt;/p&gt;
&lt;p&gt;First, let‚Äôs get the data formatted for &lt;code&gt;yardstick&lt;/code&gt;. We create a data frame with the &lt;strong&gt;truth (actual values as factors)&lt;/strong&gt;, &lt;strong&gt;estimate (predicted values as factors)&lt;/strong&gt;, and &lt;strong&gt;the class probability (probability of yes as numeric)&lt;/strong&gt;. We use the &lt;code&gt;fct_recode()&lt;/code&gt; function from the &lt;a href=&#34;http://forcats.tidyverse.org/&#34;&gt;forcats&lt;/a&gt; package to assist with recoding as Yes/No values.&lt;/p&gt;
&lt;p&gt;Now that we have the data formatted, we can take advantage of the &lt;code&gt;yardstick&lt;/code&gt; package. The only other thing we need to do is to set &lt;code&gt;options(yardstick.event_first = FALSE)&lt;/code&gt;. As pointed out by &lt;a href=&#34;https://github.com/ad1729&#34;&gt;ad1729&lt;/a&gt; in &lt;a href=&#34;https://blogs.rstudio.com/tensorflow/posts/2018-01-11-keras-customer-churn/options(yardstick.event_first%20=%20FALSE)&#34;&gt;GitHub Issue 13&lt;/a&gt;, the default is to classify 0 as the positive class instead of 1.&lt;/p&gt;
&lt;p&gt;Ëøô‰∏™ÈóÆÈ¢òÂú®ÊúÄÊñ∞ÁâàÁöÑ yardstick Â∑≤ÁªèÂæóÂà∞Ëß£ÂÜ≥‰∫Ü&lt;/p&gt;
&lt;div id=&#34;confusion-table&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Confusion Table&lt;/h4&gt;
&lt;p&gt;We can use the &lt;code&gt;conf_mat()&lt;/code&gt; function to get the confusion table. We see that the model was by no means perfect, but it did a decent job of identifying customers likely to churn.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;accuracy&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Accuracy&lt;/h4&gt;
&lt;p&gt;We can use the &lt;code&gt;metrics()&lt;/code&gt; function to get an accuracy measurement from the test set. We are getting roughly 82% accuracy.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;auc&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;AUC&lt;/h4&gt;
&lt;p&gt;We can also get the ROC Area Under the Curve (AUC) measurement. AUC is often a good metric used to compare different classifiers and to compare to randomly guessing (AUC_random = 0.50). Our model has AUC = 0.85, which is much better than randomly guessing. Tuning and testing different classification algorithms may yield even better results.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;precision-and-recall&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Precision And Recall&lt;/h4&gt;
&lt;p&gt;Precision is when the model predicts ‚Äúyes‚Äù, how often is it actually ‚Äúyes‚Äù. Recall (also true positive rate or specificity) is when the actual value is ‚Äúyes‚Äù how often is the model correct. We can get &lt;code&gt;precision()&lt;/code&gt; and &lt;code&gt;recall()&lt;/code&gt; measurements using &lt;code&gt;yardstick&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Precision and recall are very important to the business case: The organization is concerned with &lt;strong&gt;balancing the cost of targeting and retaining customers at risk of leaving with the cost of inadvertently targeting customers that are not planning to leave&lt;/strong&gt; (and potentially decreasing revenue from this group). The threshold above which to predict Churn = ‚ÄúYes‚Äù can be adjusted to optimize for the business problem. This becomes an &lt;strong&gt;Customer Lifetime Value optimization problem&lt;/strong&gt; that is discussed further in &lt;a href=&#34;https://blogs.rstudio.com/tensorflow/posts/2018-01-11-keras-customer-churn/#next-steps&#34;&gt;Next Steps&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;f1-score&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;F1 Score&lt;/h4&gt;
&lt;p&gt;We can also get the F1-score, which is a &lt;strong&gt;weighted average between the precision and recall.&lt;/strong&gt; Machine learning classifier thresholds are often adjusted to maximize the F1-score. However, this is often not the optimal solution to the business problem.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;explain-the-model-with-lime&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;üìå Explain The Model With LIME&lt;/h2&gt;
&lt;p&gt;LIME stands for &lt;em&gt;Local Interpretable Model-agnostic Explanations&lt;/em&gt;, and is a method for explaining black-box machine learning model classifiers. For those new to LIME, this YouTube video does a really nice job explaining how LIME helps to identify feature importance with black box machine learning models (e.g.¬†deep learning, stacked ensembles, random forest).&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://i.loli.net/2020/04/18/5QsLvq1PdHUthGC.png&#34; alt=&#34;why should I trust you&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;why should I trust you&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=hUnRCxnydCc&amp;amp;feature=emb_logo&#34;&gt;(28) KDD2016 paper 573 - YouTube&lt;/a&gt;&lt;/p&gt;
&lt;div id=&#34;setup&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Setup&lt;/h4&gt;
&lt;p&gt;The &lt;a href=&#34;https://github.com/thomasp85/lime&#34;&gt;lime&lt;/a&gt; package implements &lt;a href=&#34;https://github.com/marcotcr/lime&#34;&gt;LIME&lt;/a&gt; in R. One thing to note is that it‚Äôs not setup out-of-the-box to work with &lt;code&gt;keras&lt;/code&gt;. The good news is with a few functions we can get everything working properly. We‚Äôll need to make two custom functions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;model_type&lt;/code&gt;: Used to tell &lt;code&gt;lime&lt;/code&gt; &lt;strong&gt;what type of model we are dealing with&lt;/strong&gt;. It could be classification, regression, survival, etc.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;predict_model&lt;/code&gt;: Used to allow &lt;code&gt;lime&lt;/code&gt; to perform predictions that its algorithm can interpret.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;model_type-fucntion-define&#34; class=&#34;section level5&#34;&gt;
&lt;h5&gt;model_type fucntion define&lt;/h5&gt;
&lt;p&gt;The first thing we need to do is &lt;strong&gt;identify the class of our model object&lt;/strong&gt;. We do this with the &lt;code&gt;class()&lt;/code&gt; function.&lt;/p&gt;
&lt;p&gt;Next we create our &lt;code&gt;model_type()&lt;/code&gt; function. It‚Äôs only input is x the keras model. &lt;strong&gt;The function simply returns ‚Äúclassification‚Äù, which tells LIME we are classifying.&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;predict_model-function-define&#34; class=&#34;section level5&#34;&gt;
&lt;h5&gt;predict_model function define&lt;/h5&gt;
&lt;p&gt;Now we can create our &lt;code&gt;predict_model()&lt;/code&gt; function, which wraps &lt;code&gt;keras::predict_proba()&lt;/code&gt;. &lt;strong&gt;The trick here is to realize that it‚Äôs inputs must be x a model, newdata a dataframe object (this is important)&lt;/strong&gt;, and type which is not used but can be use to switch the output type. The output is also a little tricky because it must be in the format of probabilities by classification (this is important; shown next).&lt;/p&gt;
&lt;p&gt;Run this next script to show you what the output looks like and to test our predict_model() function. See how it‚Äôs the probabilities by classification. It must be in this form for &lt;code&gt;model_type = &#34;classification&#34;&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;predict_model-function&#34; class=&#34;section level5&#34;&gt;
&lt;h5&gt;predict_model() function&lt;/h5&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;enjoy-lime&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Enjoy LIME&lt;/h4&gt;
&lt;p&gt;Now the fun part, we create an explainer using the &lt;code&gt;lime()&lt;/code&gt; function. Just pass the training data set without the ‚ÄúAttribution column‚Äù. The form must be a data frame, which is OK since our &lt;code&gt;predict_model&lt;/code&gt; function will switch it to an keras object. Set &lt;code&gt;model = automl_leader&lt;/code&gt; our leader model, and &lt;code&gt;bin_continuous = FALSE&lt;/code&gt;. We could tell the algorithm to bin continuous variables, but this may not make sense for categorical numeric data that we didn‚Äôt change to factors.&lt;/p&gt;
&lt;p&gt;Now we run the &lt;code&gt;explain()&lt;/code&gt; function, which returns our explanation. This can take a minute to run so we limit it to just the first ten rows of the test data set.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;We set &lt;code&gt;n_labels = 1&lt;/code&gt; because we care about explaining a single class.&lt;/li&gt;
&lt;li&gt;Setting &lt;code&gt;n_features = 4&lt;/code&gt; &lt;strong&gt;returns the top four features that are critical to each case&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Finally, setting &lt;code&gt;kernel_width = 0.5&lt;/code&gt; allows us to increase the ‚Äúmodel_r2‚Äù value by shrinking the localized evaluation.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;feature-importance-visualization&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Feature Importance Visualization&lt;/h4&gt;
&lt;p&gt;The payoff for the work we put in using LIME is this &lt;strong&gt;feature importance plot&lt;/strong&gt;. This allows us to visualize each of the first ten cases (observations) from the test data. &lt;strong&gt;The top four features for each case are shown&lt;/strong&gt;. Note that &lt;strong&gt;they are not the same for each case&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;The green bars mean that the feature &lt;strong&gt;supports the model conclusion&lt;/strong&gt;, and the red bars contradict.&lt;/p&gt;
&lt;p&gt;A few important features based on frequency in first ten cases:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tenure (7 cases)&lt;/li&gt;
&lt;li&gt;Senior Citizen (5 cases)&lt;/li&gt;
&lt;li&gt;Online Security (4 cases)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Another excellent visualization can be performed using &lt;code&gt;plot_explanations()&lt;/code&gt;, which produces a facetted heatmap of all case/label/feature combinations. It‚Äôs a more condensed version of plot_features(), but we need to be careful because it does not provide exact statistics and it makes it less easy to investigate binned features (Notice that ‚Äútenure‚Äù would not be identified as a contributor even though it shows up as a top feature in 7 of 10 cases).&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;check-explanations-with-correlation-analysis&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;üìå Check Explanations With Correlation Analysis&lt;/h2&gt;
&lt;p&gt;One thing we need to be careful with the LIME visualization is that we are only doing a sample of the data, in our case the first 10 test observations. Therefore, we are &lt;strong&gt;gaining a very localized understanding of how the ANN works&lt;/strong&gt;. However, we also want to know on from a global perspective what drives feature importance.&lt;/p&gt;
&lt;p&gt;We can perform a &lt;strong&gt;correlation analysis&lt;/strong&gt; on the training set as well to help glean what features correlate globally to ‚ÄúChurn‚Äù. We‚Äôll use the &lt;code&gt;corrr&lt;/code&gt; package, which performs tidy correlations with the function &lt;code&gt;correlate()&lt;/code&gt;. We can get the correlations as follows.&lt;/p&gt;
&lt;p&gt;The correlation visualization helps in distinguishing which features are relavant to Churn.&lt;/p&gt;
&lt;p&gt;The correlation analysis helps us quickly disseminate which features that the LIME analysis may be excluding. We can see that the following features are highly correlated (magnitude &amp;gt; 0.25):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Increases Likelihood of Churn (Red): - Tenure = Bin 1 (&amp;lt;12 Months) - Internet Service = ‚ÄúFiber Optic‚Äù - Payment Method = ‚ÄúElectronic Check‚Äù&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Decreases Likelihood of Churn (Blue): - Contract = ‚ÄúTwo Year‚Äù - Total Charges (Note that this may be a biproduct of additional services such as Online Security)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;feature-investigation&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;üìå Feature Investigation&lt;/h2&gt;
&lt;p&gt;We can investigate features that are &lt;strong&gt;most frequent&lt;/strong&gt; in the LIME feature importance visualization along with those that the &lt;strong&gt;correlation analysis shows an above normal magnitude&lt;/strong&gt;. We‚Äôll investigate:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tenure (7/10 LIME Cases, Highly Correlated)&lt;/li&gt;
&lt;li&gt;Contract (Highly Correlated)&lt;/li&gt;
&lt;li&gt;Internet Service (Highly Correlated)&lt;/li&gt;
&lt;li&gt;Payment Method (Highly Correlated)&lt;/li&gt;
&lt;li&gt;Senior Citizen (5/10 LIME Cases)&lt;/li&gt;
&lt;li&gt;Online Security (4/10 LIME Cases)&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;tenure-710-lime-cases-highly-correlated&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Tenure (7/10 LIME Cases, Highly Correlated)&lt;/h4&gt;
&lt;p&gt;LIME cases indicate that the ANN model is using this feature frequently and high correlation agrees that this is important. Investigating the feature distribution, it appears that customers with lower tenure (bin 1) are more likely to leave. &lt;strong&gt;Opportunity: Target customers with less than 12 month tenure.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blogs.rstudio.com/tensorflow/posts/2018-01-11-keras-customer-churn/images/figure-html/unnamed-chunk-45-1.png&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;contract-highly-correlated&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Contract (Highly Correlated)&lt;/h4&gt;
&lt;p&gt;While LIME did not indicate this as a primary feature in the first 10 cases, the feature is clearly correlated with those electing to stay. Customers with one and two year contracts are much less likely to churn. &lt;strong&gt;Opportunity: Offer promotion to switch to long term contracts.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blogs.rstudio.com/tensorflow/posts/2018-01-11-keras-customer-churn/images/figure-html/unnamed-chunk-46-1.png&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;internet-service-highly-correlated&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Internet Service (Highly Correlated)&lt;/h4&gt;
&lt;p&gt;While LIME did not indicate this as a primary feature in the first 10 cases, the feature is clearly correlated with those electing to stay. Customers with fiber optic service are more likely to churn while those with no internet service are less likely to churn. &lt;strong&gt;Improvement Area: Customers may be dissatisfied with fiber optic service.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blogs.rstudio.com/tensorflow/posts/2018-01-11-keras-customer-churn/images/figure-html/unnamed-chunk-47-1.png&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;payment-method-highly-correlated&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Payment Method (Highly Correlated)&lt;/h4&gt;
&lt;p&gt;While LIME did not indicate this as a primary feature in the first 10 cases, the feature is clearly correlated with those electing to stay. Customers with electronic check are more likely to leave. &lt;strong&gt;Opportunity: Offer customers a promotion to switch to automatic payments&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blogs.rstudio.com/tensorflow/posts/2018-01-11-keras-customer-churn/images/figure-html/unnamed-chunk-48-1.png&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;senior-citizen-510-lime-cases&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Senior Citizen (5/10 LIME Cases)&lt;/h4&gt;
&lt;p&gt;Senior citizen appeared in several of the LIME cases indicating it was important to the ANN for the 10 samples. However, it was not highly correlated to Churn, which may indicate that the ANN is using in an more sophisticated manner (e.g.¬†as an interaction). It‚Äôs difficult to say that senior citizens are more likely to leave, but non-senior citizens appear less at risk of churning. &lt;strong&gt;Opportunity: Target users in the lower age demographic.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blogs.rstudio.com/tensorflow/posts/2018-01-11-keras-customer-churn/images/figure-html/unnamed-chunk-49-1.png&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;online-security-410-lime-cases&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Online Security (4/10 LIME Cases)&lt;/h4&gt;
&lt;p&gt;Customers that did not sign up for online security were more likely to leave while customers with no internet service or online security were less likely to leave. &lt;strong&gt;Opportunity: Promote online security and other packages that increase retention rates.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blogs.rstudio.com/tensorflow/posts/2018-01-11-keras-customer-churn/images/figure-html/unnamed-chunk-50-1.png&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;next-steps-business-science-universitydomain-knowledge&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;üìå Next Steps: Business Science University(Domain knowledge)&lt;/h2&gt;
&lt;p&gt;We‚Äôve just scratched the surface with the solution to this problem, but unfortunately there‚Äôs only so much ground we can cover in an article. Here are a few next steps that I‚Äôm pleased to announce will be covered in a &lt;a href=&#34;https://university.business-science.io/&#34;&gt;&lt;strong&gt;Business Science University&lt;/strong&gt;&lt;/a&gt; course coming in 2018!&lt;/p&gt;
&lt;div id=&#34;customer-lifetime-value&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Customer Lifetime Value&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Your organization needs to see the financial benefit so always tie your analysis to sales, profitability or ROI.&lt;/strong&gt; &lt;a href=&#34;https://en.wikipedia.org/wiki/Customer_lifetime_value&#34;&gt;Customer Lifetime Value (&lt;em&gt;CLV&lt;/em&gt;)&lt;/a&gt; is a methodology that ties the business profitability to the retention rate. While we did not implement the CLV methodology herein, a full customer churn analysis would tie the churn to an classification cutoff (threshold) optimization to maximize the CLV with the predictive ANN model.&lt;/p&gt;
&lt;p&gt;The simplified CLV model is:&lt;/p&gt;
&lt;p&gt;CLV=GC‚àó11+d‚àírCLV=GC‚àó11+d‚àír&lt;/p&gt;
&lt;p&gt;Where,&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;GC&lt;/em&gt; is the gross contribution per customer&lt;/li&gt;
&lt;li&gt;&lt;em&gt;d&lt;/em&gt; is the annual discount rate&lt;/li&gt;
&lt;li&gt;&lt;em&gt;r&lt;/em&gt; is the retention rate&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;ann-performance-evaluation-and-improvement&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;ANN Performance Evaluation and Improvement&lt;/h3&gt;
&lt;p&gt;The ANN model we built is good, but it could be better. How we understand our model accuracy and improve on it is through the combination of two techniques:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;K-Fold Cross-Fold Validation&lt;/strong&gt;: Used to obtain bounds for accuracy estimates.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hyper Parameter Tuning&lt;/strong&gt;: Used to improve model performance by searching for the best parameters possible.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We need to implement &lt;em&gt;K-Fold Cross Validation&lt;/em&gt; and &lt;em&gt;Hyper Parameter Tuning&lt;/em&gt; if we want a best-in-class model.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;distributing-analytics&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Distributing Analytics&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;It‚Äôs critical to communicate data science insights to decision makers in the organization&lt;/strong&gt;. Most decision makers in organizations are not data scientists, but these individuals make important decisions on a day-to-day basis. The Shiny application below includes a &lt;strong&gt;Customer Scorecard&lt;/strong&gt; to monitor customer health (risk of churn).&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://jjallaire.shinyapps.io/keras-customer-churn/&#34;&gt;&lt;img src=&#34;https://blogs.rstudio.com/tensorflow/posts/2018-01-11-keras-customer-churn/images/shiny-application.png&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;business-science-university&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Business Science University&lt;/h3&gt;
&lt;p&gt;You‚Äôre probably wondering why we are going into so much detail on next steps. We are happy to announce a new project for 2018: &lt;a href=&#34;https://university.business-science.io/&#34;&gt;&lt;strong&gt;Business Science University&lt;/strong&gt;&lt;/a&gt;, an online school dedicated to helping data science learners.&lt;/p&gt;
&lt;p&gt;Benefits to learners:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Build your own &lt;strong&gt;online GitHub portfolio&lt;/strong&gt; of data science projects to market your skills to future employers!&lt;/li&gt;
&lt;li&gt;Learn &lt;strong&gt;real-world applications&lt;/strong&gt; in People Analytics (HR), Customer Analytics, Marketing Analytics, Social Media Analytics, Text Mining and Natural Language Processing (NLP), Financial and Time Series Analytics, and more!&lt;/li&gt;
&lt;li&gt;Use &lt;strong&gt;advanced machine learning techniques&lt;/strong&gt; for both high accuracy modeling and explaining features that have an effect on the outcome!&lt;/li&gt;
&lt;li&gt;Create &lt;strong&gt;ML-powered web-applications&lt;/strong&gt; that can be distributed throughout an organization, enabling non-data scientists to benefit from algorithms in a user-friendly way!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Enrollment is open&lt;/strong&gt; so please signup for special perks. Just go to &lt;a href=&#34;https://university.business-science.io/&#34;&gt;&lt;strong&gt;Business Science University&lt;/strong&gt;&lt;/a&gt; and select enroll.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;conclusions&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Customer churn is a costly problem&lt;/strong&gt;. The good news is that &lt;strong&gt;machine learning can solve churn problems&lt;/strong&gt;, making the organization more profitable in the process. In this article, we saw how &lt;strong&gt;Deep Learning can be used to predict customer churn&lt;/strong&gt;. We built an ANN model using the new &lt;a href=&#34;https://tensorflow.rstudio.com/keras/&#34;&gt;keras&lt;/a&gt; package that achieved &lt;strong&gt;82% predictive accuracy&lt;/strong&gt; (without tuning)! We used three new machine learning packages to help with preprocessing and measuring performance: &lt;a href=&#34;https://topepo.github.io/recipes&#34;&gt;recipes&lt;/a&gt;, &lt;a href=&#34;https://topepo.github.io/rsample/&#34;&gt;rsample&lt;/a&gt; and &lt;a href=&#34;https://github.com/topepo/yardstick&#34;&gt;yardstick&lt;/a&gt;. Finally we used &lt;a href=&#34;https://github.com/thomasp85/lime&#34;&gt;lime&lt;/a&gt; to explain the Deep Learning model, which &lt;strong&gt;traditionally was impossible&lt;/strong&gt;! We checked the LIME results with a &lt;strong&gt;Correlation Analysis&lt;/strong&gt;, which brought to light other features to investigate. For the IBM Telco dataset, tenure, contract type, internet service type, payment menthod, senior citizen status, and online security status were useful in diagnosing customer churn. We hope you enjoyed this article!&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;links&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Links&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://blogs.rstudio.com/tensorflow/posts/2018-01-11-keras-customer-churn/&#34;&gt;RStudio AI Blog: Deep Learning With Keras To Predict Customer Churn&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/bennwei/Machine_Learning_projects/blob/6d3814a596bc2f9dee09fffbf45a8e052dcefc09/Churn_analysis_R/churn_analysis.Rmd&#34;&gt;Machine_Learning_projects/churn_analysis.Rmd at 6d3814a596bc2f9dee09fffbf45a8e052dcefc09 ¬∑ bennwei/Machine_Learning_projects&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;error&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Error&lt;/h2&gt;
&lt;p&gt;‚ÄúError in &lt;code&gt;dimnames&amp;lt;-.data.frame&lt;/code&gt;(&lt;code&gt;*tmp*&lt;/code&gt;, value = list(n)) : invalid ‚Äòdimnames‚Äô given for data frame‚Äù&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/thomasp85/lime/issues/139&#34;&gt;keras explanations with dataframe data ¬∑ Issue #139 ¬∑ thomasp85/lime&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I had the same error, and I managed to solve it by overwriting the correct output of class(model). It seems the newer version uses different name. So, it is fixed for by:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;class(model_keras)
# [1] &amp;quot;keras.engine.sequential.Sequential&amp;quot;
# [2] &amp;quot;keras.engine.training.Model&amp;quot;       
# [3] &amp;quot;keras.engine.network.Network&amp;quot;      
# [4] &amp;quot;keras.engine.base_layer.Layer&amp;quot;     
# [5] &amp;quot;python.builtin.object&amp;quot;    &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then use &lt;code&gt;keras.engine.sequential.Sequential&lt;/code&gt; instead of &lt;code&gt;keras.models.Sequential&lt;/code&gt;, i.e.:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# gives error
model_type.keras.models.Sequential &amp;lt;- function(x, ...) {
  &amp;quot;classification&amp;quot;
}

# works!
model_type.keras.engine.sequential.Sequential &amp;lt;- function(x, ...) {
  &amp;quot;classification&amp;quot;
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The same for &lt;code&gt;predict_model()&lt;/code&gt;, use &lt;code&gt;keras.engine.sequential.Sequential&lt;/code&gt;, or what is the output of &lt;code&gt;class(model)&lt;/code&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Integrating Tableau with R for Descriptive, Inferential and Predictive analytics</title>
      <link>/post/integrating-tableau-with-r-for-descriptive-inferential-and-predictive-analytics/</link>
      <pubDate>Sat, 18 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/integrating-tableau-with-r-for-descriptive-inferential-and-predictive-analytics/</guid>
      <description>


&lt;div id=&#34;host-your-html-file&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;host your html file&lt;/h2&gt;
&lt;p&gt;You would need to &lt;strong&gt;host your HTML on a publicly accessible website somewhere&lt;/strong&gt;, then use a webpage part object on your dashboard to embed that page.&lt;/p&gt;
&lt;p&gt;Skip that though, generate a clock to embed here -¬†&lt;a href=&#34;https://community.tableau.com/external-link.jspa?url=https%3A%2F%2Fwww.timeanddate.com%2Fclocks%2Ffree.html&#34;&gt;Free Clocks for Your Website&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;use-flexdashboard&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;use flexdashboard&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://rmarkdown.rstudio.com/flexdashboard/examples.html&#34;&gt;flexdashboard Examples&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;links&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;links&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://community.tableau.com/thread/241667&#34;&gt;Embed HTML Local in Tableau ( Import JS to Tabl‚Ä¶ |Tableau Community Forums&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=ZBROGk0AP8Y&amp;amp;feature=emb_logo&#34;&gt;(28) Integrating Tableau with R for Descriptive, Inferential and Predictive analytics - YouTube&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>R square and Q square , what the difference</title>
      <link>/post/r-square-and-q-square-what-the-difference/</link>
      <pubDate>Sat, 18 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/r-square-and-q-square-what-the-difference/</guid>
      <description>


&lt;div id=&#34;r-square-Âíå-q-square&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;R square Âíå Q square&lt;/h2&gt;
&lt;p&gt;ÂÖ∂ÂÆû‰ªñ‰ª¨ÁöÑËÆ°ÁÆóÊñπÂºèÊòØ‰∏ÄÊ®°‰∏ÄÊ†∑ÁöÑ, Âè™ÊòØ‰∏Ä‰∏™ÊòØÂú®ËÆ≠ÁªÉÊï∞ÊçÆÈõÜ‰∏äÁÆóÁöÑÁªìÊûú, ‰∏Ä‰∏™ÊòØÂú®ÊµãËØïÈõÜ‰∏äÁöÑËÆ°ÁÆóÁªìÊûú.&lt;/p&gt;
&lt;p&gt;R2 Âíå Q2 Áõ∏Â∑ÆÂ§™Â§öÁöÑËØùÂàôËØ¥ÊòéÂõûÂΩíÁöÑÊ®°ÂûãÊúâËøáÊãüÂêà&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
\begin{array}{l}R^{2}=1-R S S / T S S \\ R S S=\sum(y-\hat{\mathbf{y}})^{2} \\ T S S=\sum(y-\overline{\mathbf{y}})^{2}\end{array}
\]&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Q2 is the R2 when the PLS built on a training set is applied to a test set. So a good value for Q2 is a value that is close to the R2. That means that your PLS model works independently of the specific data that was used to train the PLS model. Adding more variables always makes R2 go up, but might not make Q2 go up.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;As I have seen that the ‚ÄúDifference between R2 and Q2 should not be more than 0.3‚Äù [International Journal of Drug Design and Discovery, 2011, 2 (3) 511-519].&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Recipes for machine learning</title>
      <link>/post/recipes/</link>
      <pubDate>Sat, 18 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/recipes/</guid>
      <description>


&lt;div id=&#34;select-variable&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;select variable&lt;/h2&gt;
&lt;p&gt;When recipe steps are used, there are different approaches that can be used to select which variables or features should be used.&lt;/p&gt;
&lt;p&gt;The three main characteristics of variables that can be queried:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the name of the variable: the syntax as the same as dplyr&lt;/li&gt;
&lt;li&gt;the data type (e.g.¬†numeric or nominal): nominal is character or factor&lt;/li&gt;
&lt;li&gt;the role that was declared by the recipe: can define by user self &lt;code&gt;add_role&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;basic-recipes-ordering-of-steps&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;basic recipes ordering of steps&lt;/h2&gt;
&lt;p&gt;While your project‚Äôs needs may vary, here is a suggested order of &lt;em&gt;potential&lt;/em&gt; steps that should work for most problems:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Impute&lt;/li&gt;
&lt;li&gt;Individual transformations for skewness and other issues&lt;/li&gt;
&lt;li&gt;Discretize (if needed and if you have no other choice)&lt;/li&gt;
&lt;li&gt;Create dummy variables&lt;/li&gt;
&lt;li&gt;Create interactions&lt;/li&gt;
&lt;li&gt;Normalization steps (center, scale, range, etc)&lt;/li&gt;
&lt;li&gt;Multivariate transformation (e.g.¬†PCA, spatial sign, etc)&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div id=&#34;step_-function-custom-define&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;step_* function custom define&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;You can define yourself step_function&lt;/li&gt;
&lt;li&gt;Be clear about the specific definition of each step_function&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;links&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;links&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/tidymodels/recipes&#34;&gt;tidymodels/recipes: A preprocessing engine to generate design matrices&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Principle of least resistance</title>
      <link>/post/principle-of-least-resistance/</link>
      <pubDate>Thu, 16 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/principle-of-least-resistance/</guid>
      <description>


&lt;blockquote&gt;
&lt;p&gt;Âú®Áº∫‰πèÂ∫¶ÈáèÊàñÂèäÊó∂ÂèçÈ¶àÁöÑÁéØÂ¢É‰∏ã, Â§ßÂ§öÊï∞‰∫∫ÈÉΩ‰ºöÈÄâÊã©ÊúÄÁÆÄÂçïÁöÑË°å‰∏∫Âíå‰∫ãÊÉÖÊù•ÂÅö„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div id=&#34;‰ªÄ‰πàÊòØÊúÄÂ∞èÈòªÂäõÂéüÂàô&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;‰ªÄ‰πàÊòØÊúÄÂ∞èÈòªÂäõÂéüÂàô&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ÊúÄÂ∞èÈòªÂäõÂéüÂàô: ÊòØÊåáÂú®Â∑•‰ΩúÁéØÂ¢É‰∏ã, Ëã•ÂêÑÁßçË°å‰∏∫ÂØπ‰∫éÂ∫ïÁ∫øÁöÑÂΩ±Âìç&lt;font color=&#34;darkred&#34;&gt; &lt;strong&gt;Ê≤°ÊúâÂæóÂà∞ÊòéÁ°ÆÁöÑÂèçÈ¶àÊÑèËßÅ&lt;/strong&gt;&lt;/font&gt; , ÈÇ£Êàë‰ª¨ÂàôÂÄæÂêë‰∫éÈááÁî®ÂΩì‰∏ãÊúÄÁÆÄÂçïÊòìË°åÁöÑË°å‰∏∫„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;‰øùÊåÅËÅîÁªìÁä∂ÊÄÅÁúüÁöÑÊúâÂä©‰∫éÂ∑•‰Ωú&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;‰øùÊåÅËÅîÁªìÁä∂ÊÄÅÁúüÁöÑÊúâÂä©‰∫éÂ∑•‰Ωú?&lt;/h2&gt;
&lt;p&gt;Á≠îÊ°àÊòØÂê¶ÂÆöÁöÑ.&lt;/p&gt;
&lt;p&gt;‰∏∫‰∫ÜÈ™åËØÅËøô‰∏™ÊÉ≥Ê≥ï, Ê≥¢Â£´È°øÂí®ËØ¢ÈõÜÂõ¢ÈááÁî®‰∫Ü‰∏Ä‰∫õÊûÅÁ´ØÊâãÊÆµ, ‰ªñËø´‰ΩøÂõ¢Èòü‰∏≠ÊØè‰∏ÄÂêçÊàêÂëòÂú®Â∑•‰ΩúÊó•‰∏≠ÈÄâÊã©‰∏ÄÂ§©‰∏ç‰∏äÁè≠, ‰πüÂ∞±ÊòØËØ¥ÂíåÂÖ¨Âè∏ÂÜÖÂ§ñÁöÑ‰ªª‰Ωï‰∫∫ÈÉΩÊñ≠ÂºÄËÅîÁ≥ª.&lt;/p&gt;
&lt;p&gt;ÊúÄÂàùËøô‰∏™Âõ¢ÈòüÊúâ‰∫õÊäµÂà∂ËøôÈ°πÂÆûÈ™å, ÊçÆ‰ªñÂõûÂøÜ, ÂÖ∂‰∏≠‰∏Ä‰∫õÂ∞ùËØïË¥üË¥£ÁöÑÂêà‰ºô‰∫∫‰∏ÄÁõ¥ÂØπÊàë‰ª¨ÁöÑÂü∫Êú¨ËßÇÁÇπÂæàÊîØÊåÅ, ‰ΩÜÊòØËøôÊó∂‰πüÁ™ÅÁÑ∂Êúâ‰∫õÁ¥ßÂº†, ÂÆ≥ÊÄïÂëäËØâÂÆ¢Êà∑, ‰ªñÂõ¢Èòü‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÊàêÂëòÊØèÂë®ÈÉΩÊúâ‰∏ÄÂ§©‰∏çÂ∑•‰Ωú, ÈÇ£‰∫õÂí®ËØ¢Âëò‰πüÂêåÊ†∑ÂæàÁ¥ßÂº†ÊãÖÂøß‰ªñ‰ª¨ËøôÊ†∑‰ºöÁΩÆ‰∫ã‰∏ö‰∫éÂç±Êú∫, ‰ΩÜÊòØËøô‰∏™Âõ¢ÈòüÂπ∂Ê≤°ÊúâÂ§±ÂéªÂÆ¢Êà∑, Âõ¢ÈòüÊàêÂëò‰πüÊ≤°Êúâ‰∏¢ÊéâÂ∑•‰Ωú, Áõ∏ÂèçËøô‰∫õÂí®ËØ¢ÂëòÂú®Â∑•‰Ωú‰∏≠ÊâæÂà∞‰∫ÜÊõ¥Â§öÁöÑ‰πêË∂£, ÂÜÖÈÉ®ÁöÑÊ≤üÈÄö‰πüÊõ¥È°∫ÁïÖ, ‰πüÂ≠¶Âà∞‰∫ÜÊõ¥Â§öÁöÑ‰∏úË•ø„ÄÇÊàñËÆ∏ÊúÄÈáçË¶ÅÁöÑÊòØ‰∏∫ÂÆ¢Êà∑Êèê‰æõÊõ¥Â•ΩÁöÑ‰∫ßÂìÅ„ÄÇ&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;‰∏∫‰ªÄ‰πàËÅîÁªìÊñáÂåñÁªè‰πÖ‰∏çË°∞&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;‰∏∫‰ªÄ‰πàËÅîÁªìÊñáÂåñÁªè‰πÖ‰∏çË°∞?&lt;/h2&gt;
&lt;p&gt;‰∏Ä‰∏™ÊúâË∂£ÁöÑÈóÆÈ¢ò: ‰∏∫‰ªÄ‰πàÊúâÈÇ£‰πàÂ§öÁöÑÂÖ¨Âè∏ÂÉèÊ≥¢Â£´È°øÂí®ËØ¢ÈõÜÂõ¢‰∏ÄÊ†∑ÂüπËÇ≤‰∏ÄÁßçËøûÊé•ÁöÑÊñáÂåñ, Â∞ΩÁÆ°Âú®‰ªñÁöÑÁ†îÁ©∂‰∏≠ÂèëÁé∞, Ê≠§‰∏æ‰ºöÊçüÂÆ≥ÂëòÂ∑•ÁöÑÂπ∏Á¶èÊÑüÂíåÁîü‰∫ßÊïàÁéá, ‰∏îÂæàÂèØËÉΩÊó†Âä©‰∫éÊèêÈ´òÂ∫ï.&lt;/p&gt;
&lt;p&gt;&lt;font color=&#34;darkred&#34;&gt; &lt;strong&gt;Á≠îÊ°àÊòØËøôÊ†∑Êõ¥ÁÆÄÂçï&lt;/strong&gt;&lt;/font&gt; , ÂéüÂõ†Êúâ‰∫å:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ÂéüÂõ†‰∏Ä,ÂÖ≥‰πé‰∫éÂØπ‰∏™‰∫∫ÈúÄÊ±ÇÁöÑÂìçÂ∫î, Â¶ÇÊûú‰Ω†ÊâÄÂ§ÑÁöÑÂ∑•‰ΩúÁéØÂ¢É‰∏ãÊèêÂá∫ÈóÆÈ¢òËÉΩÂ§üÁ´ãÂàªÂæóÂà∞Á≠îÊ°à, ÈúÄË¶ÅÊüê‰∏ÄÁâπÂÆö‰ø°ÊÅØËÉΩÂ§üÁ´ãÂàªÂæóÂà∞(Âç≥Êó∂Êª°Ë∂≥), ÈÇ£‰πà‰Ω†ÁöÑÁîüÊ¥ªÂ∞±‰ºöÂèòÂæóÊõ¥ÁÆÄÂçï, Ëá≥Â∞ëÂú®ÂΩìÊó∂ÊòØËøôÊ†∑ÁöÑ, Â¶ÇÊûúÊó†Ê≥ïÂæóÂà∞ËøôÊ†∑ËøÖÈÄüÁöÑÂìçÂ∫î, ‰Ω†Â∞±ÈúÄË¶ÅÂÅöÊõ¥Â§öÁöÑÈ¢ÑÂÖàÂ∑•‰ΩúÂíåËÆ°Âàí, ÈúÄË¶ÅÊ†πÊçÆÊù°ÁêÜÊÄß, ÂêåÊó∂ËøòË¶ÅÊó∂ÂàªÂáÜÂ§áÊöÇÊó∂ÊêÅÁΩÆÂ∑•‰Ωú, Â∞ÜÊ≥®ÊÑèÂäõËΩ¨ÁßªÂà∞Âà´Â§Ñ, Á≠âÂæÖÊâÄÊúâË¶ÅÊ±ÇËææÊàê(Âª∂Êó∂Êª°Ë∂≥), ÊâÄÊúâÁöÑËøô‰∫õÈÉΩÂ∞Ü‰Ωø‰Ω†ÁöÑÊó•Â∏∏Â∑•‰ΩúÁîüÊ¥ªÊõ¥Âä†Ëâ∞Èöæ, Â∞ΩÁÆ°‰ªéÈïøÊúüÊù•ËÆ≤ËøôÊ†∑ÂÅöÊõ¥ËÉΩ‰ª§‰∫∫Êª°ÊÑè, ‰ΩÜÊòØÊàë‰ª¨‰∏çÊÉ≥Ëøô‰πàÂ§çÊùÇ„ÄÇ&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ÂéüÂõ†‰∫å, Âú®‰∫éÂÆÉÂèØ‰ª•ÂàõÈÄ†Âá∫‰∏ÄÁßçÁéØÂ¢É, Âú®ËøôÁßçÁéØÂ¢É‰∏ãÂà©Áî®Êî∂‰ª∂ÁÆ±ÁÆ°ÁêÜ‰∏ÄÂ§©ÁöÑÂ∑•‰ΩúÊòØÂèØ‰ª•Ë¢´Êé•ÂèóÁöÑ, Ê¨£ÁÑ∂ÂõûÂ§çÊúÄÊñ∞ÁöÑÈÇÆ‰ª∂, ÂÖ∂‰ªñÁöÑÂàôÂ†ÜÁßØÂú®ÈÇ£Èáå, ÂêåÊó∂ËøòÊÑüËßâËá™Â∑±ÁöÑÊïàÁéá‰ª§‰∫∫Êª°ÊÑè, Â¶ÇÊûúÂ∞ÜÁîµÂ≠êÈÇÆ‰ª∂ËΩ¨Áßª‰∏∫ËæπËøúÂ∑•‰Ωú, ‰Ω†Â∞±ÈúÄË¶ÅÈááÁî®‰∏ÄÁßçÊõ¥Ê∑±ÊÄùÁÜüËôëÁöÑÊñπÂºè, ÁêÜÊ∏Ö‰∏ã‰∏ÄÊ≠•ÁöÑÂ∑•‰ΩúÂÜÖÂÆπ‰ª•ÂèäÂ∑•‰ΩúÊó∂Èïø, ËøôÁßçËÆ°ÂàíÊòØÂæàÂõ∞ÈöæÁöÑ„ÄÇ&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;‰æã‰ºöÁöÑÂõ∞Â¢É&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;‰æã‰ºöÁöÑÂõ∞Â¢É&lt;/h2&gt;
&lt;p&gt;È°πÁõÆ‰∏äÈ¢ëÁπÅÂè¨ÂºÄÁöÑ‰æã‰ºö, Ëøô‰∫õ‰ºöËÆÆÂæÄÂæÄ‰Ωø‰Ω†Êó†Ê≥ïÊåÅÁª≠‰∏ìÊ≥®, ÂØºËá¥Êó•Á®ãÊó†Ê≥ïÂèäÊó∂ÂÆåÊàê, ÂèòÂæóÊîØÁ¶ªÁ†¥Á¢é, ‰∏∫‰ªÄ‰πàËøòË¶ÅÂùöÊåÅÂë¢Ôºü&lt;/p&gt;
&lt;p&gt;Âõ†‰∏∫Êõ¥ÁÆÄÂçï, ÂØπ‰∫éÂæàÂ§ö‰∫∫ËÄåË®Ä, Ëøô‰∫õ‰æã‰ºöÊòØ‰∏ÄÁßçÁÆÄÂçïÁöÑ(‰ΩÜÂêåÊó∂‰πüÊòØÁ¨®ÊãôÁöÑ‰∫∫ÂëòÁÆ°ÁêÜÂΩ¢Âºè), ‰ªñ‰ª¨‰∏çÊÑøÊÑèËá™Â∑±ÂéªÁÆ°ÁêÜÊó∂Èó¥ÂíåÂ∑•‰Ωú‰ªªÂä°, ËÄåÊòØËÆ©ÊØèÂë®Ëø´ËøëÁöÑ‰æã‰ºöËø´‰Ωø‰ªñ‰ª¨Âú®ÁªôÂÆöÈ°πÁõÆ‰∏äÈááÂèñ‰∏Ä‰∫õË°åÂä®ÊàñËÄÖÊèê‰æõ&lt;font color=&#34;darkred&#34;&gt; &lt;strong&gt;‰∏ÄÁßçÂèñÂæóËøõÂ±ïÁöÑÂèØËßÜÂåñÂπªË±°&lt;/strong&gt;&lt;/font&gt; „ÄÇ&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;Ë¥üÈù¢ÂΩ±Âìç&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Ë¥üÈù¢ÂΩ±Âìç&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ÊúÄÂ∞èÈòªÂäõÂéüÂàôÂèóÂà∞Â∫¶ÈáèÈªëÊ¥ûÁöÑ‰øùÊä§, ÂæàÂ∞ëÊúâ‰∫∫ÂØπÂÖ∂Âä†‰ª•ÂÆ°ËßÜ, Âú®ËøôÁßçÂéüÂàôÊîØÈÖç‰∏ãÁöÑÂ∑•‰ΩúÊñáÂåñÂÖçÂéª‰∫ÜÊàë‰ª¨Áü≠ÊúüÂÜÖ‰øùÊåÅ‰∏ìÊ≥®Âêà‰ΩúËÆ°ÂàíÁöÑÂøßËôë, Âç¥Áâ∫Áâ≤‰∫ÜÈïøÊúüÁöÑÊª°Ë∂≥ÊÑüÂíåÁúüÂÆû‰ª∑ÂÄºÁöÑ‰∫ßÂá∫, ËøôÊ†∑‰∏ÄÊù•ÊúÄÂ∞è‰∏ªÂäõÂéüÂàôÂ∞±È©±‰ΩøÊàë‰ª¨Âú®Ê∑±Â∫¶Â∑•‰ΩúÊÑàÂèëÂèóÂà∞ÈùíÁùêÁöÑÁªèÊµéÂΩ¢Âäø‰∏ãÊµÅ‰∫éÊµÆÊµÖÂ∑•‰Ωú„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;Ëß£ÂÜ≥ÂäûÊ≥ï&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Ëß£ÂÜ≥ÂäûÊ≥ï&lt;/h2&gt;
&lt;p&gt;ÈÄâÊã©‰∏Ä‰ª∂ÂØπ‰Ω†ÂæàÈáçË¶ÅÁöÑ‰∫ãÊÉÖ(ËøôÁßç‰∫ãÊÉÖ‰∏ÄËà¨ÊòØÂæàÈöæÂ∫¶ÈáèÊàêÂäüÂíåÂç≥Êó∂ÂèçÈ¶àÁöÑ), ËÆæÂÆö‰∏Ä‰∫õÂ∞èÁöÑËôöÊãüÂèçÈ¶à, ÊØîÂ¶Ç, ËÉå‰∫ÜÂ§öÂ∞ëÂçïËØç, ÂØÑ‰∫ÜÂ§öÂ∞ëÂàÜ, Âà©Áî®ÊâìÊ∏∏Êàè‰∏äÁòæÁöÑ‰∏Ä‰∫õÂéüÁêÜÊù•‰øÉËøõ‰Ω†Âú®Ëøô‰∫õ‰∫ãÊÉÖ‰∏äÂèñÂæóÊé®Ëøõ.&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>‰∏çË¶ÅÁî®ÁΩëÁªúÊù•Ê∂àÈÅ£, Áî®‰ªÄ‰πàÊù•Ê∂àÈÅ£?</title>
      <link>/post/don-t-use-the-internet-for-entertainment/</link>
      <pubDate>Wed, 15 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/don-t-use-the-internet-for-entertainment/</guid>
      <description>


&lt;blockquote&gt;
&lt;p&gt;ËÑëÂäõÊ¥ªÂä®ÈúÄË¶ÅÁöÑÊòØÂèòÂåñÂíåÂàáÊç¢, ‰∏ç‰ºöÊÑüÂà∞Áñ≤ÂÄ¶&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;‰Ωï‰∏∫ÁîüÊ¥ª? ËÄå‰∏ç‰ªÖ‰ªÖÊòØÁîüÂ≠ò&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div id=&#34;‰∏∫‰ªÄ‰πà‰∏çËÉΩÁî®ÁΩëÁªúÊù•Ê∂àÈÅ£&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;‰∏∫‰ªÄ‰πà‰∏çËÉΩÁî®ÁΩëÁªúÊù•Ê∂àÈÅ£?&lt;/h1&gt;
&lt;p&gt;Â¶Ç‰ΩïÂ∫¶Ëøá‰Ω†ÁöÑ‰∏ÄÂ§© 24 Â∞èÊó∂, How To Live On 24 Hours A Day?&lt;/p&gt;
&lt;p&gt;Â∞ΩÁÆ°‰∏çÂ§™ÂñúÊ¨¢Ëá™Â∑±ÁöÑËøô‰∏ÄÂ§©ÁöÑÁîüÊ¥ª, ‰ΩÜÊòØËøòÊòØÊää 8:30-17:30 ËøôÊÆµÊó∂Èó¥ÂΩìÂÅöÊòØËøô‰∏ÄÂ§©ÁöÑÁîüÊ¥ª, Ëøô‰πãÂâçÁöÑÂíå‰πãÂêéÁöÑÊó∂Èó¥ÊòØËøô‰∏ÄÂ§©ÁöÑÂâçÂ•èÂíåÂ∞æÂ£∞.&lt;/p&gt;
&lt;p&gt;Â∫îËØ•Ë¶ÅÂÉèË¥µÊóè‰∏ÄÊ†∑‰ΩøÁî®Ëá™Â∑±ÁöÑÊó∂Èó¥&lt;/p&gt;
&lt;p&gt;Â®±‰πêÊó∂Èó¥‰ªçÁÑ∂ÊòØÂ†ïËêΩÁöÑ, ‰∏ªË¶ÅÊòØËÉ°‰π±ÁÇπÂáª‰∏Ä‰∫õÊ≤°Êúâ‰ª∑ÂÄºÁöÑÊï∞Â≠óÂ®±‰πê‰ø°ÊÅØ&lt;/p&gt;
&lt;p&gt;‰Ω†Â∫îËØ•ËÉΩÂ§ü‰∏ªÂä®Âà©Áî®Ëá™Â∑±Â∑•‰ΩúÂ§ñÁöÑÊó∂Èó¥ÂíåÁ≤æÂäõ&lt;/p&gt;
&lt;p&gt;ÂáèÂ∞ëÁΩëÁªúÂ∑•ÂÖ∑ÂØπ‰Ω†Ê∑±Â∫¶Â∑•‰ΩúËÉΩÂäõÁöÑÂπ≤Êâ∞&lt;/p&gt;
&lt;div id=&#34;Â∞ΩÂèØËÉΩÂê∏Âºï‰Ω†Êó∂Èó¥ÂíåÊ≥®ÊÑèÂäõÁöÑÁΩëÁ´ô&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Â∞ΩÂèØËÉΩÂê∏Âºï‰Ω†Êó∂Èó¥ÂíåÊ≥®ÊÑèÂäõÁöÑÁΩëÁ´ô&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;facebook&lt;/li&gt;
&lt;li&gt;reddit&lt;/li&gt;
&lt;li&gt;wechat&lt;/li&gt;
&lt;li&gt;Twitter&lt;/li&gt;
&lt;li&gt;‰ºòÈÖ∑&lt;/li&gt;
&lt;li&gt;Áà±Â•áËâ∫&lt;/li&gt;
&lt;li&gt;ÂìîÂì©ÂìîÂì©&lt;/li&gt;
&lt;li&gt;ÊäñÈü≥&lt;/li&gt;
&lt;li&gt;Âø´Êâã&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ëøô‰∫õÁΩëÁ´ôÁöÑÂÖ±ÂêåÁÇπ: ‰ΩøÁî®Á≤æÂøÉÈõïÁê¢ÁöÑÊ†áÈ¢òÂíåÂÆπÊòìÁêÜËß£ÁöÑÂÜÖÂÆπ, ËæÖ‰ª•Êï∞Â≠¶ÁÆóÊ≥ïÊâìÁ£®, ÊúÄÂ§ßÈôêÂ∫¶ÁöÑÂê∏Âºï‰Ω†ÁöÑÁúºÁêÉ&lt;/p&gt;
&lt;p&gt;‰∏ÄÂë®ÁöÑÂ∑•‰ΩúÊó∂Èó¥ÁªìÊùü, Ëøô‰∫õÁΩëÁ´ôÂ∞±Êàê‰∫Ü‰Ω†ÁöÑ‰∏ªË¶ÅÂ®±‰πê.&lt;/p&gt;
&lt;p&gt;Ëøô‰∫õ‰∫ãÊÉÖÈÉΩÊòØÊçüÂÆ≥‰Ω†ÊäµÊäóÂàÜÂøÉ‰∫ãÁâ©ÁöÑËÉΩÂäõ, ‰Ωø‰Ω†Âú®ËØïÂõæÊ∑±Â∫¶Â∑•‰ΩúÁöÑÊó∂ÂÄôÊõ¥ÈöæÈõÜ‰∏≠Ê≥®ÊÑèÂäõ.&lt;/p&gt;
&lt;p&gt;Ëøô‰∫õ‰∫ãÊÉÖÊÄªÊòØÂîæÊâãÂèØÂæó, ËÆ©‰Ω†Âç≥Êó∂Êª°Ë∂≥.(‰πüËÆ∏Â¢ûÂä†Ëøô‰∫õ‰∫ãÊÉÖËé∑ÂæóÈöæÂ∫¶ÊòØ‰∏Ä‰∏™ÂäûÊ≥ï, ÊúÄÂ∞èÈòªÂäõ‰πãË∑Ø)&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;Áî®‰ªÄ‰πàÊù•Ê∂àÈÅ£&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Áî®‰ªÄ‰πàÊù•Ê∂àÈÅ£?&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;Âú®‰Ω†ÂÖ®ÈÉ®ÁöÑÊ∏ÖÈÜíÊó∂Èó¥ÈÉΩÁªôËá™Â∑±ÁöÑÂ§ßËÑëÊâæÂà∞ÊúâÊÑè‰πâÁöÑ‰∫ãÊÉÖÂéªÂÅöÔºåËÄå‰∏çÊòØÊîæ‰ªªËá™Â∑±Âú®Ëø∑Á≥äÁöÑÁä∂ÊÄÅ‰∏ãÊº´Êó†ÁõÆÁöÑÁöÑÊµèËßàÂá†‰∏™Â∞èÊó∂ÁöÑÁΩëÈ°µÔºåÈÇ£‰πàÂú®Ëøô‰∏ÄÂ§©ÁªìÊùüÁöÑÊó∂ÂÄôÔºå‰Ω†‰ºöËßâÂæóÊõ¥Âä†ÂÖÖÂÆûÔºåÁ¨¨2Â§©ÂºÄÂßã‰πüÊõ¥Âä†ËΩªÊùæ„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div id=&#34;Ê†∏ÂøÉÊÄùÊÉ≥&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Ê†∏ÂøÉÊÄùÊÉ≥&lt;/h2&gt;
&lt;p&gt;Âú®‰Ω†ÁöÑÂ®±‰πêÊó∂Èó¥ÂÅöÊõ¥Â§öÁöÑÊÄùËÄÉ, ‰∏ªÂä®ÊÄùËÄÉÊàëÂ∫îËØ•ÊÄé‰πàÂ∫¶ËøáËøô‰∏ÄÂ§©?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Ëøô‰∫õËá¥ÁòæÁöÑÁΩëÂùÄÂè™ÊúâÂú®ÁúüÁ©∫‰∏≠ÊâçËÉΩÁîüÂ≠ò: Â¶ÇÊûú‰Ω†Âú®Êüê‰∏ÄÊÆµÊó∂Èó¥Ê≤°ÊúâÁªôËá™Â∑±ÂÆâÊéí‰ªªÂä°, Ëøô‰∫õÁΩëÁ´ôÊÄªÊòØ‰∏ÄÁßçÊúâËØ±ÊÉëÁöÑÈÄâÊã©. Â¶ÇÊûú‰Ω†Âú®Ëá™Áî±Êó∂Èó¥ÊúâÈ´òË¥®ÈáèÁöÑ‰∫ãÊÉÖÂéªÂÅö, Ëøô‰∫õÁΩëÁ´ôÂØπ‰Ω†ÁöÑÊ≥®ÊÑèÂäõÁöÑÊéßÂà∂Â∞±‰ºöÂáèÂº±.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;Êìç‰Ωú&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Êìç‰Ωú&lt;/h2&gt;
&lt;p&gt;Âú®Âë®Êú´Âà∞Êù•‰πãÂâçÁ°ÆÂÆöË¶ÅÂÅöÁöÑ‰∫ãÊÉÖÊòØÂçÅÂàÜÈáçË¶ÅÁöÑ&lt;/p&gt;
&lt;p&gt;‰∏Ä‰∫õÂÆâÊéíÂ•ΩÁöÑÁà±Â•Ω‰∏∫Ëøô‰∫õÊó∂Èó¥Êèê‰æõ‰∫ÜÂÖÖÂàÜÁöÑÂÖªÊñô
‰∏∫‰∫ÜÁâπÂÆöÁöÑÁõÆÊ†áÂÆåÊàêÁâπÂÆöÁöÑÊ¥ªÂä®, ËøôÂ∞ÜÂ°´Êª°‰Ω†ÁöÑÊó∂Èó¥&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ÈòÖËØª&lt;/li&gt;
&lt;li&gt;ÈîªÁÇº&lt;/li&gt;
&lt;li&gt;Âî±Ê≠å&lt;/li&gt;
&lt;li&gt;Áà±Â•Ω&lt;/li&gt;
&lt;li&gt;Êñ∞ÁöÑÊäÄËÉΩ&lt;/li&gt;
&lt;li&gt;ÂíåËÄÅÂèãËßÅÈù¢&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;ÊÄªÁªì&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;ÊÄªÁªì&lt;/h1&gt;
&lt;p&gt;Â¶ÇÊûú‰Ω†ÊÉ≥ÊäµÂæ°Â®±‰πêÁΩëÁ´ôÂØπ‰Ω†Êó∂Èó¥ÂíåÁ≤æÂäõÁöÑËØ±ÊÉëÔºåÈÇ£‰πàÂ∞±ÁªôÂ§ßËÑëÊâæ‰∏Ä‰∫õÈ´òË¥®ÈáèÁöÑÊõø‰ª£Ê¥ªÂä®ÔºåËøôÊ†∑‰∏ç‰ªÖÂèØ‰ª•‰ΩøÊàë‰ª¨ÈÅøÂÖçÂàÜÂøÉÔºå‰øùÊåÅ‰∏ìÊ≥®ÁöÑËÉΩÂäõÔºåÂêåÊó∂ËøòÊúâÂèØËÉΩÂÆûÁé∞‰∏Ä‰∏™ÂÆè‰ºüÁõÆÊ†áÔºå‰ΩìÈ™åÂà∞&lt;font color=&#34;darkred&#34;&gt;‰Ωï‰∏∫ÁîüÊ¥ªËÄå‰∏ç‰ªÖ‰ªÖÊòØÁîüÂ≠ò&lt;/font&gt;„ÄÇ&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>ggplot2 Workshop</title>
      <link>/post/ggplot2-workshop/</link>
      <pubDate>Mon, 13 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/ggplot2-workshop/</guid>
      <description>


&lt;div id=&#34;introduction&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;introduction&lt;/h2&gt;
&lt;p&gt;This document contains all the code that is displayed during the workshop. The
document is an RMarkdown document which means that it can be compiled, along
with the code chunks thus executing and capturing the output of the code within
the document. To read more about RMarkdown see the website for the package, as
well as the &lt;a href=&#34;https://rmarkdown.rstudio.com/lesson-1.html&#34;&gt;Get Started&lt;/a&gt; guide.&lt;/p&gt;
&lt;div id=&#34;exercises&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Exercises&lt;/h3&gt;
&lt;p&gt;While it is encouraged to follow along in this document as the workshop
progresses and execute the code to see the result, an important part is also to
experiment and play, thus learning how the different settings affect the output.&lt;/p&gt;
&lt;p&gt;The document will contain code chunks with the code examples discussed during
the talk, but it will also contain chunks intended for completing small
exercises. These will use the examples as a starting point and ask you to modify
the code to achieve a given output. Completing these are optional, but highly
recommended, either during or after the workshop.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;dependencies&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Dependencies&lt;/h3&gt;
&lt;p&gt;This document comes with a list of required packages.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;datasets&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Datasets&lt;/h3&gt;
&lt;p&gt;We will use an assortment of datasets throughout the document. The purpose is
mostly to showcase different plots, and less on getting some divine insight into
the world. While not necessary we will call &lt;code&gt;data(&amp;lt;dataset&amp;gt;)&lt;/code&gt; before using a new
dataset to indicate the introduction of a new dataset.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;introduction-1&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;We will look at the basic ggplot2 use using the faithful dataset, giving
information on the eruption pattern of the Old Faithful geyser in Yellowstone
National Park.&lt;/p&gt;
&lt;p&gt;If an aesthetic is linked to data it is put into &lt;code&gt;aes()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Â¶ÇÊûúÊï∞ÊçÆÁöÑÈ¢úËâ≤ÊòØÊò†Â∞ÑÂà∞‰∏ÄÂàóÊï∞ÊçÆÂàôÊîæÂú® &lt;code&gt;aes()&lt;/code&gt; ÈáåÈù¢&lt;/p&gt;
&lt;p&gt;If you simple want to set it to a value, put it outside of &lt;code&gt;aes()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Some geoms only need a single mapping and will calculate the rest for you&lt;/p&gt;
&lt;p&gt;ÂçïÂèòÈáè mapping: histogram&lt;/p&gt;
&lt;p&gt;geoms are drawn in the order they are added. The point layer is thus drawn on
top of the density contours in the example below.&lt;/p&gt;
&lt;p&gt;Ëøô‰∏™ÊúâÁÇπÂÉè phoshop ‰∏≠ÁöÑÂõæÂ±ÇÊ¶ÇÂøµ, geometry ÊòØ‰∏ÄÂ±Ç‰∏ÄÂ±ÇÂæÄ‰∏äÂ†ÜÂè†ÁöÑ&lt;/p&gt;
&lt;div id=&#34;exercise&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Exercise&lt;/h4&gt;
&lt;p&gt;Modify the code below to make the points larger squares and slightly transparent.
See &lt;code&gt;?geom_point&lt;/code&gt; for more information on the point layer.&lt;/p&gt;
&lt;p&gt;Hint 1: transparency is controlled with &lt;code&gt;alpha&lt;/code&gt;, and shape with &lt;code&gt;shape&lt;/code&gt;
Hint 2: rememberthe difference between mapping and setting aesthetics&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Colour the two distributions in the histogram with different colours&lt;/p&gt;
&lt;p&gt;Hint 1: For polygons you can map two different colour-like aesthetics: &lt;code&gt;colour&lt;/code&gt;
(the colour of the stroke) and &lt;code&gt;fill&lt;/code&gt; (the fill colour)&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Colour the distributions in the histogram by whether &lt;code&gt;waiting&lt;/code&gt; is above or below
&lt;code&gt;60&lt;/code&gt;. What happens?&lt;/p&gt;
&lt;p&gt;Change the plot above by setting &lt;code&gt;position = &#39;dodge&#39;&lt;/code&gt; in &lt;code&gt;geom_histogram()&lt;/code&gt;
(while keeping the colouring by &lt;code&gt;waiting&lt;/code&gt;). What do &lt;code&gt;position&lt;/code&gt; control?&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Add a line that separates the two point distributions. See &lt;code&gt;?geom_abline&lt;/code&gt; for
how to draw straight lines from a slope and intercept.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;stat&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Stat&lt;/h3&gt;
&lt;p&gt;We will use the &lt;code&gt;mpg&lt;/code&gt; dataset giving information about fuel economy on different
car models.&lt;/p&gt;
&lt;p&gt;&lt;font color=&#34;darkred&#34;&gt; &lt;strong&gt;Every geom has a stat&lt;/strong&gt; &lt;/font&gt;. This is why new data (&lt;code&gt;count&lt;/code&gt;) can appear when using
&lt;code&gt;geom_bar()&lt;/code&gt;., the default &lt;code&gt;stat&lt;/code&gt; for &lt;code&gt;geom_bar&lt;/code&gt; is &lt;code&gt;count&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;The stat can be overwritten. If we have precomputed count we don‚Äôt want any
additional computations to perform and we use the &lt;code&gt;identity&lt;/code&gt; stat to leave the
data alone&lt;/p&gt;
&lt;p&gt;Most obvious geom+stat combinations have a dedicated geom constructor. The one
above is available directly as &lt;code&gt;geom_col()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Values calculated by the stat is available with the &lt;code&gt;after_stat()&lt;/code&gt; function
inside &lt;code&gt;aes()&lt;/code&gt;. You can do all sorts of computations inside that.&lt;/p&gt;
&lt;p&gt;Many stats provide multiple variations of the same calculation, and provides a
default (here, &lt;code&gt;density&lt;/code&gt;)&lt;/p&gt;
&lt;p&gt;While the others must be used with the &lt;code&gt;after_stat()&lt;/code&gt; function&lt;/p&gt;
&lt;div id=&#34;exercises-1&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Exercises&lt;/h4&gt;
&lt;p&gt;While most people use &lt;code&gt;geom_*()&lt;/code&gt; when adding layers, it is just as valid to add
a &lt;code&gt;stat_*()&lt;/code&gt; with an attached geom.&lt;/p&gt;
&lt;p&gt;Â§ßÂ§öÊï∞‰∫∫‰ΩøÁî® &lt;code&gt;geom&lt;/code&gt; Êó∂, ‰ΩøÁî®‰∫ÜÈªòËÆ§ÁöÑ &lt;code&gt;stat&lt;/code&gt; , Âè™ÊòØ‰∏çÁü•ÈÅìËÄåÂ∑≤&lt;/p&gt;
&lt;p&gt;Look at &lt;code&gt;geom_bar()&lt;/code&gt; and figure out which stat it uses as default. Then modify the code to use the stat directly instead
(i.e.¬†adding &lt;code&gt;stat_*()&lt;/code&gt; instead of &lt;code&gt;geom_bar()&lt;/code&gt;)&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Use &lt;code&gt;stat_summary()&lt;/code&gt; to add a red dot at the mean &lt;code&gt;hwy&lt;/code&gt; for each group&lt;/p&gt;
&lt;p&gt;stat_summary is like dplyr::summarise&lt;/p&gt;
&lt;p&gt;fun ‰ΩúÁî®‰∫é &lt;code&gt;aes&lt;/code&gt; ‰∏≠ÁöÑ y, x Á±ª‰ºº‰∫é &lt;code&gt;group_by&lt;/code&gt; ‰∏≠ÁöÑ factor variable.&lt;/p&gt;
&lt;p&gt;Hint: You will need to change the default geom of &lt;code&gt;stat_summary()&lt;/code&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;scales&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Scales&lt;/h3&gt;
&lt;p&gt;Scales define how the mapping you specify inside &lt;code&gt;aes()&lt;/code&gt; should happen. All
mappings have an associated scale even if not specified.&lt;/p&gt;
&lt;p&gt;take control by adding one explicitly. All scales follow the same naming
conventions.&lt;/p&gt;
&lt;p&gt;scale_mapping_* : scale_x, y, colour, fill etc.&lt;/p&gt;
&lt;p&gt;Positional mappings (x and y) also have associated scales.&lt;/p&gt;
&lt;div id=&#34;exercises-2&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Exercises&lt;/h4&gt;
&lt;p&gt;Use &lt;code&gt;RColorBrewer::display.brewer.all()&lt;/code&gt; to see all the different palettes from
Color Brewer and pick your favourite. Modify the code below to use it&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Modify the code below to create a bubble chart (scatterplot with size mapped to
a continuous variable) showing &lt;code&gt;cyl&lt;/code&gt; with size. Make sure that only the present
amount of cylinders (4, 5, 6, and 8) are present in the legend.&lt;/p&gt;
&lt;p&gt;Hint: The &lt;code&gt;breaks&lt;/code&gt; argument in the scale is used to control which values are
present in the legend.&lt;/p&gt;
&lt;p&gt;Explore the different types of size scales available in ggplot2. Is the default
the most appropriate here?&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Modify the code below so that colour is no longer mapped to the discrete &lt;code&gt;class&lt;/code&gt;
variable, but to the continuous &lt;code&gt;cty&lt;/code&gt; variable. What happens to the guide?&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;The type of guide can be controlled with the &lt;code&gt;guide&lt;/code&gt; argument in the scale, or
with the &lt;code&gt;guides()&lt;/code&gt; function. Continuous colours have a gradient colour bar by
default, but setting it to &lt;code&gt;legend&lt;/code&gt; will turn it back to the standard look. What
happens when multiple aesthetics are mapped to the same variable and uses the
guide type?&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;facets&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Facets&lt;/h3&gt;
&lt;p&gt;The facet defines how data is split among panels. The default facet
(&lt;code&gt;facet_null()&lt;/code&gt;) puts all the data in a single panel, while &lt;code&gt;facet_wrap()&lt;/code&gt; and
&lt;code&gt;facet_grid()&lt;/code&gt; allows you to specify different types of small multiples&lt;/p&gt;
&lt;div id=&#34;exercises-3&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Exercises&lt;/h4&gt;
&lt;p&gt;One of the great things about facets is that &lt;font color=&#34;darkred&#34;&gt; &lt;strong&gt;they share the axes between the different panels&lt;/strong&gt;.&lt;/font&gt; Sometimes this is undiserable though, and &lt;font color=&#34;darkred&#34;&gt; &lt;strong&gt;the behaviour can be changed with the &lt;code&gt;scales&lt;/code&gt; argument&lt;/strong&gt;&lt;/font&gt; .
Experiment with the different possible settings in the plot below:&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Usually the space occupied by each panel is equal. This can create problems when
different scales are used. Modify the code below so that the y scale differs
between the panels in the plot. What happens?&lt;/p&gt;
&lt;p&gt;Use the &lt;code&gt;space&lt;/code&gt; argument in &lt;code&gt;facet_grid()&lt;/code&gt; to change the plot above so each bar
has the same width again.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Facets can be based on multiple variables by adding them together. Try to
recreate the same panels present in the plot below by using &lt;code&gt;facet_wrap()&lt;/code&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;coordinates&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Coordinates&lt;/h3&gt;
&lt;p&gt;The coordinate system is the fabric you draw your layers on in the end. The
default `coord_cartesion provides the standard rectangular x-y coordinate
system. Changing the coordinate system can have dramatic effects&lt;/p&gt;
&lt;p&gt;You can zoom both on the scale‚Ä¶&lt;/p&gt;
&lt;p&gt;and in the coord. You usually want the latter as it avoids changing the plottet
data&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Setting limits on the coordinate system will zoom the plot (like you‚Äôre looking at it with a &lt;font color=&#34;darkred&#34;&gt; &lt;strong&gt;magnifying glass&lt;/strong&gt;&lt;/font&gt; ), and will not change the underlying data like setting limits on a scale will.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div id=&#34;exercises-4&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Exercises&lt;/h4&gt;
&lt;p&gt;In the same way as limits can be set in both the positional scale and the coord,
so can transformations, using &lt;code&gt;coord_trans()&lt;/code&gt;. Modify the code below to apply a
log transformation to the y axis; first using &lt;code&gt;scale_y_continuous()&lt;/code&gt;,
and then using &lt;code&gt;coord_trans()&lt;/code&gt;. Compare the results ‚Äî how do they differ?&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Coordinate systems are particularly important in cartography. While we will not
spend a lot of time with it in this workshop, spatial plotting is well supported
in ggplot2 with &lt;code&gt;geom_sf()&lt;/code&gt; and &lt;code&gt;coord_sf()&lt;/code&gt; (which interfaces with the sf
package). The code below produces a world map. Try changing the &lt;code&gt;crs&lt;/code&gt; argument
in &lt;code&gt;coord_sf()&lt;/code&gt; to be &lt;code&gt;&#39;+proj=robin&#39;&lt;/code&gt; (This means using the Robinson projection).&lt;/p&gt;
&lt;p&gt;Maps are a huge area in data visualisation and simply too big to cover in this
workshop. If you want to explore further I advice you to explore the
&lt;a href=&#34;https://www.r-spatial.org&#34;&gt;r-spatial wbsite&lt;/a&gt; as well as the website for the
&lt;a href=&#34;https://r-spatial.github.io/sf&#34;&gt;sf package&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;theme&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Theme&lt;/h3&gt;
&lt;p&gt;Theming defines the feel and look of your final visualisation and is something
you will normally defer to the final polishing of the plot. It is very easy to
change looks with a prebuild theme&lt;/p&gt;
&lt;p&gt;Further adjustments can be done in the end to get exactly the look you want&lt;/p&gt;
&lt;div id=&#34;exercises-5&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Exercises&lt;/h4&gt;
&lt;p&gt;Themes can be overwhelming, especially as you often try to optimise for beauty
while you learn. To remove the last part of the equation, the exercise is to
take the plot given below and make it as hideous as possible using the theme
function. Go absolutely crazy, but take note of the effect as you change
different settings.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;extensions&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;üìå Extensions&lt;/h2&gt;
&lt;p&gt;While ggplot2 comes with a lot of batteries included, the extension ecosystem
provides priceless additinal features&lt;/p&gt;
&lt;div id=&#34;plot-composition&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Plot composition&lt;/h3&gt;
&lt;p&gt;We start by creating 3 separate plots&lt;/p&gt;
&lt;p&gt;Combining them with patchwork is a breeze using the different operators&lt;/p&gt;
&lt;div id=&#34;excercises&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Excercises&lt;/h4&gt;
&lt;p&gt;Patchwork will assign the same amount of space to each plot by default, but this
can be controlled with the &lt;code&gt;widths&lt;/code&gt; and &lt;code&gt;heights&lt;/code&gt; argument in &lt;code&gt;plot_layout()&lt;/code&gt;.
This can take a numeric vector giving their relative sizes (e.g.¬†&lt;code&gt;c(2, 1)&lt;/code&gt; will
make the first plot twice as big as the second). Modify the code below so that
the middle plot takes up half of the total space:&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;The &lt;code&gt;&amp;amp;&lt;/code&gt; operator can be used with any type of ggplot2 object, not just themes.
Modify the code below so the two plots share the same y-axis (same limits)&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Patchwork contains many features for fine tuning the layout and annotation. Very
complex layouts can be obtained by providing a design specification to the
&lt;code&gt;design&lt;/code&gt; argument in &lt;code&gt;plot_layout()&lt;/code&gt;. The design can be defined as a textual
representation of the cells. Use the layout given below. How should the textual
representation be undertood.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;animation&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Animation&lt;/h3&gt;
&lt;p&gt;ggplot2 is usually focused on static plots, but gganimate extends the API and
grammar to describe animations. As such it feels like a very natural extension
of using ggplot2&lt;/p&gt;
&lt;p&gt;There are many different transitions that control how data is interpreted for
animation, as well as a range of other animation specific features&lt;/p&gt;
&lt;div id=&#34;exercises-6&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Exercises&lt;/h4&gt;
&lt;p&gt;The animation below will animate between points showing cars with different
cylinders.&lt;/p&gt;
&lt;p&gt;gganimate uses the &lt;code&gt;group&lt;/code&gt; aesthetic to match observations between states. By
default the group aesthetic is set to the same value, so observations are
matched by their position (first row of 4 cyl is matched to first row of 5 cyl
etc.). This is clearly wrong here (why?). Add a mapping to the &lt;code&gt;group&lt;/code&gt; aesthetic
to ensure that points do not move between the different states.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;In the presence of discrete aesthetic mappings (&lt;code&gt;colour&lt;/code&gt; below), the group is
deduced if not given. The default behaviour of objects that appear and disappear
during the animation is to simply pop in and out of existance. &lt;code&gt;enter_*()&lt;/code&gt; and
&lt;code&gt;exit_*()&lt;/code&gt; functions can be used to control this behaviour. Experiment with the
different enter and exit functions provided by gganimate below. What happens if
you add multiple enter or exit functions to the same animation?&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;In the animation below (as in all the other animations) the changes happens at
constant speed. How values change during an animation is called easing and can
be controlled using the &lt;code&gt;ease_aes()&lt;/code&gt; function. Read the documentation for
&lt;code&gt;ease_aes()&lt;/code&gt; and experiment with different easings in the animation.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;annotation&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Annotation&lt;/h3&gt;
&lt;p&gt;Text is a huge part of storytelling with your visualisation. Historically,
textual annotations has not been the best part of ggplot2 but new extensions
make up for that.&lt;/p&gt;
&lt;p&gt;Standard geom_text will often result in overlaping labels&lt;/p&gt;
&lt;p&gt;ggrepel takes care of that&lt;/p&gt;
&lt;p&gt;If you want to highlight certain parts of your data and describe it, the
&lt;code&gt;geom_mark_*()&lt;/code&gt; family of geoms have your back&lt;/p&gt;
&lt;div id=&#34;exercises-7&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Exercises&lt;/h4&gt;
&lt;p&gt;ggrepel has a tonne of settings for controlling how text labels move. Often,
though, the most effective is simply to not label everything. There are two
strategies for that: Either only use a subset of the data for the repel layer,
or setting the label to &lt;code&gt;&#34;&#34;&lt;/code&gt; for those you don‚Äôt want to plot. Try both in the
plot below where you only label 10 random points.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Explore the documentation for &lt;code&gt;geom_text_repel&lt;/code&gt;. Find a way to ensure that the
labels in the plot below only repels in the vertical direction&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;ggforce comes with 4 different types of mark geoms. Try them all out in the code
below:&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;networks&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Networks&lt;/h3&gt;
&lt;p&gt;ggplot2 has been focused on tabular data. Network data in any shape and form is
handled by ggraph&lt;/p&gt;
&lt;p&gt;dendrograms are just a specific type of network&lt;/p&gt;
&lt;div id=&#34;exercies&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Exercies&lt;/h4&gt;
&lt;p&gt;Most network plots are defined by a layout algorithm, which takes the network
structure and calculate a position for each node. The layout algorithm is
global and set in the &lt;code&gt;ggraph()&lt;/code&gt;. The default &lt;code&gt;auto&lt;/code&gt; layout will inspect the
network object and try to choose a sensible layout for it (e.g.¬†dendrogram for a
hierarchical clustering as above). There is, however no optimal layout and it is
often a good idea to try out different layouts. Try out different layouts in the
graph below. See the &lt;a href=&#34;https://ggraph.data-imaginist.com/reference/index.html&#34;&gt;the website&lt;/a&gt;
for an overview of the different layouts.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;There are many different ways to draw edges. Try to use &lt;code&gt;geom_edge_parallel()&lt;/code&gt;
in the graph below to show the presence of multiple edges&lt;/p&gt;
&lt;p&gt;Faceting works in ggraph as it does in ggplot2, but you must choose to facet by
either nodes or edges. Modify the graph below to facet the edges by the &lt;code&gt;year&lt;/code&gt;
variable (using &lt;code&gt;facet_edges()&lt;/code&gt;)&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;looks&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Looks&lt;/h3&gt;
&lt;p&gt;Many people have already desgned beautiful (and horrible) themes for you. Use
them as a base&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;drawing-anything&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Drawing anything&lt;/h2&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>sklearn classification </title>
      <link>/post/sklearn-classification/</link>
      <pubDate>Mon, 06 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/sklearn-classification/</guid>
      <description>


&lt;div id=&#34;set-environment&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;set environment&lt;/h1&gt;
&lt;/div&gt;
&lt;div id=&#34;links&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;links&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/dformoso/sklearn-classification&#34;&gt;dformoso/sklearn-classification: Data Science Notebook on a Classification Task, using sklearn and Tensorflow.&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://github.com/dformoso/sklearn-classification&#34;&gt;dformoso/sklearn-classification: Data Science Notebook on a Classification Task, using sklearn and Tensorflow.&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Use selenium in python</title>
      <link>/post/use-selenium-in-python/</link>
      <pubDate>Sun, 05 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/use-selenium-in-python/</guid>
      <description>


&lt;!-- --- --&gt;
&lt;!-- title: &#34;hello world&#34; --&gt;
&lt;!-- description: | --&gt;
&lt;!--   Taking the `radix` R package for a test spin with `Scikit Learn`! --&gt;
&lt;!-- author: --&gt;
&lt;!--   - name: Jixing Liu --&gt;
&lt;!--     url: https://jixing.netlify.com/ --&gt;
&lt;!--     affiliation: DeepDrug --&gt;
&lt;!--     affiliation_url: http://www.deepdrug.cn/en/ --&gt;
&lt;!-- date: &#34;2020-04-06&#34; --&gt;
&lt;!-- #bibliography: biblio.bib   --&gt;
&lt;!-- output: --&gt;
&lt;!--   radix::radix_article: --&gt;
&lt;!--     toc: true --&gt;
&lt;!--     toc_depth: 3 --&gt;
&lt;!--     number_sections: true --&gt;
&lt;!--     self_contained: true --&gt;
&lt;!-- --- --&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(reticulate)
reticulate::use_python(&amp;quot;/Users/zero/anaconda3/envs/reticulate/bin/python3&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>How To Create Bar Race Animation Charts In R</title>
      <link>/post/how-to-create-bar-race-animation-charts-in-r/</link>
      <pubDate>Wed, 01 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/how-to-create-bar-race-animation-charts-in-r/</guid>
      <description>


&lt;div id=&#34;load-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;load data&lt;/h2&gt;
&lt;/div&gt;
&lt;div id=&#34;packages&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Packages&lt;/h1&gt;
&lt;p&gt;The packages that are required to build animated plots in R are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ggplot2&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gganimate.com/index.html&#34;&gt;gganimate&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;While those above two are the essential packages, We have also used the entire &lt;code&gt;tidyverse&lt;/code&gt;, &lt;code&gt;janitor&lt;/code&gt; and &lt;code&gt;scales&lt;/code&gt; in this project for Data Manipulation, Cleaning and Formatting.&lt;/p&gt;
&lt;div id=&#34;data-preprocessing&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;data preprocessing&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gdp &amp;lt;- gdp_data[1:217,]

gdp_tidy &amp;lt;- gdp %&amp;gt;%
  mutate_at(vars(contains(&amp;quot;YR&amp;quot;)), as.numeric) %&amp;gt;%
  #gather(year, value, 3:13) %&amp;gt;%
  pivot_longer(cols = contains(&amp;quot;YR&amp;quot;),
               names_to = &amp;quot;year&amp;quot;,
               values_to = &amp;quot;value&amp;quot;) %&amp;gt;%
  janitor::clean_names(.) %&amp;gt;%
  mutate(year = as.numeric(stringr::str_sub(year, 1, 4)))

# write_csv(gdp_tidy,&amp;quot;./data/gdp_tidy.csv&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;animated-plot&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Animated Plot&lt;/h2&gt;
&lt;p&gt;An Animated Plot building process involves two primary sections:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Building the entire &lt;strong&gt;set of actual static plots&lt;/strong&gt; using ggplot2&lt;/li&gt;
&lt;li&gt;Animating the static plots with desired parameters using &lt;strong&gt;gganimate&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The final step after these two primary steps is to render the animation in the desired file format, like GIF or MP4 (Video).&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;create-label-columns&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;create label columns&lt;/h2&gt;
&lt;p&gt;create a few more columns that will help us display labels in the plot.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gdp_formatted &amp;lt;- gdp_tidy %&amp;gt;%
  group_by(year) %&amp;gt;% # The * 1 makes it possible to have non-integer ranks while sliding
  mutate(rank = rank(-value), # -100 ÊúÄÂ∞è, ÊéíÁ¨¨‰∏Ä
         Value_rel = value/value[rank==1],
         Value_lbl = paste0(&amp;quot; &amp;quot;,round(value/1e9))) %&amp;gt;%
  group_by(country_name) %&amp;gt;%
  filter(rank &amp;lt;=10) %&amp;gt;%
  ungroup() %&amp;gt;% 
  filter(!is.na(value)) %&amp;gt;% 
  select(-series_code, -series_name)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;staticplot  &amp;lt;- 
  gdp_formatted %&amp;gt;%
  ggplot(aes(
    rank,
    group = country_name,
    fill = as.factor(country_name),
    color = as.factor(country_name)
  )) +
  geom_tile(aes(y = value/2,
                height = value,
                width = 0.9), 
            alpha = 0.8, color = NA) +
  geom_text(aes(y = 0, label = paste(country_name, &amp;quot; &amp;quot;)), vjust = 0.2, hjust = 1) +
  geom_text(aes(y=value,label = Value_lbl, hjust=0)) +
  coord_flip(clip = &amp;quot;off&amp;quot;, expand = FALSE) +
  scale_y_continuous(labels = scales::comma) +
  scale_x_reverse() +
  guides(color = FALSE, fill = FALSE) +
  theme(axis.line=element_blank(),
        axis.text.x=element_blank(),
        axis.text.y=element_blank(),
        axis.ticks=element_blank(),
        axis.title.x=element_blank(),
         axis.title.y=element_blank(),
        legend.position=&amp;quot;none&amp;quot;,
        panel.background=element_blank(),
        panel.border=element_blank(),
        panel.grid.major=element_blank(),
        panel.grid.minor=element_blank(),
        panel.grid.major.x = element_line( size=.1, color=&amp;quot;grey&amp;quot; ),
        panel.grid.minor.x = element_line( size=.1, color=&amp;quot;grey&amp;quot; ),
        plot.title=element_text(size=25, hjust=0.5, face=&amp;quot;bold&amp;quot;, colour=&amp;quot;grey&amp;quot;, vjust=-1),
        plot.subtitle=element_text(size=18, hjust=0.5, face=&amp;quot;italic&amp;quot;, color=&amp;quot;grey&amp;quot;),
        plot.caption =element_text(size=8, hjust=0.5, face=&amp;quot;italic&amp;quot;, color=&amp;quot;grey&amp;quot;),
        plot.background=element_blank(),
       plot.margin = margin(2,2, 2, 4, &amp;quot;cm&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;animation&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Animation&lt;/h2&gt;
&lt;p&gt;The key function here is transition_states() which stitches the individual static plots together by year. view_follow() is used to give a view as if the background lines (gridlines) are moving as the animation is progressing.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;anim  &amp;lt;-
  staticplot +
  transition_states(year, transition_length = 4, state_length = 2) +
  view_follow(fixed_x = TRUE)  +
  labs(title = &amp;#39;GDP per Year : {closest_state}&amp;#39;,
       subtitle  =  &amp;quot;Top 10 Countries&amp;quot;,
       caption  = &amp;quot;GDP in Billions USD | Data Source: World Bank Data&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;rendering&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Rendering&lt;/h2&gt;
&lt;p&gt;With the animation being built (ready) and saved in the object anim , It‚Äôs time for us to render the animation using animate() function. The renderer used in the animate() differs based on the type of output file required.&lt;/p&gt;
&lt;p&gt;For GIF File Format:&lt;/p&gt;
&lt;div id=&#34;for-gif&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;For GIF:&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;animate(anim, 200, fps = 20,  width = 1200, height = 1000,
        renderer = gifski_renderer(here(&amp;quot;figure/gganim.gif&amp;quot;)))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-04-01-how-to-create-bar-race-animation-charts-in-r_files/figure-html/unnamed-chunk-6-1.gif&#34; /&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;for-mp4&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;For MP4&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# animate(anim, 200, fps = 20,  width = 1200, height = 1000,
#         renderer = ffmpeg_renderer()) -&amp;gt; for_mp4anim_save(&amp;quot;animation.mp4&amp;quot;, animation = for_mp4 )&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/Users/zero/myrepo/lifelong_learning/figure/gganim.gif&#34; width=&#34;30%&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;links&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Links&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.programmingwithr.com/how-to-create-animated-bar-race-charts-in-r/&#34;&gt;How to create Bar Race Animation Charts in R ¬∑ Programming with R&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Balance Accuracy and MCC</title>
      <link>/post/balance-accuracy-and-mcc/</link>
      <pubDate>Tue, 31 Mar 2020 00:00:00 +0000</pubDate>
      <guid>/post/balance-accuracy-and-mcc/</guid>
      <description>
&lt;script src=&#34;/rmarkdown-libs/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;


&lt;div id=&#34;balanced-accuracy&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Balanced accuracy&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Accuracy is the proportion of the data that are predicted correctly.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Balanced accuracy is computed here as the average of sens() and spec()&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[\mathrm{BA}=\frac{0.5 \mathrm{TP}}{\mathrm{TP}+\mathrm{FN}}+\frac{0.5 \mathrm{TN}}{\mathrm{TN}+\mathrm{FP}}\]&lt;/span&gt;&lt;/p&gt;
&lt;div id=&#34;multiclass&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Multiclass&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Macro, micro, and macro-weighted averaging is available for this metric.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(dplyr)
data(hpc_cv)

hpc_cv %&amp;gt;%
  count(obs, sort = TRUE) %&amp;gt;%
  kable(&amp;quot;html&amp;quot;) %&amp;gt;%
  kable_styling(&amp;quot;hover&amp;quot;, full_width = F)&lt;/code&gt;&lt;/pre&gt;
&lt;table class=&#34;table table-hover&#34; style=&#34;width: auto !important; margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
obs
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
n
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
VF
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1769
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
F
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1078
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
M
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
412
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
L
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
208
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;hpc_cv %&amp;gt;%
  filter(Resample == &amp;quot;Fold01&amp;quot;) %&amp;gt;%
  #bal_accuracy(obs, pred, estimator = &amp;quot;macro&amp;quot;)
  bal_accuracy(obs, pred, estimator = &amp;quot;macro_weighted&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1 x 3
##   .metric      .estimator     .estimate
##   &amp;lt;chr&amp;gt;        &amp;lt;chr&amp;gt;              &amp;lt;dbl&amp;gt;
## 1 bal_accuracy macro_weighted     0.771&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;  #bal_accuracy(obs, pred, estimator = &amp;quot;micro&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;multi-class-prob-sum-is-equal-1&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;multi-class prob sum is equal 1?&lt;/h3&gt;
&lt;p&gt;The Answer Is Yes.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;hpc_cv %&amp;gt;% 
  head(6) %&amp;gt;% 
  rowwise() %&amp;gt;% 
  mutate(prob = sum(VF, `F`, M, L)) %&amp;gt;% 
  select(prob)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Source: local data frame [6 x 1]
## Groups: &amp;lt;by row&amp;gt;
## 
## # A tibble: 6 x 1
##    prob
##   &amp;lt;dbl&amp;gt;
## 1  1   
## 2  1.00
## 3  1.00
## 4  1.00
## 5  1.00
## 6  1.&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;what-is-the-mean-of-macro-micro-and-macro-weighted-averaging&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;what is the mean of Macro, micro, and macro-weighted averaging?&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Macro-averaging&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ÂÆèÂπ≥ÂùáÔºàMacro-averagingÔºâÊòØÊåáÊâÄÊúâÁ±ªÂà´ÁöÑÊØè‰∏Ä‰∏™ÁªüËÆ°ÊåáÊ†áÂÄºÁöÑÁÆóÊï∞Âπ≥ÂùáÂÄºÔºå‰πüÂ∞±ÊòØÂÆèÁ≤æÁ°ÆÁéáÔºàMacro-PrecisionÔºâÔºåÂÆèÂè¨ÂõûÁéáÔºàMacro-RecallÔºâÔºåÂÆèFÂÄºÔºàMacro-F ScoreÔºâÔºåÂÖ∂ËÆ°ÁÆóÂÖ¨ÂºèÂ¶Ç‰∏ãÔºö&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
P_{\text {macro}}=\frac{1}{n} \sum_{i=1}^{n} P_{i}
\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Micro-averaging&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ÂæÆÂπ≥ÂùáÔºàMicro-averagingÔºâÊòØÂØπÊï∞ÊçÆÈõÜ‰∏≠ÁöÑÊØè‰∏Ä‰∏™Á§∫‰æã‰∏çÂàÜÁ±ªÂà´ËøõË°åÁªüËÆ°Âª∫Á´ãÂÖ®Â±ÄÊ∑∑Ê∑ÜÁü©ÈòµÔºåÁÑ∂ÂêéËÆ°ÁÆóÁõ∏Â∫îÁöÑÊåáÊ†á„ÄÇÂÖ∂ËÆ°ÁÆóÂÖ¨ÂºèÂ¶Ç‰∏ãÔºö&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
P_{\text {micro}}=\frac{T \bar{P}}{T \bar{P}+\overline{F P}}=\frac{\sum_{i=1}^{n} T P_{i}}{\sum_{i=1}^{n} T P_{i}+\sum_{i=1}^{n} F P_{i}}
\]&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Macro-averaging‰∏éMicro-averagingÁöÑ‰∏çÂêå‰πãÂ§ÑÂú®‰∫éÔºöMacro-averagingËµã‰∫àÊØè‰∏™Á±ªÁõ∏ÂêåÁöÑÊùÉÈáçÔºåÁÑ∂ËÄåMicro-averagingËµã‰∫àÊØè‰∏™Ê†∑Êú¨ÂÜ≥Á≠ñÁõ∏ÂêåÁöÑÊùÉÈáç„ÄÇ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;summary&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;summary&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://i.loli.net/2020/03/31/ymsZY5W4XuDPA8H.png&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;mcc-matthews-correlation-coefficient&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;MCC: Matthews correlation coefficient&lt;/h2&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[
\mathrm{MCC}=\frac{\mathrm{TP} \times \mathrm{TN}-\mathrm{FP} \times \mathrm{FN}}{\sqrt{(\mathrm{TP}+\mathrm{FP})(\mathrm{TP}+\mathrm{FN})(\mathrm{TN}+\mathrm{FP})(\mathrm{TN}+\mathrm{FN})}}
\]&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Multiclass
# mcc() has a natural multiclass extension
# pred is predicted class results (that is also factor)
hpc_cv %&amp;gt;%
  group_by(Resample) %&amp;gt;%
  mcc(obs, pred)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 10 x 4
##    Resample .metric .estimator .estimate
##    &amp;lt;chr&amp;gt;    &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt;
##  1 Fold01   mcc     multiclass     0.542
##  2 Fold02   mcc     multiclass     0.521
##  3 Fold03   mcc     multiclass     0.602
##  4 Fold04   mcc     multiclass     0.519
##  5 Fold05   mcc     multiclass     0.520
##  6 Fold06   mcc     multiclass     0.494
##  7 Fold07   mcc     multiclass     0.461
##  8 Fold08   mcc     multiclass     0.538
##  9 Fold09   mcc     multiclass     0.459
## 10 Fold10   mcc     multiclass     0.498&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;notes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;notes&lt;/h2&gt;
&lt;p&gt;where TP means ‚Äútrue positives‚Äù, TN ‚Äútrue negatives‚Äù, FP ‚Äúfalse positives‚Äù, and FN ‚Äúfalse negatives‚Äù.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;links&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;links&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://tidymodels.github.io/yardstick/reference/bal_accuracy.html&#34;&gt;Balanced accuracy ‚Äî bal_accuracy ‚Ä¢ yardstick&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://tidymodels.github.io/yardstick/reference/mcc.html&#34;&gt;Matthews correlation coefficient ‚Äî mcc ‚Ä¢ yardstick&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Just say hello</title>
      <link>/post/just-say-hello/</link>
      <pubDate>Tue, 31 Mar 2020 00:00:00 +0000</pubDate>
      <guid>/post/just-say-hello/</guid>
      <description>


&lt;div id=&#34;barlpot&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;barlpot&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# how to create a bar plot with ggplot2
library(ggthemes)
library(ggplot2)
#how to create a barplot with label using ggplot2 package
iris %&amp;gt;%
  group_by(Species) %&amp;gt;%
  summarise(counts = n()) %&amp;gt;%
  mutate(Species = fct_reorder(Species, counts)) %&amp;gt;%
  ggplot(aes(x = Species, y = counts, fill = Species)) +
  geom_bar(stat = &amp;quot;identity&amp;quot;) +
  geom_text(aes(label = counts), hjust = 1.6, color = &amp;quot;white&amp;quot;, size = 5) +
  coord_flip() +
  theme_minimal()+ scale_color_tableau() + scale_fill_tableau()+
  labs(caption = &amp;quot;figure 01&amp;quot;) +
  theme(axis.text.x = element_text(angle = 0, hjust = 1),
        legend.position = &amp;quot;bottom&amp;quot;,
        plot.caption=element_text(size=12,family = &amp;quot;Arial&amp;quot;,face = &amp;quot;bold&amp;quot;,
                                  hjust=0, margin=margin(t=15)))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-03-31-just-say-hello_files/figure-html/unnamed-chunk-1-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Tidymodels Machine Learning Ecosystem</title>
      <link>/post/tidymodels-machine-learning-ecosystem/</link>
      <pubDate>Tue, 31 Mar 2020 00:00:00 +0000</pubDate>
      <guid>/post/tidymodels-machine-learning-ecosystem/</guid>
      <description>


&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Introduction&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;{tidyverse} ecosystem that has become the defacto standard for data importation, manipulation, and visualization in R.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;My graduate training left me with a deep understanding of linear models and design-based causal inference, but with little or no training in other types of predictive modeling, unsupervised machine learning, version control, or putting models into production.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;I chose the Applied Machine Learning workshop in order to fill the gap in my knowledge about machine learning models beyond OLS and logistic regression.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Max Kuhn and Davis Vaughn were the two workshop leaders and I knew they were in the process of developing the {tidymodels} ecosystem, which stands to be a successor to their popular {caret} package and promises fill the modeling gap in the {tidyverse} ecosystem.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div id=&#34;load-data&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;load data&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidymodels)
library(AmesHousing)

data &amp;lt;- make_ames()

data %&amp;gt;% 
  head() %&amp;gt;% 
  str()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Classes &amp;#39;tbl_df&amp;#39;, &amp;#39;tbl&amp;#39; and &amp;#39;data.frame&amp;#39;:    6 obs. of  81 variables:
##  $ MS_SubClass       : Factor w/ 16 levels &amp;quot;One_Story_1946_and_Newer_All_Styles&amp;quot;,..: 1 1 1 1 6 6
##  $ MS_Zoning         : Factor w/ 7 levels &amp;quot;Floating_Village_Residential&amp;quot;,..: 3 2 3 3 3 3
##  $ Lot_Frontage      : num  141 80 81 93 74 78
##  $ Lot_Area          : int  31770 11622 14267 11160 13830 9978
##  $ Street            : Factor w/ 2 levels &amp;quot;Grvl&amp;quot;,&amp;quot;Pave&amp;quot;: 2 2 2 2 2 2
##  $ Alley             : Factor w/ 3 levels &amp;quot;Gravel&amp;quot;,&amp;quot;No_Alley_Access&amp;quot;,..: 2 2 2 2 2 2
##  $ Lot_Shape         : Factor w/ 4 levels &amp;quot;Regular&amp;quot;,&amp;quot;Slightly_Irregular&amp;quot;,..: 2 1 2 1 2 2
##  $ Land_Contour      : Factor w/ 4 levels &amp;quot;Bnk&amp;quot;,&amp;quot;HLS&amp;quot;,&amp;quot;Low&amp;quot;,..: 4 4 4 4 4 4
##  $ Utilities         : Factor w/ 3 levels &amp;quot;AllPub&amp;quot;,&amp;quot;NoSeWa&amp;quot;,..: 1 1 1 1 1 1
##  $ Lot_Config        : Factor w/ 5 levels &amp;quot;Corner&amp;quot;,&amp;quot;CulDSac&amp;quot;,..: 1 5 1 1 5 5
##  $ Land_Slope        : Factor w/ 3 levels &amp;quot;Gtl&amp;quot;,&amp;quot;Mod&amp;quot;,&amp;quot;Sev&amp;quot;: 1 1 1 1 1 1
##  $ Neighborhood      : Factor w/ 28 levels &amp;quot;North_Ames&amp;quot;,&amp;quot;College_Creek&amp;quot;,..: 1 1 1 1 7 7
##  $ Condition_1       : Factor w/ 9 levels &amp;quot;Artery&amp;quot;,&amp;quot;Feedr&amp;quot;,..: 3 2 3 3 3 3
##  $ Condition_2       : Factor w/ 8 levels &amp;quot;Artery&amp;quot;,&amp;quot;Feedr&amp;quot;,..: 3 3 3 3 3 3
##  $ Bldg_Type         : Factor w/ 5 levels &amp;quot;OneFam&amp;quot;,&amp;quot;TwoFmCon&amp;quot;,..: 1 1 1 1 1 1
##  $ House_Style       : Factor w/ 8 levels &amp;quot;One_and_Half_Fin&amp;quot;,..: 3 3 3 3 8 8
##  $ Overall_Qual      : Factor w/ 10 levels &amp;quot;Very_Poor&amp;quot;,&amp;quot;Poor&amp;quot;,..: 6 5 6 7 5 6
##  $ Overall_Cond      : Factor w/ 10 levels &amp;quot;Very_Poor&amp;quot;,&amp;quot;Poor&amp;quot;,..: 5 6 6 5 5 6
##  $ Year_Built        : int  1960 1961 1958 1968 1997 1998
##  $ Year_Remod_Add    : int  1960 1961 1958 1968 1998 1998
##  $ Roof_Style        : Factor w/ 6 levels &amp;quot;Flat&amp;quot;,&amp;quot;Gable&amp;quot;,..: 4 2 4 4 2 2
##  $ Roof_Matl         : Factor w/ 8 levels &amp;quot;ClyTile&amp;quot;,&amp;quot;CompShg&amp;quot;,..: 2 2 2 2 2 2
##  $ Exterior_1st      : Factor w/ 16 levels &amp;quot;AsbShng&amp;quot;,&amp;quot;AsphShn&amp;quot;,..: 4 14 15 4 14 14
##  $ Exterior_2nd      : Factor w/ 17 levels &amp;quot;AsbShng&amp;quot;,&amp;quot;AsphShn&amp;quot;,..: 11 15 16 4 15 15
##  $ Mas_Vnr_Type      : Factor w/ 5 levels &amp;quot;BrkCmn&amp;quot;,&amp;quot;BrkFace&amp;quot;,..: 5 4 2 4 4 2
##  $ Mas_Vnr_Area      : num  112 0 108 0 0 20
##  $ Exter_Qual        : Factor w/ 4 levels &amp;quot;Excellent&amp;quot;,&amp;quot;Fair&amp;quot;,..: 4 4 4 3 4 4
##  $ Exter_Cond        : Factor w/ 5 levels &amp;quot;Excellent&amp;quot;,&amp;quot;Fair&amp;quot;,..: 5 5 5 5 5 5
##  $ Foundation        : Factor w/ 6 levels &amp;quot;BrkTil&amp;quot;,&amp;quot;CBlock&amp;quot;,..: 2 2 2 2 3 3
##  $ Bsmt_Qual         : Factor w/ 6 levels &amp;quot;Excellent&amp;quot;,&amp;quot;Fair&amp;quot;,..: 6 6 6 6 3 6
##  $ Bsmt_Cond         : Factor w/ 6 levels &amp;quot;Excellent&amp;quot;,&amp;quot;Fair&amp;quot;,..: 3 6 6 6 6 6
##  $ Bsmt_Exposure     : Factor w/ 5 levels &amp;quot;Av&amp;quot;,&amp;quot;Gd&amp;quot;,&amp;quot;Mn&amp;quot;,..: 2 4 4 4 4 4
##  $ BsmtFin_Type_1    : Factor w/ 7 levels &amp;quot;ALQ&amp;quot;,&amp;quot;BLQ&amp;quot;,&amp;quot;GLQ&amp;quot;,..: 2 6 1 1 3 3
##  $ BsmtFin_SF_1      : num  2 6 1 1 3 3
##  $ BsmtFin_Type_2    : Factor w/ 7 levels &amp;quot;ALQ&amp;quot;,&amp;quot;BLQ&amp;quot;,&amp;quot;GLQ&amp;quot;,..: 7 4 7 7 7 7
##  $ BsmtFin_SF_2      : num  0 144 0 0 0 0
##  $ Bsmt_Unf_SF       : num  441 270 406 1045 137 ...
##  $ Total_Bsmt_SF     : num  1080 882 1329 2110 928 ...
##  $ Heating           : Factor w/ 6 levels &amp;quot;Floor&amp;quot;,&amp;quot;GasA&amp;quot;,..: 2 2 2 2 2 2
##  $ Heating_QC        : Factor w/ 5 levels &amp;quot;Excellent&amp;quot;,&amp;quot;Fair&amp;quot;,..: 2 5 5 1 3 1
##  $ Central_Air       : Factor w/ 2 levels &amp;quot;N&amp;quot;,&amp;quot;Y&amp;quot;: 2 2 2 2 2 2
##  $ Electrical        : Factor w/ 6 levels &amp;quot;FuseA&amp;quot;,&amp;quot;FuseF&amp;quot;,..: 5 5 5 5 5 5
##  $ First_Flr_SF      : int  1656 896 1329 2110 928 926
##  $ Second_Flr_SF     : int  0 0 0 0 701 678
##  $ Low_Qual_Fin_SF   : int  0 0 0 0 0 0
##  $ Gr_Liv_Area       : int  1656 896 1329 2110 1629 1604
##  $ Bsmt_Full_Bath    : num  1 0 0 1 0 0
##  $ Bsmt_Half_Bath    : num  0 0 0 0 0 0
##  $ Full_Bath         : int  1 1 1 2 2 2
##  $ Half_Bath         : int  0 0 1 1 1 1
##  $ Bedroom_AbvGr     : int  3 2 3 3 3 3
##  $ Kitchen_AbvGr     : int  1 1 1 1 1 1
##  $ Kitchen_Qual      : Factor w/ 5 levels &amp;quot;Excellent&amp;quot;,&amp;quot;Fair&amp;quot;,..: 5 5 3 1 5 3
##  $ TotRms_AbvGrd     : int  7 5 6 8 6 7
##  $ Functional        : Factor w/ 8 levels &amp;quot;Maj1&amp;quot;,&amp;quot;Maj2&amp;quot;,..: 8 8 8 8 8 8
##  $ Fireplaces        : int  2 0 0 2 1 1
##  $ Fireplace_Qu      : Factor w/ 6 levels &amp;quot;Excellent&amp;quot;,&amp;quot;Fair&amp;quot;,..: 3 4 4 6 6 3
##  $ Garage_Type       : Factor w/ 7 levels &amp;quot;Attchd&amp;quot;,&amp;quot;Basment&amp;quot;,..: 1 1 1 1 1 1
##  $ Garage_Finish     : Factor w/ 4 levels &amp;quot;Fin&amp;quot;,&amp;quot;No_Garage&amp;quot;,..: 1 4 4 1 1 1
##  $ Garage_Cars       : num  2 1 1 2 2 2
##  $ Garage_Area       : num  528 730 312 522 482 470
##  $ Garage_Qual       : Factor w/ 6 levels &amp;quot;Excellent&amp;quot;,&amp;quot;Fair&amp;quot;,..: 6 6 6 6 6 6
##  $ Garage_Cond       : Factor w/ 6 levels &amp;quot;Excellent&amp;quot;,&amp;quot;Fair&amp;quot;,..: 6 6 6 6 6 6
##  $ Paved_Drive       : Factor w/ 3 levels &amp;quot;Dirt_Gravel&amp;quot;,..: 2 3 3 3 3 3
##  $ Wood_Deck_SF      : int  210 140 393 0 212 360
##  $ Open_Porch_SF     : int  62 0 36 0 34 36
##  $ Enclosed_Porch    : int  0 0 0 0 0 0
##  $ Three_season_porch: int  0 0 0 0 0 0
##  $ Screen_Porch      : int  0 120 0 0 0 0
##  $ Pool_Area         : int  0 0 0 0 0 0
##  $ Pool_QC           : Factor w/ 5 levels &amp;quot;Excellent&amp;quot;,&amp;quot;Fair&amp;quot;,..: 4 4 4 4 4 4
##  $ Fence             : Factor w/ 5 levels &amp;quot;Good_Privacy&amp;quot;,..: 5 3 5 5 3 5
##  $ Misc_Feature      : Factor w/ 6 levels &amp;quot;Elev&amp;quot;,&amp;quot;Gar2&amp;quot;,..: 3 3 2 3 3 3
##  $ Misc_Val          : int  0 0 12500 0 0 0
##  $ Mo_Sold           : int  5 6 6 4 3 6
##  $ Year_Sold         : int  2010 2010 2010 2010 2010 2010
##  $ Sale_Type         : Factor w/ 10 levels &amp;quot;COD&amp;quot;,&amp;quot;Con&amp;quot;,&amp;quot;ConLD&amp;quot;,..: 10 10 10 10 10 10
##  $ Sale_Condition    : Factor w/ 6 levels &amp;quot;Abnorml&amp;quot;,&amp;quot;AdjLand&amp;quot;,..: 5 5 5 5 5 5
##  $ Sale_Price        : int  215000 105000 172000 244000 189900 195500
##  $ Longitude         : num  -93.6 -93.6 -93.6 -93.6 -93.6 ...
##  $ Latitude          : num  42.1 42.1 42.1 42.1 42.1 ...&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;eda&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;EDA&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# data %&amp;gt;%
#     select_if(is.factor) %&amp;gt;%
#     #select(-State_Of_Origin) %&amp;gt;%
#     gather() %&amp;gt;%
#     ggplot(aes(x = value)) +
#     facet_wrap( ~ key, scales = &amp;quot;free&amp;quot;, ncol = 3) +
#     geom_bar()




# data %&amp;gt;%
#     select_if(is.numeric) %&amp;gt;%
#     gather() %&amp;gt;%
#     ggplot(aes(x = value)) +
#     facet_wrap( ~ key, scales = &amp;quot;free&amp;quot;, ncol = 4) +
#     geom_density()&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;data-type&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;data type&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# dt_new &amp;lt;- 
# dt_new %&amp;gt;% 
#   mutate(Promoted_or_Not = factor(Promoted_or_Not))

# numeric_variables &amp;lt;- c(
#   &amp;quot;total_years_dispatcher&amp;quot;, &amp;quot;total_years_present_job&amp;quot;,
#   &amp;quot;childrendependents&amp;quot;, &amp;quot;children_under_2_yrs&amp;quot;, 
#   &amp;quot;sick_days_in_last_year&amp;quot;, &amp;quot;avg_work_hrs_week&amp;quot;
# )
# 
# factor_variables &amp;lt;- setdiff(colnames(sleep), numeric_variables)
# 
# sleep &amp;lt;- mutate_at(sleep, vars(factor_variables), as.factor)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;stratified-trainingtest-splits&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Stratified training/test splits&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;## Setting seed
set.seed(1)

## Generate split
data_split &amp;lt;- initial_split(data, 
                            prop = 4/5, 
                            strata = &amp;quot;Sale_Price&amp;quot;)

## Printing the function gives us &amp;lt;Num Rows in Training Set/Num Rows in Testing Set/Total Num Rows&amp;gt;
data_split&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## &amp;lt;2346/584/2930&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;## Calling training() on this object will give us our training set, and calling testing() on it will give us our testing set
data_train &amp;lt;- training(data_split)
data_test &amp;lt;- testing(data_split)

data_train %&amp;gt;% 
  head() %&amp;gt;% 
  knitr::kable()&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;MS_SubClass&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;MS_Zoning&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Lot_Frontage&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Lot_Area&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Street&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Alley&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Lot_Shape&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Land_Contour&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Utilities&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Lot_Config&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Land_Slope&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Neighborhood&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Condition_1&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Condition_2&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Bldg_Type&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;House_Style&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Overall_Qual&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Overall_Cond&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Year_Built&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Year_Remod_Add&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Roof_Style&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Roof_Matl&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Exterior_1st&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Exterior_2nd&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Mas_Vnr_Type&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Mas_Vnr_Area&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Exter_Qual&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Exter_Cond&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Foundation&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Bsmt_Qual&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Bsmt_Cond&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Bsmt_Exposure&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;BsmtFin_Type_1&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;BsmtFin_SF_1&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;BsmtFin_Type_2&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;BsmtFin_SF_2&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Bsmt_Unf_SF&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Total_Bsmt_SF&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Heating&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Heating_QC&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Central_Air&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Electrical&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;First_Flr_SF&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Second_Flr_SF&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Low_Qual_Fin_SF&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Gr_Liv_Area&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Bsmt_Full_Bath&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Bsmt_Half_Bath&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Full_Bath&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Half_Bath&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Bedroom_AbvGr&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Kitchen_AbvGr&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Kitchen_Qual&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;TotRms_AbvGrd&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Functional&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Fireplaces&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Fireplace_Qu&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Garage_Type&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Garage_Finish&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Garage_Cars&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Garage_Area&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Garage_Qual&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Garage_Cond&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Paved_Drive&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Wood_Deck_SF&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Open_Porch_SF&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Enclosed_Porch&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Three_season_porch&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Screen_Porch&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Pool_Area&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Pool_QC&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Fence&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Misc_Feature&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Misc_Val&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Mo_Sold&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Year_Sold&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Sale_Type&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;Sale_Condition&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Sale_Price&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Longitude&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Latitude&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;One_Story_1946_and_Newer_All_Styles&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Residential_Low_Density&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;141&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;31770&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Pave&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Alley_Access&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Slightly_Irregular&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Lvl&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;AllPub&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Corner&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Gtl&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;North_Ames&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Norm&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Norm&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;OneFam&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;One_Story&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Above_Average&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Average&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1960&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1960&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Hip&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CompShg&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;BrkFace&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Plywood&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Stone&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;112&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CBlock&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Good&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Gd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;BLQ&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Unf&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;441&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1080&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;GasA&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Fair&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Y&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;SBrkr&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1656&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1656&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;3&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;7&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typ&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Good&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Attchd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Fin&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;528&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Partial_Pavement&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;210&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;62&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Pool&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Fence&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;None&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;5&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2010&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;WD&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Normal&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;215000&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;-93.61975&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;42.05403&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;One_Story_1946_and_Newer_All_Styles&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Residential_High_Density&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;80&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;11622&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Pave&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Alley_Access&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Regular&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Lvl&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;AllPub&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Inside&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Gtl&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;North_Ames&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Feedr&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Norm&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;OneFam&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;One_Story&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Average&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Above_Average&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1961&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1961&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Gable&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CompShg&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;VinylSd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;VinylSd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;None&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CBlock&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Rec&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;6&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;LwQ&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;144&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;270&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;882&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;GasA&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Y&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;SBrkr&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;896&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;896&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;5&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typ&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Fireplace&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Attchd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Unf&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;730&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Paved&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;140&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;120&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Pool&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Minimum_Privacy&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;None&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;6&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2010&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;WD&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Normal&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;105000&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;-93.61976&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;42.05301&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;One_Story_1946_and_Newer_All_Styles&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Residential_Low_Density&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;81&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;14267&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Pave&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Alley_Access&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Slightly_Irregular&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Lvl&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;AllPub&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Corner&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Gtl&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;North_Ames&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Norm&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Norm&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;OneFam&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;One_Story&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Above_Average&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Above_Average&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1958&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1958&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Hip&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CompShg&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Wd Sdng&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Wd Sdng&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;BrkFace&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;108&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CBlock&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;ALQ&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Unf&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;406&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1329&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;GasA&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Y&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;SBrkr&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1329&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1329&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;3&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Good&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;6&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typ&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Fireplace&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Attchd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Unf&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;312&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Paved&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;393&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;36&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Pool&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Fence&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Gar2&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;12500&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;6&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2010&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;WD&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Normal&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;172000&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;-93.61939&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;42.05266&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Two_Story_1946_and_Newer&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Residential_Low_Density&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;74&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;13830&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Pave&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Alley_Access&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Slightly_Irregular&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Lvl&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;AllPub&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Inside&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Gtl&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Gilbert&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Norm&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Norm&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;OneFam&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Two_Story&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Average&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Average&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1997&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1998&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Gable&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CompShg&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;VinylSd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;VinylSd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;None&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;PConc&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Good&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;GLQ&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;3&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Unf&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;137&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;928&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;GasA&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Good&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Y&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;SBrkr&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;928&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;701&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1629&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;3&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;6&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typ&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Attchd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Fin&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;482&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Paved&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;212&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;34&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Pool&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Minimum_Privacy&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;None&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;3&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2010&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;WD&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Normal&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;189900&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;-93.63893&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;42.06090&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Two_Story_1946_and_Newer&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Residential_Low_Density&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;78&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;9978&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Pave&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Alley_Access&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Slightly_Irregular&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Lvl&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;AllPub&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Inside&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Gtl&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Gilbert&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Norm&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Norm&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;OneFam&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Two_Story&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Above_Average&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Above_Average&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1998&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1998&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Gable&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CompShg&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;VinylSd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;VinylSd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;BrkFace&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;20&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;PConc&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;GLQ&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;3&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Unf&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;324&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;926&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;GasA&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Excellent&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Y&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;SBrkr&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;926&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;678&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1604&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;3&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Good&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;7&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typ&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Good&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Attchd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Fin&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;470&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Paved&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;360&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;36&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Pool&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Fence&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;None&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;6&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2010&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;WD&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Normal&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;195500&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;-93.63893&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;42.06078&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;One_Story_PUD_1946_and_Newer&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Residential_Low_Density&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;41&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;4920&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Pave&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Alley_Access&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Regular&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Lvl&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;AllPub&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Inside&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Gtl&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Stone_Brook&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Norm&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Norm&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;TwnhsE&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;One_Story&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Very_Good&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Average&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2001&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2001&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Gable&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CompShg&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CemntBd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;CmentBd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;None&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Good&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;PConc&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Good&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Mn&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;GLQ&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;3&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Unf&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;722&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1338&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;GasA&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Excellent&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Y&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;SBrkr&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1338&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1338&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Good&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;6&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typ&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Fireplace&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Attchd&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Fin&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;582&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Typical&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Paved&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;170&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Pool&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;No_Fence&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;None&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;0&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;4&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2010&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;WD&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Normal&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;213500&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;-93.63379&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;42.06298&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div id=&#34;data-pre-processing&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Data pre-processing&lt;/h1&gt;
&lt;div id=&#34;recipe&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;recipe&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_rec &amp;lt;- recipe(
  Sale_Price ~ .,
  data = data_train
) %&amp;gt;% 
  step_log(Sale_Price, base = 10) %&amp;gt;%
  step_rm(matches(&amp;quot;Qual&amp;quot;), matches(&amp;quot;Cond&amp;quot;)) %&amp;gt;% # Remove unwanted variables 
  step_dummy(all_nominal()) %&amp;gt;% 
  #step_downsample(Promoted_or_Not) %&amp;gt;% 
  step_center(all_predictors()) %&amp;gt;% 
  step_scale(all_predictors()) %&amp;gt;% 
  step_pca(contains(&amp;quot;SF&amp;quot;), contains(&amp;quot;Area&amp;quot;), threshold = .75) %&amp;gt;% #will convert numeric data into one or more principal components.
  step_nzv(all_predictors()) # üëç #

data_rec&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Data Recipe
## 
## Inputs:
## 
##       role #variables
##    outcome          1
##  predictor         80
## 
## Operations:
## 
## Log transformation on Sale_Price
## Delete terms matches, Qual, matches, Cond
## Dummy variables from all_nominal
## Centering for all_predictors
## Scaling for all_predictors
## No PCA components were extracted.
## Sparse, unbalanced variable filter on all_predictors&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;prep&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;prep&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_rec_trained &amp;lt;- prep(data_rec, training = data_train, verbose = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## oper 1 step log [training] 
## oper 2 step rm [training] 
## oper 3 step dummy [training] 
## oper 4 step center [training] 
## oper 5 step scale [training] 
## oper 6 step pca [training] 
## oper 7 step nzv [training] 
## The retained training set is ~ 1.57 Mb  in memory.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_rec_trained&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Data Recipe
## 
## Inputs:
## 
##       role #variables
##    outcome          1
##  predictor         80
## 
## Training data contained 2346 data points and no missing data.
## 
## Operations:
## 
## Log transformation on Sale_Price [trained]
## Variables removed Overall_Qual, Exter_Qual, Bsmt_Qual, ... [trained]
## Dummy variables from MS_SubClass, MS_Zoning, Street, Alley, ... [trained]
## Centering for Lot_Frontage, Lot_Area, ... [trained]
## Scaling for Lot_Frontage, Lot_Area, ... [trained]
## PCA extraction with BsmtFin_SF_1, BsmtFin_SF_2, ... [trained]
## Sparse, unbalanced variable filter removed Kitchen_AbvGr, ... [trained]&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;juice&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;juice&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Not bad, we‚Äôve reduced 13 variables down to 7. This probably wasn‚Äôt the best use case of PCA, but it provides a good example of some advanced preprocessing made simple in {recipes}.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_rec_trained %&amp;gt;% 
  juice() %&amp;gt;% 
  select(starts_with(&amp;quot;PC&amp;quot;)) # select principal component&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 2,346 x 7
##        PC1    PC2     PC3     PC4    PC5     PC6     PC7
##      &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;
##  1 -1.63    1.16   0.650  -0.440  -0.264 -0.601  -2.05  
##  2  0.874   0.305  0.311  -0.656  -0.345 -0.475   0.143 
##  3 -0.613   1.57   0.0386 -0.106  -0.610 -1.44   -0.0504
##  4  0.381   0.953  0.421   0.341  -0.105 -0.989  -0.548 
##  5  0.166   0.957  0.363   0.458  -0.486 -1.57    0.0933
##  6 -0.0448 -0.268 -0.665  -0.337  -0.121  0.258   0.389 
##  7 -0.174  -0.249 -0.612   0.215   0.607  0.664   0.287 
##  8 -1.61    0.459 -0.0692  0.765   0.622  0.0958  0.471 
##  9  0.0192 -1.53   0.449   0.0537 -0.312 -0.149   0.251 
## 10 -0.0231  1.90   0.0478  0.197  -0.799 -1.95    0.531 
## # ‚Ä¶ with 2,336 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;modeling&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Modeling&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;The beauty of {parsnip} is that it unifies the interface for model specifications so that you don‚Äôt need to remember dozens of different interfaces for each implementation of a model.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div id=&#34;lasso&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;lasso&lt;/h2&gt;
&lt;p&gt;Now let‚Äôs specify our model. We‚Äôre going to go with a Lasso model with a penalty of 0.001 using the {parsnip} package.&lt;/p&gt;
&lt;div id=&#34;model&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;model&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_lasso &amp;lt;- linear_reg(penalty = 0.001, mixture = 1) %&amp;gt;% 
  set_engine(&amp;quot;glmnet&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;workflow&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;workflow&lt;/h3&gt;
&lt;p&gt;Using workflows, we don‚Äôt need to go through the prep() and juice() steps we went through earlier when we go to fit our model (I demonstrated prep() and juice() as they can be useful for being able to inspect your pre-processed data as we did earlier).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_lasso_wfl &amp;lt;- workflow() %&amp;gt;% 
  add_recipe(data_rec) %&amp;gt;% #recipe
  add_model(data_lasso) # model

data_lasso_wfl&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## ‚ïê‚ïê Workflow ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
## Preprocessor: Recipe
## Model: linear_reg()
## 
## ‚îÄ‚îÄ Preprocessor ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
## 7 Recipe Steps
## 
## ‚óè step_log()
## ‚óè step_rm()
## ‚óè step_dummy()
## ‚óè step_center()
## ‚óè step_scale()
## ‚óè step_pca()
## ‚óè step_nzv()
## 
## ‚îÄ‚îÄ Model ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
## Linear Regression Model Specification (regression)
## 
## Main Arguments:
##   penalty = 0.001
##   mixture = 1
## 
## Computational engine: glmnet&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;fit-model&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;fit model&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_lasso_fit &amp;lt;- fit(data_lasso_wfl, data_train)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;predict&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;predict&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;predict(data_lasso_fit, data_train) %&amp;gt;% 
    slice(1:5)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 5 x 1
##   .pred
##   &amp;lt;dbl&amp;gt;
## 1  5.32
## 2  5.04
## 3  5.17
## 4  5.30
## 5  5.31&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;model-evaluation&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Model evaluation&lt;/h1&gt;
&lt;p&gt;using metrics from the {yardstick} package&lt;/p&gt;
&lt;p&gt;metrics:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Root Mean Squared Error (RMSE)&lt;/li&gt;
&lt;li&gt;R squared&lt;/li&gt;
&lt;li&gt;the concordance correlation coefficient (ccc)&lt;/li&gt;
&lt;/ol&gt;
&lt;div id=&#34;all-in-sample&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;all in sample&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;perf_metrics &amp;lt;- metric_set(rmse, rsq, ccc)

perf_lasso &amp;lt;- data_lasso_fit %&amp;gt;% 
  predict(data_train) %&amp;gt;% 
  bind_cols(juice(data_rec_trained)) %&amp;gt;% 
  perf_metrics(truth = Sale_Price, estimate = .pred)

perf_lasso %&amp;gt;% 
  arrange(.metric)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 3 x 3
##   .metric .estimator .estimate
##   &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt;
## 1 ccc     standard      0.925 
## 2 rmse    standard      0.0648
## 3 rsq     standard      0.864&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;cross-validation&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;cross-validation&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# create 10-fold cross-validation sets for evaluating our training set models using vfold_cv(), which defaults to creating 10 folds.
cv_splits &amp;lt;- vfold_cv(data_train)
cv_splits&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## #  10-fold cross-validation 
## # A tibble: 10 x 2
##    splits             id    
##    &amp;lt;named list&amp;gt;       &amp;lt;chr&amp;gt; 
##  1 &amp;lt;split [2.1K/235]&amp;gt; Fold01
##  2 &amp;lt;split [2.1K/235]&amp;gt; Fold02
##  3 &amp;lt;split [2.1K/235]&amp;gt; Fold03
##  4 &amp;lt;split [2.1K/235]&amp;gt; Fold04
##  5 &amp;lt;split [2.1K/235]&amp;gt; Fold05
##  6 &amp;lt;split [2.1K/235]&amp;gt; Fold06
##  7 &amp;lt;split [2.1K/234]&amp;gt; Fold07
##  8 &amp;lt;split [2.1K/234]&amp;gt; Fold08
##  9 &amp;lt;split [2.1K/234]&amp;gt; Fold09
## 10 &amp;lt;split [2.1K/234]&amp;gt; Fold10&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# take our workflow and use it to fit 10 models on these 10 splits using the fit_resamples() function from the {tune} package (also a part of the tidymodels ecosystem), as well as tell it to compute the performance metrics we set earlier.

cv_eval &amp;lt;- fit_resamples(data_lasso_wfl, resamples = cv_splits, metrics = perf_metrics)
cv_eval&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## #  10-fold cross-validation 
## # A tibble: 10 x 4
##    splits             id     .metrics         .notes          
##  * &amp;lt;list&amp;gt;             &amp;lt;chr&amp;gt;  &amp;lt;list&amp;gt;           &amp;lt;list&amp;gt;          
##  1 &amp;lt;split [2.1K/235]&amp;gt; Fold01 &amp;lt;tibble [3 √ó 3]&amp;gt; &amp;lt;tibble [0 √ó 1]&amp;gt;
##  2 &amp;lt;split [2.1K/235]&amp;gt; Fold02 &amp;lt;tibble [3 √ó 3]&amp;gt; &amp;lt;tibble [0 √ó 1]&amp;gt;
##  3 &amp;lt;split [2.1K/235]&amp;gt; Fold03 &amp;lt;tibble [3 √ó 3]&amp;gt; &amp;lt;tibble [0 √ó 1]&amp;gt;
##  4 &amp;lt;split [2.1K/235]&amp;gt; Fold04 &amp;lt;tibble [3 √ó 3]&amp;gt; &amp;lt;tibble [0 √ó 1]&amp;gt;
##  5 &amp;lt;split [2.1K/235]&amp;gt; Fold05 &amp;lt;tibble [3 √ó 3]&amp;gt; &amp;lt;tibble [0 √ó 1]&amp;gt;
##  6 &amp;lt;split [2.1K/235]&amp;gt; Fold06 &amp;lt;tibble [3 √ó 3]&amp;gt; &amp;lt;tibble [0 √ó 1]&amp;gt;
##  7 &amp;lt;split [2.1K/234]&amp;gt; Fold07 &amp;lt;tibble [3 √ó 3]&amp;gt; &amp;lt;tibble [0 √ó 1]&amp;gt;
##  8 &amp;lt;split [2.1K/234]&amp;gt; Fold08 &amp;lt;tibble [3 √ó 3]&amp;gt; &amp;lt;tibble [0 √ó 1]&amp;gt;
##  9 &amp;lt;split [2.1K/234]&amp;gt; Fold09 &amp;lt;tibble [3 √ó 3]&amp;gt; &amp;lt;tibble [0 √ó 1]&amp;gt;
## 10 &amp;lt;split [2.1K/234]&amp;gt; Fold10 &amp;lt;tibble [3 √ó 3]&amp;gt; &amp;lt;tibble [0 √ó 1]&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;collect_metrics(cv_eval)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 3 x 5
##   .metric .estimator   mean     n std_err
##   &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;       &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;   &amp;lt;dbl&amp;gt;
## 1 ccc     standard   0.915     10 0.00660
## 2 rmse    standard   0.0673    10 0.00345
## 3 rsq     standard   0.854     10 0.0122&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;in-sample-vs-cross-validation&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;in-sample VS cross-validation&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;perf_lasso %&amp;gt;% 
  arrange(.metric)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 3 x 3
##   .metric .estimator .estimate
##   &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt;
## 1 ccc     standard      0.925 
## 2 rmse    standard      0.0648
## 3 rsq     standard      0.864&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;collect_metrics(cv_eval)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 3 x 5
##   .metric .estimator   mean     n std_err
##   &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;       &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;   &amp;lt;dbl&amp;gt;
## 1 ccc     standard   0.915     10 0.00660
## 2 rmse    standard   0.0673    10 0.00345
## 3 rsq     standard   0.854     10 0.0122&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;model-tuning&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Model tuning&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;its real power comes in allowing us to easily tune the hyperparameters in our model.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div id=&#34;tuning-lasso&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;üìå tuning lasso&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_mixture &amp;lt;- linear_reg(penalty = tune(), mixture = tune()) %&amp;gt;% 
  set_engine(&amp;quot;glmnet&amp;quot;)

data_mixture_wfl &amp;lt;- update_model(data_lasso_wfl, data_mixture)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;set-regular-paraments-for-grid-search&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;set regular paraments for grid search&lt;/h2&gt;
&lt;p&gt;Next, we will define a parameter space to search. {tune} allows you to perform either grid search (where the candidate values are pre-defined) or iterative search (ex: Bayesian optimization) where the results of the previous model are used to select the next parameter values to try.&lt;/p&gt;
&lt;p&gt;There are pros/cons to each. A big plus of grid search is that it allows you to take advantage of parallel processing to speed up your search, while iterative search is, by construction, sequential. A big plus of iterative search is that it can quickly rule out areas of parameter space which can be efficient when covering many values of a high dimensional parameter space (where a grid may require many, many models to comfortably cover the entire parameter space, where many of them may turn out to be redundant).&lt;/p&gt;
&lt;p&gt;For this post, we‚Äôre going to stick with grid search. The simplest form of grid search uses regular grids, where you provide a vector of values for each parameter and the grid is composed of every possible value combination.&lt;/p&gt;
&lt;p&gt;{tune} provides useful defaults for searching parameter spaces of many common hyperparameters, for example, creating grids for the ‚Äúpenalty‚Äù parameter in log-10 space. We can simply specify the parameters, pass these to grid_regular(), and specify that we want 5 levels of penalization and 5 levels of mixture.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mixture_param &amp;lt;- parameters(penalty(), mixture())

regular_grid &amp;lt;- grid_regular(mixture_param, levels = c(5, 5))

regular_grid %&amp;gt;% 
  ggplot(aes(x = mixture, y = penalty)) +
  geom_point() +
  scale_y_log10()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-03-31-tidymodels-machine-learning-ecosystem_files/figure-html/unnamed-chunk-16-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;set-non-regular-paraments-for-grid-search&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;set non-regular paraments for grid search&lt;/h2&gt;
&lt;p&gt;{tune} also provides ways to create non-regular grids as well.&lt;/p&gt;
&lt;p&gt;Random grids generated using grid_random() will uniformly sample the parameter space.&lt;/p&gt;
&lt;p&gt;Space-filling designs (SFD) generated using grid_max_entropy() will try to keep candidate values away from one another in order to more efficiently cover the parameter space.&lt;/p&gt;
&lt;p&gt;The below shows how to create a SFD grid and plots 25 candidate values.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sfd_grid &amp;lt;- grid_max_entropy(mixture_param, size = 25)

sfd_grid&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 25 x 2
##     penalty mixture
##       &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;
##  1 1.19e- 7 0.997  
##  2 6.06e- 1 0.0986 
##  3 5.44e- 9 0.718  
##  4 2.27e- 5 0.215  
##  5 2.20e- 7 0.826  
##  6 1.24e- 1 0.929  
##  7 3.25e- 4 0.693  
##  8 6.89e- 3 0.00913
##  9 1.01e- 6 0.517  
## 10 1.71e-10 0.970  
## # ‚Ä¶ with 15 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sfd_grid %&amp;gt;% 
  ggplot(aes(x = mixture, y = penalty)) +
  geom_point() +
  scale_y_log10()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-03-31-tidymodels-machine-learning-ecosystem_files/figure-html/unnamed-chunk-17-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;parallelization-set-up&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;parallelization set up&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(doParallel)

all_cores &amp;lt;- parallel::detectCores(logical = FALSE)

cl &amp;lt;- makePSOCKcluster(all_cores-1)
registerDoParallel(cl)

clusterEvalQ(cl, {library(tidymodels)})&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [[1]]
##  [1] &amp;quot;yardstick&amp;quot;  &amp;quot;workflows&amp;quot;  &amp;quot;tune&amp;quot;       &amp;quot;tibble&amp;quot;     &amp;quot;rsample&amp;quot;   
##  [6] &amp;quot;tidyr&amp;quot;      &amp;quot;recipes&amp;quot;    &amp;quot;purrr&amp;quot;      &amp;quot;parsnip&amp;quot;    &amp;quot;infer&amp;quot;     
## [11] &amp;quot;ggplot2&amp;quot;    &amp;quot;dplyr&amp;quot;      &amp;quot;dials&amp;quot;      &amp;quot;scales&amp;quot;     &amp;quot;broom&amp;quot;     
## [16] &amp;quot;tidymodels&amp;quot; &amp;quot;stats&amp;quot;      &amp;quot;graphics&amp;quot;   &amp;quot;grDevices&amp;quot;  &amp;quot;utils&amp;quot;     
## [21] &amp;quot;datasets&amp;quot;   &amp;quot;methods&amp;quot;    &amp;quot;base&amp;quot;      
## 
## [[2]]
##  [1] &amp;quot;yardstick&amp;quot;  &amp;quot;workflows&amp;quot;  &amp;quot;tune&amp;quot;       &amp;quot;tibble&amp;quot;     &amp;quot;rsample&amp;quot;   
##  [6] &amp;quot;tidyr&amp;quot;      &amp;quot;recipes&amp;quot;    &amp;quot;purrr&amp;quot;      &amp;quot;parsnip&amp;quot;    &amp;quot;infer&amp;quot;     
## [11] &amp;quot;ggplot2&amp;quot;    &amp;quot;dplyr&amp;quot;      &amp;quot;dials&amp;quot;      &amp;quot;scales&amp;quot;     &amp;quot;broom&amp;quot;     
## [16] &amp;quot;tidymodels&amp;quot; &amp;quot;stats&amp;quot;      &amp;quot;graphics&amp;quot;   &amp;quot;grDevices&amp;quot;  &amp;quot;utils&amp;quot;     
## [21] &amp;quot;datasets&amp;quot;   &amp;quot;methods&amp;quot;    &amp;quot;base&amp;quot;      
## 
## [[3]]
##  [1] &amp;quot;yardstick&amp;quot;  &amp;quot;workflows&amp;quot;  &amp;quot;tune&amp;quot;       &amp;quot;tibble&amp;quot;     &amp;quot;rsample&amp;quot;   
##  [6] &amp;quot;tidyr&amp;quot;      &amp;quot;recipes&amp;quot;    &amp;quot;purrr&amp;quot;      &amp;quot;parsnip&amp;quot;    &amp;quot;infer&amp;quot;     
## [11] &amp;quot;ggplot2&amp;quot;    &amp;quot;dplyr&amp;quot;      &amp;quot;dials&amp;quot;      &amp;quot;scales&amp;quot;     &amp;quot;broom&amp;quot;     
## [16] &amp;quot;tidymodels&amp;quot; &amp;quot;stats&amp;quot;      &amp;quot;graphics&amp;quot;   &amp;quot;grDevices&amp;quot;  &amp;quot;utils&amp;quot;     
## [21] &amp;quot;datasets&amp;quot;   &amp;quot;methods&amp;quot;    &amp;quot;base&amp;quot;      
## 
## [[4]]
##  [1] &amp;quot;yardstick&amp;quot;  &amp;quot;workflows&amp;quot;  &amp;quot;tune&amp;quot;       &amp;quot;tibble&amp;quot;     &amp;quot;rsample&amp;quot;   
##  [6] &amp;quot;tidyr&amp;quot;      &amp;quot;recipes&amp;quot;    &amp;quot;purrr&amp;quot;      &amp;quot;parsnip&amp;quot;    &amp;quot;infer&amp;quot;     
## [11] &amp;quot;ggplot2&amp;quot;    &amp;quot;dplyr&amp;quot;      &amp;quot;dials&amp;quot;      &amp;quot;scales&amp;quot;     &amp;quot;broom&amp;quot;     
## [16] &amp;quot;tidymodels&amp;quot; &amp;quot;stats&amp;quot;      &amp;quot;graphics&amp;quot;   &amp;quot;grDevices&amp;quot;  &amp;quot;utils&amp;quot;     
## [21] &amp;quot;datasets&amp;quot;   &amp;quot;methods&amp;quot;    &amp;quot;base&amp;quot;      
## 
## [[5]]
##  [1] &amp;quot;yardstick&amp;quot;  &amp;quot;workflows&amp;quot;  &amp;quot;tune&amp;quot;       &amp;quot;tibble&amp;quot;     &amp;quot;rsample&amp;quot;   
##  [6] &amp;quot;tidyr&amp;quot;      &amp;quot;recipes&amp;quot;    &amp;quot;purrr&amp;quot;      &amp;quot;parsnip&amp;quot;    &amp;quot;infer&amp;quot;     
## [11] &amp;quot;ggplot2&amp;quot;    &amp;quot;dplyr&amp;quot;      &amp;quot;dials&amp;quot;      &amp;quot;scales&amp;quot;     &amp;quot;broom&amp;quot;     
## [16] &amp;quot;tidymodels&amp;quot; &amp;quot;stats&amp;quot;      &amp;quot;graphics&amp;quot;   &amp;quot;grDevices&amp;quot;  &amp;quot;utils&amp;quot;     
## [21] &amp;quot;datasets&amp;quot;   &amp;quot;methods&amp;quot;    &amp;quot;base&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;tuning-by-parallelization&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;tuning by parallelization&lt;/h2&gt;
&lt;p&gt;Now we‚Äôre going to create our tuning object, which will take our recipe, our model, our resamples, and our metrics, to fit our 25 models over 10 resamples and compute our performance metrics, then we‚Äôll stop our parallelization.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_tune &amp;lt;- tune_grid(
  data_rec,
  model = data_mixture,
  resamples = cv_splits,
  grid = regular_grid,
  metrics = perf_metrics
)

stopCluster(cl)

# Naive Lasso performance
collect_metrics(cv_eval)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 3 x 5
##   .metric .estimator   mean     n std_err
##   &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;       &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;   &amp;lt;dbl&amp;gt;
## 1 ccc     standard   0.915     10 0.00660
## 2 rmse    standard   0.0673    10 0.00345
## 3 rsq     standard   0.854     10 0.0122&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;show-best&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;show best&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Best tuned models
show_best(data_tune, &amp;quot;ccc&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 5 x 7
##        penalty mixture .metric .estimator  mean     n std_err
##          &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;      &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;   &amp;lt;dbl&amp;gt;
## 1 0.0000000001    0.25 ccc     standard   0.917    10 0.00660
## 2 0.0000000316    0.25 ccc     standard   0.917    10 0.00660
## 3 0.00001         0.25 ccc     standard   0.917    10 0.00660
## 4 0.0000000001    0.75 ccc     standard   0.917    10 0.00661
## 5 0.0000000316    0.75 ccc     standard   0.917    10 0.00661&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;show_best(data_tune, &amp;quot;rmse&amp;quot;, maximize = FALSE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 5 x 7
##        penalty mixture .metric .estimator   mean     n std_err
##          &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;       &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;   &amp;lt;dbl&amp;gt;
## 1 0.00316         0.25 rmse    standard   0.0672    10 0.00334
## 2 0.0000000001    0    rmse    standard   0.0672    10 0.00302
## 3 0.0000000316    0    rmse    standard   0.0672    10 0.00302
## 4 0.00001         0    rmse    standard   0.0672    10 0.00302
## 5 0.00316         0    rmse    standard   0.0672    10 0.00302&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;show_best(data_tune, &amp;quot;rsq&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 5 x 7
##        penalty mixture .metric .estimator  mean     n std_err
##          &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;      &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;   &amp;lt;dbl&amp;gt;
## 1 0.00316         0.25 rsq     standard   0.855    10 0.0116 
## 2 0.0000000001    0    rsq     standard   0.854    10 0.00997
## 3 0.0000000316    0    rsq     standard   0.854    10 0.00997
## 4 0.00001         0    rsq     standard   0.854    10 0.00997
## 5 0.00316         0    rsq     standard   0.854    10 0.00997&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;vis&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;vis&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;collect_metrics(data_tune) %&amp;gt;% 
  filter(.metric == &amp;quot;rmse&amp;quot;) %&amp;gt;%
  mutate(mixture = format(mixture)) %&amp;gt;% 
  ggplot(aes(x = penalty, y = mean, col = mixture)) +
  geom_line() +
  geom_point() +
  scale_x_log10() +
  geom_vline(xintercept = 0.001, color = &amp;quot;purple&amp;quot;, lty = &amp;quot;dotted&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-03-31-tidymodels-machine-learning-ecosystem_files/figure-html/unnamed-chunk-21-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;select-best-model&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;select best model&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;best_mixture &amp;lt;- 
    select_best(data_tune, metric = &amp;quot;rmse&amp;quot;, maximize = FALSE)

best_mixture&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 1 x 2
##   penalty mixture
##     &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;
## 1 0.00316    0.25&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_mixture_final &amp;lt;-
    data_mixture_wfl %&amp;gt;%
    finalize_workflow(best_mixture) %&amp;gt;%
    fit(data = data_train)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;how-our-model-did-again-our-test-set&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;how our model did again our test set&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data_mixture_final %&amp;gt;% 
  predict(data_test) %&amp;gt;% 
  bind_cols(select(data_test, Sale_Price)) %&amp;gt;% 
  mutate(Sale_Price = log10(Sale_Price)) %&amp;gt;% 
  perf_metrics(truth = Sale_Price, estimate = .pred)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 3 x 3
##   .metric .estimator .estimate
##   &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt;
## 1 rmse    standard      0.0885
## 2 rsq     standard      0.768 
## 3 ccc     standard      0.867&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;what-variables-turned-out-to-be-the-most-important-in-predicting-sale-price&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;What variables turned out to be the most important in predicting sale price?&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;tidy_coefs &amp;lt;- data_mixture_final$fit$fit$fit %&amp;gt;% 
  broom::tidy() %&amp;gt;% 
  filter(term != &amp;quot;(Intercept)&amp;quot;) %&amp;gt;% 
  select(-step, -dev.ratio)

delta &amp;lt;- abs(tidy_coefs$lambda - best_mixture$penalty)
lambda_opt &amp;lt;- tidy_coefs$lambda[which.min(delta)]

label_coefs &amp;lt;- tidy_coefs %&amp;gt;% 
  mutate(abs_estimate = abs(estimate)) %&amp;gt;% 
  filter(abs_estimate &amp;gt;= 0.01) %&amp;gt;% 
  distinct(term) %&amp;gt;% 
  inner_join(tidy_coefs, by = &amp;quot;term&amp;quot;) %&amp;gt;% 
  filter(lambda == lambda_opt)

label_coefs&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 16 x 3
##    term                              estimate  lambda
##    &amp;lt;chr&amp;gt;                                &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;
##  1 PC1                               -0.0340  0.00306
##  2 Garage_Cars                        0.0132  0.00306
##  3 Year_Built                         0.00666 0.00306
##  4 Year_Remod_Add                     0.0247  0.00306
##  5 Fireplaces                         0.0117  0.00306
##  6 TotRms_AbvGrd                      0.0128  0.00306
##  7 BsmtFin_Type_1_GLQ                 0.00617 0.00306
##  8 Full_Bath                          0.0119  0.00306
##  9 Central_Air_Y                      0.0114  0.00306
## 10 MS_Zoning_Residential_Low_Density  0.0138  0.00306
## 11 Functional_Typ                     0.0105  0.00306
## 12 Neighborhood_Edwards              -0.0102  0.00306
## 13 Sale_Type_New                      0.00905 0.00306
## 14 Mas_Vnr_Type_None                  0.00765 0.00306
## 15 Neighborhood_Somerset              0.00908 0.00306
## 16 Mas_Vnr_Type_Stone                 0.00171 0.00306&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;tidy_coefs %&amp;gt;% 
  ggplot(aes(x = lambda, y = estimate, group = term, col = term, label = term)) +
  geom_vline(xintercept = lambda_opt, lty = 3) +
  geom_line(alpha = .4) +
  theme(legend.position = &amp;quot;none&amp;quot;) +
  scale_x_log10() +
  ggrepel::geom_text_repel(data = label_coefs)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2020-03-31-tidymodels-machine-learning-ecosystem_files/figure-html/unnamed-chunk-24-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;The above shows the coefficient estimates plotted against lambda, the dotted line indicating the optimal lambda that we selected during our tuning. Nice to see that one of our principal components ended up being important!&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;links&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;links&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://dnield.com/posts/tidymodels-intro/&#34;&gt;Introduction to the {tidymodels} Machine Learning Ecosystem | David Nield&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Writing technical content in Academic</title>
      <link>/post/writing-technical-content/</link>
      <pubDate>Fri, 12 Jul 2019 00:00:00 +0000</pubDate>
      <guid>/post/writing-technical-content/</guid>
      <description>&lt;p&gt;Academic is designed to give technical content creators a seamless experience. You can focus on the content and Academic handles the rest.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Highlight your code snippets, take notes on math classes, and draw diagrams from textual representation.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;On this page, you&amp;rsquo;ll find some examples of the types of technical content that can be rendered with Academic.&lt;/p&gt;
&lt;h2 id=&#34;examples&#34;&gt;Examples&lt;/h2&gt;
&lt;h3 id=&#34;code&#34;&gt;Code&lt;/h3&gt;
&lt;p&gt;Academic supports a Markdown extension for highlighting code syntax. You can enable this feature by toggling the &lt;code&gt;highlight&lt;/code&gt; option in your &lt;code&gt;config/_default/params.toml&lt;/code&gt; file.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```python
import pandas as pd
data = pd.read_csv(&amp;quot;data.csv&amp;quot;)
data.head()
```
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;import pandas as pd
data = pd.read_csv(&amp;quot;data.csv&amp;quot;)
data.head()
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;math&#34;&gt;Math&lt;/h3&gt;
&lt;p&gt;Academic supports a Markdown extension for $\LaTeX$ math. You can enable this feature by toggling the &lt;code&gt;math&lt;/code&gt; option in your &lt;code&gt;config/_default/params.toml&lt;/code&gt; file.&lt;/p&gt;
&lt;p&gt;To render &lt;em&gt;inline&lt;/em&gt; or &lt;em&gt;block&lt;/em&gt; math, wrap your LaTeX math with &lt;code&gt;$...$&lt;/code&gt; or &lt;code&gt;$$...$$&lt;/code&gt;, respectively.&lt;/p&gt;
&lt;p&gt;Example &lt;strong&gt;math block&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-tex&#34;&gt;$$\gamma_{n} = \frac{ 
\left | \left (\mathbf x_{n} - \mathbf x_{n-1} \right )^T 
\left [\nabla F (\mathbf x_{n}) - \nabla F (\mathbf x_{n-1}) \right ] \right |}
{\left \|\nabla F(\mathbf{x}_{n}) - \nabla F(\mathbf{x}_{n-1}) \right \|^2}$$
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;p&gt;$$\gamma_{n} = \frac{ \left | \left (\mathbf x_{n} - \mathbf x_{n-1} \right )^T \left [\nabla F (\mathbf x_{n}) - \nabla F (\mathbf x_{n-1}) \right ] \right |}{\left |\nabla F(\mathbf{x}_{n}) - \nabla F(\mathbf{x}_{n-1}) \right |^2}$$&lt;/p&gt;
&lt;p&gt;Example &lt;strong&gt;inline math&lt;/strong&gt; &lt;code&gt;$\nabla F(\mathbf{x}_{n})$&lt;/code&gt; renders as $\nabla F(\mathbf{x}_{n})$.&lt;/p&gt;
&lt;p&gt;Example &lt;strong&gt;multi-line math&lt;/strong&gt; using the &lt;code&gt;\\&lt;/code&gt; math linebreak:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-tex&#34;&gt;$$f(k;p_0^*) = \begin{cases} p_0^* &amp;amp; \text{if }k=1, \\
1-p_0^* &amp;amp; \text {if }k=0.\end{cases}$$
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;p&gt;$$f(k;p_0^*) = \begin{cases} p_0^* &amp;amp; \text{if }k=1, \&lt;br&gt;
1-p_0^* &amp;amp; \text {if }k=0.\end{cases}$$&lt;/p&gt;
&lt;h3 id=&#34;diagrams&#34;&gt;Diagrams&lt;/h3&gt;
&lt;p&gt;Academic supports a Markdown extension for diagrams. You can enable this feature by toggling the &lt;code&gt;diagram&lt;/code&gt; option in your &lt;code&gt;config/_default/params.toml&lt;/code&gt; file or by adding &lt;code&gt;diagram: true&lt;/code&gt; to your page front matter.&lt;/p&gt;
&lt;p&gt;An example &lt;strong&gt;flowchart&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```mermaid
graph TD
A[Hard] --&amp;gt;|Text| B(Round)
B --&amp;gt; C{Decision}
C --&amp;gt;|One| D[Result 1]
C --&amp;gt;|Two| E[Result 2]
```
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mermaid&#34;&gt;graph TD
A[Hard] --&amp;gt;|Text| B(Round)
B --&amp;gt; C{Decision}
C --&amp;gt;|One| D[Result 1]
C --&amp;gt;|Two| E[Result 2]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;An example &lt;strong&gt;sequence diagram&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```mermaid
sequenceDiagram
Alice-&amp;gt;&amp;gt;John: Hello John, how are you?
loop Healthcheck
    John-&amp;gt;&amp;gt;John: Fight against hypochondria
end
Note right of John: Rational thoughts!
John--&amp;gt;&amp;gt;Alice: Great!
John-&amp;gt;&amp;gt;Bob: How about you?
Bob--&amp;gt;&amp;gt;John: Jolly good!
```
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mermaid&#34;&gt;sequenceDiagram
Alice-&amp;gt;&amp;gt;John: Hello John, how are you?
loop Healthcheck
    John-&amp;gt;&amp;gt;John: Fight against hypochondria
end
Note right of John: Rational thoughts!
John--&amp;gt;&amp;gt;Alice: Great!
John-&amp;gt;&amp;gt;Bob: How about you?
Bob--&amp;gt;&amp;gt;John: Jolly good!
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;An example &lt;strong&gt;Gantt diagram&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```mermaid
gantt
section Section
Completed :done,    des1, 2014-01-06,2014-01-08
Active        :active,  des2, 2014-01-07, 3d
Parallel 1   :         des3, after des1, 1d
Parallel 2   :         des4, after des1, 1d
Parallel 3   :         des5, after des3, 1d
Parallel 4   :         des6, after des4, 1d
```
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mermaid&#34;&gt;gantt
section Section
Completed :done,    des1, 2014-01-06,2014-01-08
Active        :active,  des2, 2014-01-07, 3d
Parallel 1   :         des3, after des1, 1d
Parallel 2   :         des4, after des1, 1d
Parallel 3   :         des5, after des3, 1d
Parallel 4   :         des6, after des4, 1d
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;An example &lt;strong&gt;class diagram&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```mermaid
classDiagram
Class01 &amp;lt;|-- AveryLongClass : Cool
&amp;lt;&amp;lt;interface&amp;gt;&amp;gt; Class01
Class09 --&amp;gt; C2 : Where am i?
Class09 --* C3
Class09 --|&amp;gt; Class07
Class07 : equals()
Class07 : Object[] elementData
Class01 : size()
Class01 : int chimp
Class01 : int gorilla
class Class10 {
  &amp;lt;&amp;lt;service&amp;gt;&amp;gt;
  int id
  size()
}
```
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mermaid&#34;&gt;classDiagram
Class01 &amp;lt;|-- AveryLongClass : Cool
&amp;lt;&amp;lt;interface&amp;gt;&amp;gt; Class01
Class09 --&amp;gt; C2 : Where am i?
Class09 --* C3
Class09 --|&amp;gt; Class07
Class07 : equals()
Class07 : Object[] elementData
Class01 : size()
Class01 : int chimp
Class01 : int gorilla
class Class10 {
  &amp;lt;&amp;lt;service&amp;gt;&amp;gt;
  int id
  size()
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;An example &lt;strong&gt;state diagram&lt;/strong&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```mermaid
stateDiagram
[*] --&amp;gt; Still
Still --&amp;gt; [*]
Still --&amp;gt; Moving
Moving --&amp;gt; Still
Moving --&amp;gt; Crash
Crash --&amp;gt; [*]
```
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-mermaid&#34;&gt;stateDiagram
[*] --&amp;gt; Still
Still --&amp;gt; [*]
Still --&amp;gt; Moving
Moving --&amp;gt; Still
Moving --&amp;gt; Crash
Crash --&amp;gt; [*]
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&#34;todo-lists&#34;&gt;Todo lists&lt;/h3&gt;
&lt;p&gt;You can even write your todo lists in Academic too:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;- [x] Write math example
- [x] Write diagram example
- [ ] Do something else
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;Write math example&lt;/li&gt;
&lt;li&gt;&lt;input checked=&#34;&#34; disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;Write diagram example&lt;/li&gt;
&lt;li&gt;&lt;input disabled=&#34;&#34; type=&#34;checkbox&#34;&gt;Do something else&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;tables&#34;&gt;Tables&lt;/h3&gt;
&lt;p&gt;Represent your data in tables:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;| First Header  | Second Header |
| ------------- | ------------- |
| Content Cell  | Content Cell  |
| Content Cell  | Content Cell  |
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;First Header&lt;/th&gt;
&lt;th&gt;Second Header&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Content Cell&lt;/td&gt;
&lt;td&gt;Content Cell&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Content Cell&lt;/td&gt;
&lt;td&gt;Content Cell&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;asides&#34;&gt;Asides&lt;/h3&gt;
&lt;p&gt;Academic supports a 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/#alerts&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;shortcode for asides&lt;/a&gt;, also referred to as &lt;em&gt;notices&lt;/em&gt;, &lt;em&gt;hints&lt;/em&gt;, or &lt;em&gt;alerts&lt;/em&gt;. By wrapping a paragraph in &lt;code&gt;{{% alert note %}} ... {{% /alert %}}&lt;/code&gt;, it will render as an aside.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;{{% alert note %}}
A Markdown aside is useful for displaying notices, hints, or definitions to your readers.
{{% /alert %}}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    A Markdown aside is useful for displaying notices, hints, or definitions to your readers.
  &lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;icons&#34;&gt;Icons&lt;/h3&gt;
&lt;p&gt;Academic enables you to use a wide range of 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/page-builder/#icons&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;icons from &lt;em&gt;Font Awesome&lt;/em&gt; and &lt;em&gt;Academicons&lt;/em&gt;&lt;/a&gt; in addition to 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/#emojis&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;emojis&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Here are some examples using the &lt;code&gt;icon&lt;/code&gt; shortcode to render icons:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;{{&amp;lt; icon name=&amp;quot;terminal&amp;quot; pack=&amp;quot;fas&amp;quot; &amp;gt;}} Terminal  
{{&amp;lt; icon name=&amp;quot;python&amp;quot; pack=&amp;quot;fab&amp;quot; &amp;gt;}} Python  
{{&amp;lt; icon name=&amp;quot;r-project&amp;quot; pack=&amp;quot;fab&amp;quot; &amp;gt;}} R
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;renders as&lt;/p&gt;
&lt;p&gt;
  &lt;i class=&#34;fas fa-terminal  pr-1 fa-fw&#34;&gt;&lt;/i&gt; Terminal&lt;br&gt;

  &lt;i class=&#34;fab fa-python  pr-1 fa-fw&#34;&gt;&lt;/i&gt; Python&lt;br&gt;

  &lt;i class=&#34;fab fa-r-project  pr-1 fa-fw&#34;&gt;&lt;/i&gt; R&lt;/p&gt;
&lt;h3 id=&#34;did-you-find-this-page-helpful-consider-sharing-it-&#34;&gt;Did you find this page helpful? Consider sharing it üôå&lt;/h3&gt;
</description>
    </item>
    
    <item>
      <title>Display Jupyter Notebooks with Academic</title>
      <link>/post/jupyter/</link>
      <pubDate>Tue, 05 Feb 2019 00:00:00 +0000</pubDate>
      <guid>/post/jupyter/</guid>
      <description>&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;from IPython.core.display import Image
Image(&#39;https://www.python.org/static/community_logos/python-logo-master-v3-TM-flattened.png&#39;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;./index_1_0.png&#34; alt=&#34;png&#34;&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;print(&amp;quot;Welcome to Academic!&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;Welcome to Academic!
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;install-python-and-jupyterlab&#34;&gt;Install Python and JupyterLab&lt;/h2&gt;
&lt;p&gt;
&lt;a href=&#34;https://www.anaconda.com/distribution/#download-section&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Install Anaconda&lt;/a&gt; which includes Python 3 and JupyterLab.&lt;/p&gt;
&lt;p&gt;Alternatively, install JupyterLab with &lt;code&gt;pip3 install jupyterlab&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&#34;create-or-upload-a-jupyter-notebook&#34;&gt;Create or upload a Jupyter notebook&lt;/h2&gt;
&lt;p&gt;Run the following commands in your Terminal, substituting &lt;code&gt;&amp;lt;MY-WEBSITE-FOLDER&amp;gt;&lt;/code&gt; and &lt;code&gt;&amp;lt;SHORT-POST-TITLE&amp;gt;&lt;/code&gt; with the file path to your Academic website folder and a short title for your blog post (use hyphens instead of spaces), respectively:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;mkdir -p &amp;lt;MY-WEBSITE-FOLDER&amp;gt;/content/post/&amp;lt;SHORT-POST-TITLE&amp;gt;/
cd &amp;lt;MY-WEBSITE-FOLDER&amp;gt;/content/post/&amp;lt;SHORT-POST-TITLE&amp;gt;/
jupyter lab index.ipynb
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;jupyter&lt;/code&gt; command above will launch the JupyterLab editor, allowing us to add Academic metadata and write the content.&lt;/p&gt;
&lt;h2 id=&#34;edit-your-post-metadata&#34;&gt;Edit your post metadata&lt;/h2&gt;
&lt;p&gt;The first cell of your Jupter notebook will contain your post metadata (
&lt;a href=&#34;https://sourcethemes.com/academic/docs/front-matter/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;front matter&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;In Jupter, choose &lt;em&gt;Markdown&lt;/em&gt; as the type of the first cell and wrap your Academic metadata in three dashes, indicating that it is YAML front matter:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;---
title: My post&#39;s title
date: 2019-09-01

# Put any other Academic metadata here...
---
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Edit the metadata of your post, using the 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/managing-content&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;documentation&lt;/a&gt; as a guide to the available options.&lt;/p&gt;
&lt;p&gt;To set a 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/managing-content/#featured-image&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;featured image&lt;/a&gt;, place an image named &lt;code&gt;featured&lt;/code&gt; into your post&amp;rsquo;s folder.&lt;/p&gt;
&lt;p&gt;For other tips, such as using math, see the guide on 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;writing content with Academic&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;convert-notebook-to-markdown&#34;&gt;Convert notebook to Markdown&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;jupyter nbconvert index.ipynb --to markdown --NbConvertApp.output_files_dir=.
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;example&#34;&gt;Example&lt;/h2&gt;
&lt;p&gt;This post was created with Jupyter. The orginal files can be found at &lt;a href=&#34;https://github.com/gcushen/hugo-academic/tree/master/exampleSite/content/post/jupyter&#34;&gt;https://github.com/gcushen/hugo-academic/tree/master/exampleSite/content/post/jupyter&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Academic: the website builder for Hugo</title>
      <link>/post/getting-started/</link>
      <pubDate>Wed, 20 Apr 2016 00:00:00 +0000</pubDate>
      <guid>/post/getting-started/</guid>
      <description>&lt;p&gt;&lt;strong&gt;Create a free website with Academic using Markdown, Jupyter, or RStudio. Choose a beautiful color theme and build anything with the Page Builder - over 40 &lt;em&gt;widgets&lt;/em&gt;, &lt;em&gt;themes&lt;/em&gt;, and &lt;em&gt;language packs&lt;/em&gt; included!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;
&lt;a href=&#34;https://academic-demo.netlify.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Check out the latest &lt;strong&gt;demo&lt;/strong&gt;&lt;/a&gt; of what you&amp;rsquo;ll get in less than 10 minutes, or 
&lt;a href=&#34;https://sourcethemes.com/academic/#expo&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;view the &lt;strong&gt;showcase&lt;/strong&gt;&lt;/a&gt; of personal, project, and business sites.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;üëâ 
&lt;a href=&#34;#install&#34;&gt;&lt;strong&gt;Get Started&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;üìö 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;View the &lt;strong&gt;documentation&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;üí¨ 
&lt;a href=&#34;https://discourse.gohugo.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;Ask a question&lt;/strong&gt; on the forum&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;üë• 
&lt;a href=&#34;https://spectrum.chat/academic&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Chat with the &lt;strong&gt;community&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;üê¶ Twitter: 
&lt;a href=&#34;https://twitter.com/source_themes&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;@source_themes&lt;/a&gt; 
&lt;a href=&#34;https://twitter.com/GeorgeCushen&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;@GeorgeCushen&lt;/a&gt; 
&lt;a href=&#34;https://twitter.com/search?q=%23MadeWithAcademic&amp;amp;src=typd&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;#MadeWithAcademic&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;üí° 
&lt;a href=&#34;https://github.com/gcushen/hugo-academic/issues&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Request a &lt;strong&gt;feature&lt;/strong&gt; or report a &lt;strong&gt;bug&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;‚¨ÜÔ∏è &lt;strong&gt;Updating?&lt;/strong&gt; View the 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/update/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Update Guide&lt;/a&gt; and 
&lt;a href=&#34;https://sourcethemes.com/academic/updates/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Release Notes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;‚ù§ &lt;strong&gt;Support development&lt;/strong&gt; of Academic:
&lt;ul&gt;
&lt;li&gt;‚òïÔ∏è 
&lt;a href=&#34;https://paypal.me/cushen&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;Donate a coffee&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;üíµ 
&lt;a href=&#34;https://www.patreon.com/cushen&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Become a backer on &lt;strong&gt;Patreon&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;üñºÔ∏è 
&lt;a href=&#34;https://www.redbubble.com/people/neutreno/works/34387919-academic&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Decorate your laptop or journal with an Academic &lt;strong&gt;sticker&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;üëï 
&lt;a href=&#34;https://academic.threadless.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Wear the &lt;strong&gt;T-shirt&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;üë©‚Äçüíª 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/contribute/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;Contribute&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;















&lt;figure id=&#34;figure-academic-is-mobile-first-with-a-responsive-design-to-ensure-that-your-site-looks-stunning-on-every-device&#34;&gt;


  &lt;a data-fancybox=&#34;&#34; href=&#34;https://raw.githubusercontent.com/gcushen/hugo-academic/master/academic.png&#34; data-caption=&#34;Academic is mobile first with a responsive design to ensure that your site looks stunning on every device.&#34;&gt;


  &lt;img src=&#34;https://raw.githubusercontent.com/gcushen/hugo-academic/master/academic.png&#34; alt=&#34;&#34;  &gt;
&lt;/a&gt;


  
  
  &lt;figcaption&gt;
    Academic is mobile first with a responsive design to ensure that your site looks stunning on every device.
  &lt;/figcaption&gt;


&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;Key features:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Page builder&lt;/strong&gt; - Create &lt;em&gt;anything&lt;/em&gt; with 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/page-builder/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;widgets&lt;/strong&gt;&lt;/a&gt; and 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;elements&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Edit any type of content&lt;/strong&gt; - Blog posts, publications, talks, slides, projects, and more!&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Create content&lt;/strong&gt; in 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;Markdown&lt;/strong&gt;&lt;/a&gt;, 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/jupyter/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;Jupyter&lt;/strong&gt;&lt;/a&gt;, or 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/install/#install-with-rstudio&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;RStudio&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Plugin System&lt;/strong&gt; - Fully customizable 
&lt;a href=&#34;https://sourcethemes.com/academic/themes/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;color&lt;/strong&gt; and &lt;strong&gt;font themes&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Display Code and Math&lt;/strong&gt; - Code highlighting and 
&lt;a href=&#34;https://en.wikibooks.org/wiki/LaTeX/Mathematics&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LaTeX math&lt;/a&gt; supported&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Integrations&lt;/strong&gt; - 
&lt;a href=&#34;https://analytics.google.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Google Analytics&lt;/a&gt;, 
&lt;a href=&#34;https://disqus.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Disqus commenting&lt;/a&gt;, Maps, Contact Forms, and more!&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Beautiful Site&lt;/strong&gt; - Simple and refreshing one page design&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Industry-Leading SEO&lt;/strong&gt; - Help get your website found on search engines and social media&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Media Galleries&lt;/strong&gt; - Display your images and videos with captions in a customizable gallery&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Mobile Friendly&lt;/strong&gt; - Look amazing on every screen with a mobile friendly version of your site&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Multi-language&lt;/strong&gt; - 15+ language packs including English, ‰∏≠Êñá, and Portugu√™s&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Multi-user&lt;/strong&gt; - Each author gets their own profile page&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Privacy Pack&lt;/strong&gt; - Assists with GDPR&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Stand Out&lt;/strong&gt; - Bring your site to life with animation, parallax backgrounds, and scroll effects&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;One-Click Deployment&lt;/strong&gt; - No servers. No databases. Only files.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;themes&#34;&gt;Themes&lt;/h2&gt;
&lt;p&gt;Academic comes with &lt;strong&gt;automatic day (light) and night (dark) mode&lt;/strong&gt; built-in. Alternatively, visitors can  choose their preferred mode - click the sun/moon icon in the top right of the 
&lt;a href=&#34;https://academic-demo.netlify.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Demo&lt;/a&gt; to see it in action! Day/night mode can also be disabled by the site admin in &lt;code&gt;params.toml&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;
&lt;a href=&#34;https://sourcethemes.com/academic/themes/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Choose a stunning &lt;strong&gt;theme&lt;/strong&gt; and &lt;strong&gt;font&lt;/strong&gt;&lt;/a&gt; for your site. Themes are fully 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/customization/#custom-theme&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;customizable&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;ecosystem&#34;&gt;Ecosystem&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;
&lt;a href=&#34;https://github.com/sourcethemes/academic-admin&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Academic Admin&lt;/a&gt;:&lt;/strong&gt; An admin tool to import publications from BibTeX or import assets for an offline site&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;
&lt;a href=&#34;https://github.com/sourcethemes/academic-scripts&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Academic Scripts&lt;/a&gt;:&lt;/strong&gt; Scripts to help migrate content to new versions of Academic&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;install&#34;&gt;Install&lt;/h2&gt;
&lt;p&gt;You can choose from one of the following four methods to install:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;a href=&#34;https://sourcethemes.com/academic/docs/install/#install-with-web-browser&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;one-click install using your web browser (recommended)&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;https://sourcethemes.com/academic/docs/install/#install-with-git&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;install on your computer using &lt;strong&gt;Git&lt;/strong&gt; with the Command Prompt/Terminal app&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;https://sourcethemes.com/academic/docs/install/#install-with-zip&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;install on your computer by downloading the &lt;strong&gt;ZIP files&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;https://sourcethemes.com/academic/docs/install/#install-with-rstudio&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;install on your computer with &lt;strong&gt;RStudio&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Then 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/get-started/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;personalize and deploy your new site&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;updating&#34;&gt;Updating&lt;/h2&gt;
&lt;p&gt;
&lt;a href=&#34;https://sourcethemes.com/academic/docs/update/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;View the Update Guide&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Feel free to &lt;em&gt;star&lt;/em&gt; the project on 
&lt;a href=&#34;https://github.com/gcushen/hugo-academic/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Github&lt;/a&gt; to help keep track of 
&lt;a href=&#34;https://sourcethemes.com/academic/updates&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;updates&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;license&#34;&gt;License&lt;/h2&gt;
&lt;p&gt;Copyright 2016-present 
&lt;a href=&#34;https://georgecushen.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;George Cushen&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Released under the 
&lt;a href=&#34;https://github.com/gcushen/hugo-academic/blob/master/LICENSE.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;MIT&lt;/a&gt; license.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
